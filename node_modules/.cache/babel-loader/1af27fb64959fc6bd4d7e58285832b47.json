{"ast":null,"code":"var _jsxFileName = \"C:\\\\networkproj\\\\src\\\\index.js\";\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport mapboxgl from 'mapbox-gl';\nimport sciOriginal from './sci.json';\nimport countryData from './country.json';\nimport classes from './Site.module.css';\nimport { BarChart, Cell, Bar, Tooltip, XAxis, ResponsiveContainer } from 'recharts';\nimport ReactGA from 'react-ga';\nimport './index.css';\nimport logo from './OECD_white_EN.png';\nimport MaterialIcon from 'material-icons-react';\nimport ForceGraph2D from 'react-force-graph';\nReactGA.initialize('UA-128268752-1');\nReactGA.pageview(window.location.search + window.location.pathname); //iso_3166_1_alpha_3\n//// Access token for Africapolis mapbox account\n\nmapboxgl.accessToken = 'pk.eyJ1IjoibWttZCIsImEiOiJjajBqYjJpY2owMDE0Mndsbml0d2V1ZXczIn0.el8wQmA-TSJp2ggX8fJ1rA';\nconst colors = [\"#F3F2E8\", \"#D4EBE2\", \"#B6E3DB\", \"#97DCD5\", \"#79D5CF\", \"#5ACEC9\", \"#3CC6C2\", \"#1DBFBC\", \"#333333\"]; //////////////////\n// sort array ascending\n\nconst legend = /*#__PURE__*/React.createElement(\"div\", {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 33,\n    columnNumber: 1\n  }\n}, /*#__PURE__*/React.createElement(\"h4\", {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 34,\n    columnNumber: 3\n  }\n}, \"Social Connectedness\"), /*#__PURE__*/React.createElement(\"div\", {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 35,\n    columnNumber: 1\n  }\n}, /*#__PURE__*/React.createElement(\"span\", {\n  style: {\n    backgroundColor: colors[0]\n  },\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 35,\n    columnNumber: 6\n  }\n}), \"< 1x\", \" \", /*#__PURE__*/React.createElement(\"small\", {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 35,\n    columnNumber: 65\n  }\n}, \"(20th percentile)\")), /*#__PURE__*/React.createElement(\"div\", {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 36,\n    columnNumber: 1\n  }\n}, /*#__PURE__*/React.createElement(\"span\", {\n  style: {\n    backgroundColor: colors[1]\n  },\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 36,\n    columnNumber: 6\n  }\n}), \"1-2x\"), /*#__PURE__*/React.createElement(\"div\", {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 37,\n    columnNumber: 1\n  }\n}, /*#__PURE__*/React.createElement(\"span\", {\n  style: {\n    backgroundColor: colors[2]\n  },\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 37,\n    columnNumber: 6\n  }\n}), \"2-3x\"), /*#__PURE__*/React.createElement(\"div\", {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 38,\n    columnNumber: 1\n  }\n}, /*#__PURE__*/React.createElement(\"span\", {\n  style: {\n    backgroundColor: colors[3]\n  },\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 38,\n    columnNumber: 6\n  }\n}), \"3-5x\"), /*#__PURE__*/React.createElement(\"div\", {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 39,\n    columnNumber: 1\n  }\n}, /*#__PURE__*/React.createElement(\"span\", {\n  style: {\n    backgroundColor: colors[4]\n  },\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 39,\n    columnNumber: 6\n  }\n}), \"5-10x\"), /*#__PURE__*/React.createElement(\"div\", {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 40,\n    columnNumber: 1\n  }\n}, /*#__PURE__*/React.createElement(\"span\", {\n  style: {\n    backgroundColor: colors[5]\n  },\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 40,\n    columnNumber: 6\n  }\n}), \"10-25x\"), /*#__PURE__*/React.createElement(\"div\", {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 41,\n    columnNumber: 1\n  }\n}, /*#__PURE__*/React.createElement(\"span\", {\n  style: {\n    backgroundColor: colors[6]\n  },\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 41,\n    columnNumber: 6\n  }\n}), \"25-100x\"), /*#__PURE__*/React.createElement(\"div\", {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 42,\n    columnNumber: 1\n  }\n}, /*#__PURE__*/React.createElement(\"span\", {\n  style: {\n    backgroundColor: colors[7]\n  },\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 42,\n    columnNumber: 6\n  }\n}), \">= 100x\"), /*#__PURE__*/React.createElement(\"div\", {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 1\n  }\n}, /*#__PURE__*/React.createElement(\"span\", {\n  style: {\n    backgroundColor: colors[8]\n  },\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 6\n  }\n}), \"Data not available\"));\n\nconst tooltip = e => {\n  if (e.payload[0]) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: classes.tooltip,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 12\n      }\n    }, \" \", e.payload[0].payload.region, \" \", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 76\n      }\n    }), \"SCI \", e.payload[0].payload.sciScaled, \"x\");\n  }\n}; //// Basic setting of the map\n\n\nclass Application extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.onUpdate = (ISO2, Name, Region) => {\n      this.setState({\n        selectedCountry: ISO2\n      });\n      let sci = [];\n      sciOriginal.map(e => this.state.button === \"From\" ? sci.push({\n        start: e.start,\n        end: e.end,\n        sci: e.sci\n      }) : sci.push({\n        end: e.start,\n        start: e.end,\n        sci: e.sci\n      }));\n      let selected = [];\n      let scidata = [];\n      let scidataRank = [];\n      let scidataRankRegion = {\n        Africa: [],\n        Americas: [],\n        Asia: [],\n        Europe: [],\n        Oceania: []\n      };\n      let scidataRankRegionCode = {\n        Africa: [],\n        Americas: [],\n        Asia: [],\n        Europe: [],\n        Oceania: []\n      };\n      sci.map(e => e.start === this.state.selectedCountry ? selected.push(e) : null);\n      selected.map(e => {\n        scidata.push(e.sci);\n        scidataRank.push(e.sci);\n        scidataRankRegion[countryData[e.end][1]].push(e.sci);\n        scidataRankRegionCode[countryData[e.end][1]].push(e.end);\n      });\n      Object.keys(scidataRankRegion).map(k => {\n        let sorted = scidataRankRegion[k].slice().sort((a, b) => b - a);\n        let rank_region = scidataRankRegion[k].map(v => sorted.indexOf(v) + 1);\n        scidataRankRegion[k] = rank_region;\n      });\n      let percentile20 = quantile(scidata, .20); //selected.map(e => e.sci = e.sci/ percentile20)\n\n      let sortedSCI = scidata.sort((a, b) => b - a);\n      let rank_country = scidataRank.map(v => sortedSCI.indexOf(v) + 1);\n      let top5 = scidata.sort((a, b) => b - a).slice(0, 5);\n      selected.map(e => {\n        e.region = countryData[e.end][1];\n        e.sciScaled = Math.round(e.sci / percentile20);\n\n        if (e.sci === top5[0]) {\n          top5_list[0] = e;\n        } else if (e.sci === top5[1]) {\n          top5_list[1] = e;\n        } else if (e.sci === top5[2]) {\n          top5_list[2] = e;\n        } else if (e.sci === top5[3]) {\n          top5_list[3] = e;\n        } else if (e.sci === top5[4]) {\n          top5_list[4] = e;\n        }\n      }); //top5_list.map(e => e.sciScaled= Math.round(e.sci/percentile20))\n      // Calculate the sums and group data (while tracking count)\n\n      const reduced = selected.reduce(function (m, d) {\n        if (!m[d.region]) {\n          m[d.region] = { ...d,\n            count: 1\n          };\n          return m;\n        }\n\n        m[d.region].sciScaled += d.sciScaled;\n        m[d.region].count += 1;\n        return m;\n      }, {}); // Create new array from grouped data and compute the average\n\n      result = Object.keys(reduced).map(function (k) {\n        const item = reduced[k];\n        return {\n          region: item.region,\n          sciScaled: Math.round(item.sciScaled / item.count * 100) / 100,\n          numbers: item.count\n        };\n      }); // console.log(JSON.stringify(result,null,4));\n\n      this.setState({\n        name: Name,\n        region: Region\n      });\n      let matchExpression = ['match', ['get', 'iso_3166_1']]; // Calculate color values for each country based on 'hdi' value\n\n      selected.forEach(e => {\n        if (e.sci / percentile20 < 1) {\n          matchExpression.push(e['end'], \"#F3F2E8\");\n        } else if (e.sci / percentile20 < 2) {\n          matchExpression.push(e['end'], \"#D4EBE2\");\n        } else if (e.sci / percentile20 < 3) {\n          matchExpression.push(e['end'], \"#B6E3DB\");\n        } else if (e.sci / percentile20 < 5) {\n          matchExpression.push(e['end'], \"#97DCD5\");\n        } else if (e.sci / percentile20 < 10) {\n          matchExpression.push(e['end'], \"#79D5CF\");\n        } else if (e.sci / percentile20 < 25) {\n          matchExpression.push(e['end'], \"#5ACEC9\");\n        } else if (e.sci / percentile20 < 100) {\n          matchExpression.push(e['end'], \"#3CC6C2\");\n        } else {\n          matchExpression.push(e['end'], \"#1DBFBC\");\n        }\n      });\n      matchExpression.push(this.state.selectedCountry, '#e8ae40'); // Last value is the default, used where there is no data\n\n      matchExpression.push('rgba(0, 0, 0, 0)'); // //console.log(this.state.selectedOption, prevState.selectedOption);\n\n      this.remove('country');\n      this.map.addLayer({\n        id: 'country',\n        source: 'africapolis_country',\n        type: 'fill',\n        filter: [\"match\", [\"get\", \"iso_3166_1\"], [\"IR\", \"CN\", \"GL\", \"SJ\", \"TM\", \"EH\", \"KP\", \"TJ\"], false, true],\n        'source-layer': 'country_boundaries',\n        paint: {\n          'fill-color': matchExpression,\n          'fill-opacity': 0.9\n        }\n      });\n      this.map.on('mousemove', 'country', e => {\n        if (this.state.selectedCountry !== e.features[0].properties.iso_3166_1) {\n          this.map.getCanvas().style.cursor = 'pointer';\n          let coordinates = [e.lngLat.lng, e.lngLat.lat];\n          let sciPopup = [];\n          let rankPopup = [];\n          let sciColor = [];\n          let rankPopupRegion = [];\n          let regionNumber = regionTotal[e.features[0].properties.region];\n          selected.forEach((d, i) => {\n            if (d.end === e.features[0].properties.iso_3166_1) {\n              sciPopup = Math.round(d.sci / percentile20);\n              rankPopup = rank_country[i];\n\n              if (d.sci / percentile20 < 1) {\n                sciColor.push(\"#F3F2E8\");\n              } else if (d.sci / percentile20 < 2) {\n                sciColor.push(\"#D4EBE2\");\n              } else if (d.sci / percentile20 < 3) {\n                sciColor.push(\"#B6E3DB\");\n              } else if (d.sci / percentile20 < 5) {\n                sciColor.push(\"#97DCD5\");\n              } else if (d.sci / percentile20 < 10) {\n                sciColor.push(\"#79D5CF\");\n              } else if (d.sci / percentile20 < 25) {\n                sciColor.push(\"#5ACEC9\");\n              } else if (d.sci / percentile20 < 100) {\n                sciColor.push(\"#3CC6C2\");\n              } else {\n                sciColor.push(\"#1DBFBC\");\n              }\n            }\n          });\n\n          if (scidataRankRegionCode[e.features[0].properties.region]) {\n            scidataRankRegionCode[e.features[0].properties.region].map((d, i) => e.features[0].properties.iso_3166_1 === d ? rankPopupRegion.push(scidataRankRegion[e.features[0].properties.region][i]) : null);\n          }\n\n          this.popUp.setLngLat(coordinates).setHTML(`<strong>${e.features[0].properties.name_en}</strong> ${sciPopup}<little>x</little><br/>\n                <span>Rank:</span><bold>${rankPopup}</bold><span>/194</span><br/>\n                  <small>In ${e.features[0].properties.region}:</small><bold>${rankPopupRegion}</bold><span>/${regionNumber}</span>`).addTo(this.map);\n          var popupElem = this.popUp.getElement();\n          popupElem.style.color = sciColor[0];\n        } else {\n          this.popUp.remove();\n        }\n      });\n      this.setState({\n        rendered: \"Yes\"\n      });\n    };\n\n    this.remove = obj => {\n      this.map.removeLayer(obj);\n    };\n\n    this.moveRegion = e => {\n      if (e) {\n        switch (e.activeLabel) {\n          case 'Africa':\n            this.map.flyTo({\n              center: [32.259, 2.036],\n              zoom: 3.14,\n              essential: true\n            });\n            break;\n\n          case 'Americas':\n            this.map.flyTo({\n              center: [-69.390, 22.259],\n              zoom: 1.82,\n              essential: true\n            });\n            break;\n\n          case 'Asia':\n            this.map.flyTo({\n              center: [104.687, 32.592],\n              zoom: 3.14,\n              essential: true\n            });\n            break;\n\n          case 'Europe':\n            this.map.flyTo({\n              center: [27.920, 56.907],\n              zoom: 3.19,\n              essential: true\n            });\n            break;\n\n          case 'Oceania':\n            this.map.flyTo({\n              center: [155.731, -16.435],\n              zoom: 3.11,\n              essential: true\n            });\n            break;\n\n          default:\n            return null;\n        }\n      }\n    };\n\n    this.state = {\n      lng: 40,\n      lat: 30,\n      zoom: 2,\n      selectedCountry: \"NG\",\n      name: \"\",\n      region: \"Africa\",\n      button: \"From\",\n      rendered: \"\"\n    };\n  }\n\n  componentDidMount() {\n    //// Initial map setting\n    let sci = [];\n    sciOriginal.map(e => this.state.button === \"From\" ? sci.push({\n      start: e.start,\n      end: e.end,\n      sci: e.sci\n    }) : sci.push({\n      end: e.start,\n      start: e.end,\n      sci: e.sci\n    }));\n    let selected = [];\n    let scidata = [];\n    let scidataRank = [];\n    let scidataRankRegion = {\n      Africa: [],\n      Americas: [],\n      Asia: [],\n      Europe: [],\n      Oceania: []\n    };\n    let scidataRankRegionCode = {\n      Africa: [],\n      Americas: [],\n      Asia: [],\n      Europe: [],\n      Oceania: []\n    };\n    sci.map(e => e.start === this.state.selectedCountry ? selected.push(e) : null);\n    selected.map(e => {\n      scidata.push(e.sci);\n      scidataRank.push(e.sci);\n      scidataRankRegion[countryData[e.end][1]].push(e.sci);\n      scidataRankRegionCode[countryData[e.end][1]].push(e.end);\n    });\n    Object.keys(scidataRankRegion).map(k => {\n      let sorted = scidataRankRegion[k].slice().sort((a, b) => b - a);\n      let rank_region = scidataRankRegion[k].map(v => sorted.indexOf(v) + 1);\n      scidataRankRegion[k] = rank_region;\n    });\n    this.popUp = new mapboxgl.Popup({\n      closeButton: false,\n      closeOnClick: false\n    });\n    this.map = new mapboxgl.Map({\n      container: this.mapContainer,\n      style: 'mapbox://styles/mkmd/ckguwdhux0j7719p9rz2hpmpi',\n      /// Select mapstyle from mapbox studio\n      center: [this.state.lng, this.state.lat],\n      zoom: this.state.zoom,\n      attributionControl: false\n    });\n    let top5 = scidata.sort((a, b) => b - a).slice(0, 5);\n    let sortedSCI = scidata.sort((a, b) => b - a);\n    let rank_country = scidataRank.map(v => sortedSCI.indexOf(v) + 1);\n    let percentile20 = quantile(scidata, .20);\n    selected.map(e => {\n      e.region = countryData[e.end][1];\n      e.sciScaled = Math.round(e.sci / percentile20);\n\n      if (e.sci === top5[0]) {\n        top5_list[0] = e;\n      } else if (e.sci === top5[1]) {\n        top5_list[1] = e;\n      } else if (e.sci === top5[2]) {\n        top5_list[2] = e;\n      } else if (e.sci === top5[3]) {\n        top5_list[3] = e;\n      } else if (e.sci === top5[4]) {\n        top5_list[4] = e;\n      }\n    }); // Calculate the sums and group data (while tracking count)\n\n    const reduced = selected.reduce(function (m, d) {\n      if (!m[d.region]) {\n        m[d.region] = { ...d,\n          count: 1\n        };\n        return m;\n      }\n\n      m[d.region].sciScaled += d.sciScaled;\n      m[d.region].count += 1;\n      return m;\n    }, {}); // Create new array from grouped data and compute the average\n\n    result = Object.keys(reduced).map(function (k) {\n      const item = reduced[k];\n      return {\n        region: item.region,\n        sciScaled: Math.round(item.sciScaled / item.count * 100) / 100\n      };\n    });\n    let matchExpression = ['match', ['get', 'iso_3166_1']]; // Calculate color values for each country based on 'hdi' value\n\n    selected.forEach(e => {\n      if (e.sci / percentile20 < 1) {\n        matchExpression.push(e['end'], \"#F3F2E8\");\n      } else if (e.sci / percentile20 < 2) {\n        matchExpression.push(e['end'], \"#D4EBE2\");\n      } else if (e.sci / percentile20 < 3) {\n        matchExpression.push(e['end'], \"#B6E3DB\");\n      } else if (e.sci / percentile20 < 5) {\n        matchExpression.push(e['end'], \"#97DCD5\");\n      } else if (e.sci / percentile20 < 10) {\n        matchExpression.push(e['end'], \"#79D5CF\");\n      } else if (e.sci / percentile20 < 25) {\n        matchExpression.push(e['end'], \"#5ACEC9\");\n      } else if (e.sci / percentile20 < 100) {\n        matchExpression.push(e['end'], \"#3CC6C2\");\n      } else {\n        matchExpression.push(e['end'], \"#1DBFBC\");\n      }\n    });\n    matchExpression.push(this.state.selectedCountry, '#e8ae40'); // Last value is the default, used where there is no data\n\n    matchExpression.push('rgba(0, 0, 0, 0)'); // //console.log(this.state.selectedOption, prevState.selectedOption);\n\n    this.map.on('load', () => {\n      this.map.addControl(new mapboxgl.AttributionControl({\n        customAttribution: \"Africapolis\"\n      })); // Add Country shape\n\n      this.map.addSource('africapolis_country', {\n        type: 'vector',\n        url: 'mapbox://mapbox.country-boundaries-v1'\n      }); // Add Country layer\n\n      this.map.addLayer({\n        id: 'country',\n        source: 'africapolis_country',\n        type: 'fill',\n        'source-layer': 'country_boundaries',\n        filter: [\"match\", [\"get\", \"iso_3166_1\"], [\"TJ\", \"IR\", \"CN\", \"GL\", \"SJ\", \"TM\", \"EH\", \"KP\"], false, true],\n        paint: {\n          'fill-color': matchExpression,\n          'fill-opacity': 0.9\n        }\n      });\n      this.map.on('click', 'country', e => {\n        this.popUp.remove();\n        this.onUpdate(e.features[0].properties.iso_3166_1, e.features[0].properties.name_en, e.features[0].properties.region);\n      });\n      this.map.on('mousemove', 'country', e => {\n        if (this.state.selectedCountry !== e.features[0].properties.iso_3166_1) {\n          this.map.getCanvas().style.cursor = 'pointer';\n          let coordinates = [e.lngLat.lng, e.lngLat.lat];\n          let sciPopup = [];\n          let rankPopup = [];\n          let sciColor = [];\n          let rankPopupRegion = [];\n          let regionNumber = regionTotal[e.features[0].properties.region];\n          selected.forEach((d, i) => {\n            if (d.end === e.features[0].properties.iso_3166_1) {\n              sciPopup = Math.round(d.sci / percentile20);\n              rankPopup = rank_country[i];\n\n              if (d.sci / percentile20 < 1) {\n                sciColor.push(\"#F3F2E8\");\n              } else if (d.sci / percentile20 < 2) {\n                sciColor.push(\"#D4EBE2\");\n              } else if (d.sci / percentile20 < 3) {\n                sciColor.push(\"#B6E3DB\");\n              } else if (d.sci / percentile20 < 5) {\n                sciColor.push(\"#97DCD5\");\n              } else if (d.sci / percentile20 < 10) {\n                sciColor.push(\"#79D5CF\");\n              } else if (d.sci / percentile20 < 25) {\n                sciColor.push(\"#5ACEC9\");\n              } else if (d.sci / percentile20 < 100) {\n                sciColor.push(\"#3CC6C2\");\n              } else {\n                sciColor.push(\"#1DBFBC\");\n              }\n            }\n          });\n\n          if (scidataRankRegionCode[e.features[0].properties.region]) {\n            scidataRankRegionCode[e.features[0].properties.region].map((d, i) => e.features[0].properties.iso_3166_1 === d ? rankPopupRegion.push(scidataRankRegion[e.features[0].properties.region][i]) : null);\n          }\n\n          this.popUp.setLngLat(coordinates).setHTML(`<strong>${e.features[0].properties.name_en}</strong> ${sciPopup}<little>x</little><br/>\n                              <span>Rank:</span><bold>${rankPopup}</bold><span>/194</span><br/>\n                                <small>In ${e.features[0].properties.region}:</small><bold>${rankPopupRegion}</bold><span>/${regionNumber}</span>`).addTo(this.map);\n          var popupElem = this.popUp.getElement();\n          popupElem.style.color = sciColor[0];\n        } else {\n          this.popUp.remove();\n        }\n      });\n      this.map.on('mouseleave', 'country', e => {\n        this.map.getCanvas().style.cursor = '';\n        this.popUp.remove();\n      });\n    });\n    this.setState({\n      name: \"Nigeria\"\n    });\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState.button !== this.state.button) {\n      this.onUpdate(this.state.selectedCountry, this.state.name, this.state.region);\n    }\n  }\n\n  //5 Countries with the highest SCI\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 429,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: classes.topleft,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 430,\n        columnNumber: 9\n      }\n    }, \" \", /*#__PURE__*/React.createElement(\"div\", {\n      className: classes.headwrapper,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 430,\n        columnNumber: 43\n      }\n    }, \" \", /*#__PURE__*/React.createElement(\"div\", {\n      className: classes.buttonwrapper,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 430,\n        columnNumber: 81\n      }\n    }), /*#__PURE__*/React.createElement(\"headtitle\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 432,\n        columnNumber: 11\n      }\n    }, \" \", this.state.name)), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 432,\n        columnNumber: 58\n      }\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 433,\n        columnNumber: 9\n      }\n    }, \"5 Most Connected Countries\"), /*#__PURE__*/React.createElement(\"table\", {\n      className: classes.table,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 434,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 435,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 436,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 437,\n        columnNumber: 17\n      }\n    }, \"Country\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 437,\n        columnNumber: 33\n      }\n    }, \"SCI\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 437,\n        columnNumber: 45\n      }\n    }, \"Region\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 440,\n        columnNumber: 13\n      }\n    }, \"network\")), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 444,\n        columnNumber: 9\n      }\n    }), \" \", /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 444,\n        columnNumber: 15\n      }\n    }, \"Regional average\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"VariableInfoWrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 445,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(MaterialIcon, {\n      icon: \"info\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 446,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 447,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 447,\n        columnNumber: 25\n      }\n    }, \"What is the Social Connectedness Index?\"), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 447,\n        columnNumber: 81\n      }\n    }), \"The Social Connectedness Index measures the strength of connectedness between two geographic areas as represented by Facebook friendship ties.\", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 448,\n        columnNumber: 161\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 448,\n        columnNumber: 166\n      }\n    }), /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 449,\n        columnNumber: 19\n      }\n    }, \"Methodology\"), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 449,\n        columnNumber: 47\n      }\n    }), \"We use aggregated friendship connections on Facebook to measure social connectedness between geographies. Locations are assigned to users based on information they provide, connection information, and location services they have opted into. We use these friendships to estimate the probability a pair of users in these countries are Facebook friends and map this to an index score called the Social Connectedness Index (SCI). If the SCI is twice as large between two pairs of regions, it means the users in the first region-pair are about twice as likely to be connected than the second region-pair.\", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 450,\n        columnNumber: 618\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 450,\n        columnNumber: 623\n      }\n    }), \"The figure shows a heat map of the social connectedness. For each country in our data, the colors highlight connections of the focal country, given in orange. The lightest color corresponds to the 20th percentile of the connectedness to the focal country; darker colors correspond to closer connections.\", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 452,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 452,\n        columnNumber: 22\n      }\n    }), /*#__PURE__*/React.createElement(\"color\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 452,\n        columnNumber: 27\n      }\n    }, \"Click the right button to check more detail and download the data on the Facebook page\"), \" \")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"FB\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 454,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      href: \"https://dataforgood.fb.com/tools/social-connectedness-index/#:~:text=The%20Social%20Connectedness%20Index%20measures,social%20mobility%2C%20trade%20and%20more.\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 455,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(MaterialIcon, {\n      icon: \"facebook\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 456,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 457,\n        columnNumber: 19\n      }\n    }, \"Move to the Facebook Data for Good page to check detail and download the data\")))), /*#__PURE__*/React.createElement(\"div\", {\n      ref: el => this.mapContainer = el,\n      className: classes.mapContainer,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 461,\n        columnNumber: 9\n      }\n    }));\n  }\n\n}\n\nReactDOM.render( /*#__PURE__*/React.createElement(Application, {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 466,\n    columnNumber: 17\n  }\n}), document.getElementById('app'));","map":{"version":3,"sources":["C:/networkproj/src/index.js"],"names":["React","ReactDOM","mapboxgl","sciOriginal","countryData","classes","BarChart","Cell","Bar","Tooltip","XAxis","ResponsiveContainer","ReactGA","logo","MaterialIcon","ForceGraph2D","initialize","pageview","window","location","search","pathname","accessToken","colors","legend","backgroundColor","tooltip","e","payload","region","sciScaled","Application","Component","constructor","props","onUpdate","ISO2","Name","Region","setState","selectedCountry","sci","map","state","button","push","start","end","selected","scidata","scidataRank","scidataRankRegion","Africa","Americas","Asia","Europe","Oceania","scidataRankRegionCode","Object","keys","k","sorted","slice","sort","a","b","rank_region","v","indexOf","percentile20","quantile","sortedSCI","rank_country","top5","Math","round","top5_list","reduced","reduce","m","d","count","result","item","numbers","name","matchExpression","forEach","remove","addLayer","id","source","type","filter","paint","on","features","properties","iso_3166_1","getCanvas","style","cursor","coordinates","lngLat","lng","lat","sciPopup","rankPopup","sciColor","rankPopupRegion","regionNumber","regionTotal","i","popUp","setLngLat","setHTML","name_en","addTo","popupElem","getElement","color","rendered","obj","removeLayer","moveRegion","activeLabel","flyTo","center","zoom","essential","componentDidMount","Popup","closeButton","closeOnClick","Map","container","mapContainer","attributionControl","addControl","AttributionControl","customAttribution","addSource","url","componentDidUpdate","prevProps","prevState","render","topleft","headwrapper","buttonwrapper","table","el","document","getElementById"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,QAAP,MAAqB,WAArB;AACA,OAAOC,QAAP,MAAqB,WAArB;AACA,OAAOC,WAAP,MAAwB,YAAxB;AACA,OAAOC,WAAP,MAAwB,gBAAxB;AACA,OAAOC,OAAP,MAAoB,mBAApB;AACA,SAASC,QAAT,EAAmBC,IAAnB,EAAyBC,GAAzB,EAA8BC,OAA9B,EAAuCC,KAAvC,EAA6CC,mBAA7C,QAAuE,UAAvE;AACA,OAAOC,OAAP,MAAoB,UAApB;AACA,OAAO,aAAP;AACA,OAAOC,IAAP,MAAiB,qBAAjB;AACA,OAAOC,YAAP,MAAyB,sBAAzB;AACA,OAAOC,YAAP,MAAyB,mBAAzB;AAGAH,OAAO,CAACI,UAAR,CAAmB,gBAAnB;AACAJ,OAAO,CAACK,QAAR,CAAiBC,MAAM,CAACC,QAAP,CAAgBC,MAAhB,GAAuBF,MAAM,CAACC,QAAP,CAAgBE,QAAxD,E,CAEA;AAEA;;AACAnB,QAAQ,CAACoB,WAAT,GAAuB,uFAAvB;AAGA,MAAMC,MAAM,GAAG,CAAC,SAAD,EAAW,SAAX,EAAqB,SAArB,EAA+B,SAA/B,EAAyC,SAAzC,EAAmD,SAAnD,EAA6D,SAA7D,EAAuE,SAAvE,EAAiF,SAAjF,CAAf,C,CAIA;AAEA;;AAEA,MAAMC,MAAM,gBACZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BADF,eAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAAK;AAAM,EAAA,KAAK,EAAE;AAACC,IAAAA,eAAe,EAAEF,MAAM,CAAC,CAAD;AAAxB,GAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAAL,EAAwD,MAAxD,oBAAgE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAQ,mBAAR,CAAhE,CAFA,eAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAAK;AAAM,EAAA,KAAK,EAAE;AAACE,IAAAA,eAAe,EAAEF,MAAM,CAAC,CAAD;AAAxB,GAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAAL,SAHA,eAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAAK;AAAM,EAAA,KAAK,EAAE;AAACE,IAAAA,eAAe,EAAEF,MAAM,CAAC,CAAD;AAAxB,GAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAAL,SAJA,eAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAAK;AAAM,EAAA,KAAK,EAAE;AAACE,IAAAA,eAAe,EAAEF,MAAM,CAAC,CAAD;AAAxB,GAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAAL,SALA,eAMA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAAK;AAAM,EAAA,KAAK,EAAE;AAACE,IAAAA,eAAe,EAAEF,MAAM,CAAC,CAAD;AAAxB,GAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAAL,UANA,eAOA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAAK;AAAM,EAAA,KAAK,EAAE;AAACE,IAAAA,eAAe,EAAEF,MAAM,CAAC,CAAD;AAAxB,GAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAAL,WAPA,eAQA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAAK;AAAM,EAAA,KAAK,EAAE;AAACE,IAAAA,eAAe,EAAEF,MAAM,CAAC,CAAD;AAAxB,GAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAAL,YARA,eASA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAAK;AAAM,EAAA,KAAK,EAAE;AAACE,IAAAA,eAAe,EAAEF,MAAM,CAAC,CAAD;AAAxB,GAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAAL,EAAwD,SAAxD,CATA,eAUA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAAK;AAAM,EAAA,KAAK,EAAE;AAACE,IAAAA,eAAe,EAAEF,MAAM,CAAC,CAAD;AAAxB,GAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAAL,EAAwD,oBAAxD,CAVA,CADA;;AAeA,MAAMG,OAAO,GAAGC,CAAC,IAAI;AACnB,MAAIA,CAAC,CAACC,OAAF,CAAU,CAAV,CAAJ,EAAkB;AAClB,wBAAS;AAAK,MAAA,SAAS,EAAEvB,OAAO,CAACqB,OAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAAmCC,CAAC,CAACC,OAAF,CAAU,CAAV,EAAaA,OAAb,CAAqBC,MAAxD,oBAAgE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAhE,UAA0EF,CAAC,CAACC,OAAF,CAAU,CAAV,EAAaA,OAAb,CAAqBE,SAA/F,MAAT;AAA6H;AAC9H,CAHD,C,CAMA;;;AACA,MAAMC,WAAN,SAA0B/B,KAAK,CAACgC,SAAhC,CAA0C;AACxCC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;;AADiB,SAgMrBC,QAhMqB,GAgMV,CAACC,IAAD,EAAOC,IAAP,EAAaC,MAAb,KAAwB;AAErB,WAAKC,QAAL,CAAc;AAACC,QAAAA,eAAe,EAACJ;AAAjB,OAAd;AAEA,UAAIK,GAAG,GAAC,EAAR;AACAtC,MAAAA,WAAW,CAACuC,GAAZ,CAAgBf,CAAC,IAAE,KAAKgB,KAAL,CAAWC,MAAX,KAAoB,MAApB,GAA4BH,GAAG,CAACI,IAAJ,CAAS;AAACC,QAAAA,KAAK,EAACnB,CAAC,CAACmB,KAAT;AAAeC,QAAAA,GAAG,EAACpB,CAAC,CAACoB,GAArB;AAAyBN,QAAAA,GAAG,EAACd,CAAC,CAACc;AAA/B,OAAT,CAA5B,GAA4EA,GAAG,CAACI,IAAJ,CAAS;AAACE,QAAAA,GAAG,EAACpB,CAAC,CAACmB,KAAP;AAAaA,QAAAA,KAAK,EAACnB,CAAC,CAACoB,GAArB;AAAyBN,QAAAA,GAAG,EAACd,CAAC,CAACc;AAA/B,OAAT,CAA/F;AAGA,UAAIO,QAAQ,GAAG,EAAf;AACA,UAAIC,OAAO,GAAE,EAAb;AACA,UAAIC,WAAW,GAAG,EAAlB;AACA,UAAIC,iBAAiB,GAAG;AAACC,QAAAA,MAAM,EAAC,EAAR;AAAWC,QAAAA,QAAQ,EAAC,EAApB;AAAuBC,QAAAA,IAAI,EAAC,EAA5B;AAA+BC,QAAAA,MAAM,EAAC,EAAtC;AAAyCC,QAAAA,OAAO,EAAC;AAAjD,OAAxB;AACA,UAAIC,qBAAqB,GAAG;AAACL,QAAAA,MAAM,EAAC,EAAR;AAAWC,QAAAA,QAAQ,EAAC,EAApB;AAAuBC,QAAAA,IAAI,EAAC,EAA5B;AAA+BC,QAAAA,MAAM,EAAC,EAAtC;AAAyCC,QAAAA,OAAO,EAAC;AAAjD,OAA5B;AACAf,MAAAA,GAAG,CAACC,GAAJ,CAAQf,CAAC,IAAIA,CAAC,CAACmB,KAAF,KAAU,KAAKH,KAAL,CAAWH,eAArB,GAAsCQ,QAAQ,CAACH,IAAT,CAAclB,CAAd,CAAtC,GAAyD,IAAtE;AACAqB,MAAAA,QAAQ,CAACN,GAAT,CAAaf,CAAC,IAAI;AAChBsB,QAAAA,OAAO,CAACJ,IAAR,CAAalB,CAAC,CAACc,GAAf;AACAS,QAAAA,WAAW,CAACL,IAAZ,CAAiBlB,CAAC,CAACc,GAAnB;AACAU,QAAAA,iBAAiB,CAAC/C,WAAW,CAACuB,CAAC,CAACoB,GAAH,CAAX,CAAmB,CAAnB,CAAD,CAAjB,CAAyCF,IAAzC,CAA8ClB,CAAC,CAACc,GAAhD;AACAgB,QAAAA,qBAAqB,CAACrD,WAAW,CAACuB,CAAC,CAACoB,GAAH,CAAX,CAAmB,CAAnB,CAAD,CAArB,CAA6CF,IAA7C,CAAkDlB,CAAC,CAACoB,GAApD;AAED,OAND;AASAW,MAAAA,MAAM,CAACC,IAAP,CAAYR,iBAAZ,EAA+BT,GAA/B,CACEkB,CAAC,IAAI;AACH,YAAIC,MAAM,GAAGV,iBAAiB,CAACS,CAAD,CAAjB,CAAqBE,KAArB,GAA6BC,IAA7B,CAAkC,CAACC,CAAD,EAAGC,CAAH,KAASA,CAAC,GAACD,CAA7C,CAAb;AACA,YAAIE,WAAW,GAACf,iBAAiB,CAACS,CAAD,CAAjB,CAAqBlB,GAArB,CAAyByB,CAAC,IAAIN,MAAM,CAACO,OAAP,CAAeD,CAAf,IAAkB,CAAhD,CAAhB;AACAhB,QAAAA,iBAAiB,CAACS,CAAD,CAAjB,GAAqBM,WAArB;AACD,OALH;AASA,UAAIG,YAAY,GAAGC,QAAQ,CAACrB,OAAD,EAAU,GAAV,CAA3B,CAhCqB,CAiCrB;;AAEA,UAAIsB,SAAS,GAACtB,OAAO,CAACc,IAAR,CAAa,CAACC,CAAD,EAAGC,CAAH,KAASA,CAAC,GAACD,CAAxB,CAAd;AACA,UAAIQ,YAAY,GAACtB,WAAW,CAACR,GAAZ,CAAgByB,CAAC,IAAII,SAAS,CAACH,OAAV,CAAkBD,CAAlB,IAAqB,CAA1C,CAAjB;AACA,UAAIM,IAAI,GAACxB,OAAO,CAACc,IAAR,CAAa,CAACC,CAAD,EAAGC,CAAH,KAASA,CAAC,GAACD,CAAxB,EAA2BF,KAA3B,CAAiC,CAAjC,EAAmC,CAAnC,CAAT;AACAd,MAAAA,QAAQ,CAACN,GAAT,CAAaf,CAAC,IAAI;AAChBA,QAAAA,CAAC,CAACE,MAAF,GAASzB,WAAW,CAACuB,CAAC,CAACoB,GAAH,CAAX,CAAmB,CAAnB,CAAT;AACApB,QAAAA,CAAC,CAACG,SAAF,GAAa4C,IAAI,CAACC,KAAL,CAAWhD,CAAC,CAACc,GAAF,GAAM4B,YAAjB,CAAb;;AACA,YAAG1C,CAAC,CAACc,GAAF,KAAQgC,IAAI,CAAC,CAAD,CAAf,EAAoB;AAACG,UAAAA,SAAS,CAAC,CAAD,CAAT,GAAajD,CAAb;AAAe,SAApC,MACK,IAAGA,CAAC,CAACc,GAAF,KAAQgC,IAAI,CAAC,CAAD,CAAf,EAAoB;AAACG,UAAAA,SAAS,CAAC,CAAD,CAAT,GAAajD,CAAb;AAAe,SAApC,MACA,IAAGA,CAAC,CAACc,GAAF,KAAQgC,IAAI,CAAC,CAAD,CAAf,EAAoB;AAACG,UAAAA,SAAS,CAAC,CAAD,CAAT,GAAajD,CAAb;AAAe,SAApC,MACA,IAAGA,CAAC,CAACc,GAAF,KAAQgC,IAAI,CAAC,CAAD,CAAf,EAAoB;AAACG,UAAAA,SAAS,CAAC,CAAD,CAAT,GAAajD,CAAb;AAAe,SAApC,MACA,IAAGA,CAAC,CAACc,GAAF,KAAQgC,IAAI,CAAC,CAAD,CAAf,EAAoB;AAACG,UAAAA,SAAS,CAAC,CAAD,CAAT,GAAajD,CAAb;AAAe;AAC1C,OARD,EAtCqB,CAgDrB;AAEc;;AACd,YAAMkD,OAAO,GAAG7B,QAAQ,CAAC8B,MAAT,CAAgB,UAASC,CAAT,EAAYC,CAAZ,EAAc;AAC1C,YAAG,CAACD,CAAC,CAACC,CAAC,CAACnD,MAAH,CAAL,EAAgB;AACdkD,UAAAA,CAAC,CAACC,CAAC,CAACnD,MAAH,CAAD,GAAc,EAAC,GAAGmD,CAAJ;AAAOC,YAAAA,KAAK,EAAE;AAAd,WAAd;AACA,iBAAOF,CAAP;AACD;;AACDA,QAAAA,CAAC,CAACC,CAAC,CAACnD,MAAH,CAAD,CAAYC,SAAZ,IAAyBkD,CAAC,CAAClD,SAA3B;AACAiD,QAAAA,CAAC,CAACC,CAAC,CAACnD,MAAH,CAAD,CAAYoD,KAAZ,IAAqB,CAArB;AACA,eAAOF,CAAP;AACF,OARc,EAQb,EARa,CAAhB,CAnDqB,CA6DpB;;AACGG,MAAAA,MAAM,GAAGxB,MAAM,CAACC,IAAP,CAAYkB,OAAZ,EAAqBnC,GAArB,CAAyB,UAASkB,CAAT,EAAW;AAC5C,cAAMuB,IAAI,GAAIN,OAAO,CAACjB,CAAD,CAArB;AACA,eAAO;AACH/B,UAAAA,MAAM,EAAEsD,IAAI,CAACtD,MADV;AAEHC,UAAAA,SAAS,EAAE4C,IAAI,CAACC,KAAL,CAAWQ,IAAI,CAACrD,SAAL,GAAeqD,IAAI,CAACF,KAApB,GAA0B,GAArC,IAA0C,GAFlD;AAGHG,UAAAA,OAAO,EAACD,IAAI,CAACF;AAHV,SAAP;AAKH,OAPW,CAAT,CA9DiB,CAuEvB;;AAEE,WAAK1C,QAAL,CAAc;AAAC8C,QAAAA,IAAI,EAAChD,IAAN;AAAWR,QAAAA,MAAM,EAACS;AAAlB,OAAd;AAEA,UAAIgD,eAAe,GAAG,CAAC,OAAD,EAAU,CAAC,KAAD,EAAQ,YAAR,CAAV,CAAtB,CA3EqB,CA6ErB;;AACAtC,MAAAA,QAAQ,CAACuC,OAAT,CAAkB5D,CAAC,IAAI;AACvB,YAAGA,CAAC,CAACc,GAAF,GAAM4B,YAAN,GAAqB,CAAxB,EAA2B;AAACiB,UAAAA,eAAe,CAACzC,IAAhB,CAAqBlB,CAAC,CAAC,KAAD,CAAtB,EAA+B,SAA/B;AAA2C,SAAvE,MACK,IAAIA,CAAC,CAACc,GAAF,GAAM4B,YAAN,GAAqB,CAAzB,EAA4B;AAACiB,UAAAA,eAAe,CAACzC,IAAhB,CAAqBlB,CAAC,CAAC,KAAD,CAAtB,EAA+B,SAA/B;AAA2C,SAAxE,MACA,IAAIA,CAAC,CAACc,GAAF,GAAM4B,YAAN,GAAqB,CAAzB,EAA4B;AAACiB,UAAAA,eAAe,CAACzC,IAAhB,CAAqBlB,CAAC,CAAC,KAAD,CAAtB,EAA+B,SAA/B;AAA2C,SAAxE,MACA,IAAIA,CAAC,CAACc,GAAF,GAAM4B,YAAN,GAAqB,CAAzB,EAA4B;AAACiB,UAAAA,eAAe,CAACzC,IAAhB,CAAqBlB,CAAC,CAAC,KAAD,CAAtB,EAA+B,SAA/B;AAA2C,SAAxE,MACA,IAAIA,CAAC,CAACc,GAAF,GAAM4B,YAAN,GAAqB,EAAzB,EAA6B;AAACiB,UAAAA,eAAe,CAACzC,IAAhB,CAAqBlB,CAAC,CAAC,KAAD,CAAtB,EAA+B,SAA/B;AAA2C,SAAzE,MACA,IAAIA,CAAC,CAACc,GAAF,GAAM4B,YAAN,GAAqB,EAAzB,EAA6B;AAACiB,UAAAA,eAAe,CAACzC,IAAhB,CAAqBlB,CAAC,CAAC,KAAD,CAAtB,EAA+B,SAA/B;AAA2C,SAAzE,MACA,IAAIA,CAAC,CAACc,GAAF,GAAM4B,YAAN,GAAqB,GAAzB,EAA8B;AAACiB,UAAAA,eAAe,CAACzC,IAAhB,CAAqBlB,CAAC,CAAC,KAAD,CAAtB,EAA+B,SAA/B;AAA2C,SAA1E,MACA;AAAC2D,UAAAA,eAAe,CAACzC,IAAhB,CAAqBlB,CAAC,CAAC,KAAD,CAAtB,EAA+B,SAA/B;AAA2C;AAChD,OATD;AAWA2D,MAAAA,eAAe,CAACzC,IAAhB,CAAqB,KAAKF,KAAL,CAAWH,eAAhC,EAAiD,SAAjD,EAzFqB,CA0FrB;;AACA8C,MAAAA,eAAe,CAACzC,IAAhB,CAAqB,kBAArB,EA3FqB,CA6FrB;;AAEA,WAAK2C,MAAL,CAAY,SAAZ;AAEA,WAAK9C,GAAL,CAAS+C,QAAT,CAAkB;AAChBC,QAAAA,EAAE,EAAE,SADY;AAEhBC,QAAAA,MAAM,EAAC,qBAFS;AAGhBC,QAAAA,IAAI,EAAE,MAHU;AAIhBC,QAAAA,MAAM,EAAE,CAAE,OAAF,EAAW,CAAC,KAAD,EAAQ,YAAR,CAAX,EAAkC,CAAC,IAAD,EAAM,IAAN,EAAY,IAAZ,EAAkB,IAAlB,EAAwB,IAAxB,EAA8B,IAA9B,EAAoC,IAApC,EAAyC,IAAzC,CAAlC,EAAmF,KAAnF,EAA0F,IAA1F,CAJQ;AAKhB,wBAAe,oBALC;AAMhBC,QAAAA,KAAK,EAAE;AACL,wBAAcR,eADT;AAEL,0BAAgB;AAFX;AANS,OAAlB;AAWA,WAAK5C,GAAL,CAASqD,EAAT,CAAY,WAAZ,EAAyB,SAAzB,EAAoCpE,CAAC,IAAK;AACxC,YAAG,KAAKgB,KAAL,CAAWH,eAAX,KAA6Bb,CAAC,CAACqE,QAAF,CAAW,CAAX,EAAcC,UAAd,CAAyBC,UAAzD,EAAqE;AACrE,eAAKxD,GAAL,CAASyD,SAAT,GAAqBC,KAArB,CAA2BC,MAA3B,GAAoC,SAApC;AACA,cAAIC,WAAW,GAAG,CAAC3E,CAAC,CAAC4E,MAAF,CAASC,GAAV,EAAe7E,CAAC,CAAC4E,MAAF,CAASE,GAAxB,CAAlB;AACA,cAAIC,QAAQ,GAAC,EAAb;AACA,cAAIC,SAAS,GAAC,EAAd;AACA,cAAIC,QAAQ,GAAC,EAAb;AACA,cAAIC,eAAe,GAAC,EAApB;AACA,cAAIC,YAAY,GAACC,WAAW,CAACpF,CAAC,CAACqE,QAAF,CAAW,CAAX,EAAcC,UAAd,CAAyBpE,MAA1B,CAA5B;AAEAmB,UAAAA,QAAQ,CAACuC,OAAT,CAAkB,CAACP,CAAD,EAAGgC,CAAH,KAAS;AAC3B,gBAAGhC,CAAC,CAACjC,GAAF,KAAQpB,CAAC,CAACqE,QAAF,CAAW,CAAX,EAAcC,UAAd,CAAyBC,UAApC,EAAgD;AAC9CQ,cAAAA,QAAQ,GAAChC,IAAI,CAACC,KAAL,CAAWK,CAAC,CAACvC,GAAF,GAAM4B,YAAjB,CAAT;AACAsC,cAAAA,SAAS,GAACnC,YAAY,CAACwC,CAAD,CAAtB;;AAEA,kBAAGhC,CAAC,CAACvC,GAAF,GAAM4B,YAAN,GAAqB,CAAxB,EAA2B;AAACuC,gBAAAA,QAAQ,CAAC/D,IAAT,CAAc,SAAd;AAA0B,eAAtD,MACK,IAAImC,CAAC,CAACvC,GAAF,GAAM4B,YAAN,GAAqB,CAAzB,EAA4B;AAACuC,gBAAAA,QAAQ,CAAC/D,IAAT,CAAc,SAAd;AAA0B,eAAvD,MACA,IAAImC,CAAC,CAACvC,GAAF,GAAM4B,YAAN,GAAqB,CAAzB,EAA4B;AAACuC,gBAAAA,QAAQ,CAAC/D,IAAT,CAAc,SAAd;AAA0B,eAAvD,MACA,IAAImC,CAAC,CAACvC,GAAF,GAAM4B,YAAN,GAAqB,CAAzB,EAA4B;AAACuC,gBAAAA,QAAQ,CAAC/D,IAAT,CAAc,SAAd;AAA0B,eAAvD,MACA,IAAImC,CAAC,CAACvC,GAAF,GAAM4B,YAAN,GAAqB,EAAzB,EAA6B;AAACuC,gBAAAA,QAAQ,CAAC/D,IAAT,CAAc,SAAd;AAA0B,eAAxD,MACA,IAAImC,CAAC,CAACvC,GAAF,GAAM4B,YAAN,GAAqB,EAAzB,EAA6B;AAACuC,gBAAAA,QAAQ,CAAC/D,IAAT,CAAc,SAAd;AAA0B,eAAxD,MACA,IAAImC,CAAC,CAACvC,GAAF,GAAM4B,YAAN,GAAqB,GAAzB,EAA8B;AAACuC,gBAAAA,QAAQ,CAAC/D,IAAT,CAAc,SAAd;AAA0B,eAAzD,MACA;AAAC+D,gBAAAA,QAAQ,CAAC/D,IAAT,CAAc,SAAd;AAA0B;AACjC;AACA,WAdD;;AAgBF,cAAGY,qBAAqB,CAAC9B,CAAC,CAACqE,QAAF,CAAW,CAAX,EAAcC,UAAd,CAAyBpE,MAA1B,CAAxB,EAA2D;AACzD4B,YAAAA,qBAAqB,CAAC9B,CAAC,CAACqE,QAAF,CAAW,CAAX,EAAcC,UAAd,CAAyBpE,MAA1B,CAArB,CAAuDa,GAAvD,CACE,CAACsC,CAAD,EAAGgC,CAAH,KAAQrF,CAAC,CAACqE,QAAF,CAAW,CAAX,EAAcC,UAAd,CAAyBC,UAAzB,KAAsClB,CAAtC,GAAyC6B,eAAe,CAAChE,IAAhB,CAAqBM,iBAAiB,CAACxB,CAAC,CAACqE,QAAF,CAAW,CAAX,EAAcC,UAAd,CAAyBpE,MAA1B,CAAjB,CAAmDmF,CAAnD,CAArB,CAAzC,GAAuH,IADjI;AAEA;;AAGA,eAAKC,KAAL,CACGC,SADH,CACaZ,WADb,EAEGa,OAFH,CAGG,WAAUxF,CAAC,CAACqE,QAAF,CAAW,CAAX,EAAcC,UAAd,CAAyBmB,OAAQ,aAAYV,QAAS;0CACzCC,SAAU;8BACtBhF,CAAC,CAACqE,QAAF,CAAW,CAAX,EAAcC,UAAd,CAAyBpE,MAAO,kBAAiBgF,eAAgB,iBAAgBC,YAAa,SAL5G,EAOGO,KAPH,CAOS,KAAK3E,GAPd;AAQE,cAAI4E,SAAS,GAAG,KAAKL,KAAL,CAAWM,UAAX,EAAhB;AACAD,UAAAA,SAAS,CAAClB,KAAV,CAAgBoB,KAAhB,GAAwBZ,QAAQ,CAAC,CAAD,CAAhC;AACD,SAzCD,MAyCO;AAAC,eAAKK,KAAL,CAAWzB,MAAX;AAAoB;AAC5B,OA3CF;AA4CC,WAAKjD,QAAL,CAAc;AAACkF,QAAAA,QAAQ,EAAC;AAAV,OAAd;AACd,KAzVoB;;AAAA,SA2VrBjC,MA3VqB,GA2VZkC,GAAG,IAAI;AACZ,WAAKhF,GAAL,CAASiF,WAAT,CAAqBD,GAArB;AACH,KA7VoB;;AAAA,SA+VrBE,UA/VqB,GA+VRjG,CAAC,IAAI;AACZ,UAAGA,CAAH,EAAM;AACN,gBAAOA,CAAC,CAACkG,WAAT;AACA,eAAK,QAAL;AACA,iBAAKnF,GAAL,CAASoF,KAAT,CAAe;AAACC,cAAAA,MAAM,EAAE,CAAC,MAAD,EAAS,KAAT,CAAT;AAA0BC,cAAAA,IAAI,EAAC,IAA/B;AAAqCC,cAAAA,SAAS,EAAE;AAAhD,aAAf;AAAwE;;AACxE,eAAK,UAAL;AACA,iBAAKvF,GAAL,CAASoF,KAAT,CAAe;AAACC,cAAAA,MAAM,EAAE,CAAC,CAAC,MAAF,EAAU,MAAV,CAAT;AAA4BC,cAAAA,IAAI,EAAC,IAAjC;AAAuCC,cAAAA,SAAS,EAAE;AAAlD,aAAf;AAA0E;;AAC1E,eAAK,MAAL;AACA,iBAAKvF,GAAL,CAASoF,KAAT,CAAe;AAACC,cAAAA,MAAM,EAAE,CAAC,OAAD,EAAU,MAAV,CAAT;AAA4BC,cAAAA,IAAI,EAAC,IAAjC;AAAuCC,cAAAA,SAAS,EAAE;AAAlD,aAAf;AAA0E;;AAC1E,eAAK,QAAL;AACA,iBAAKvF,GAAL,CAASoF,KAAT,CAAe;AAACC,cAAAA,MAAM,EAAE,CAAC,MAAD,EAAS,MAAT,CAAT;AAA2BC,cAAAA,IAAI,EAAC,IAAhC;AAAsCC,cAAAA,SAAS,EAAE;AAAjD,aAAf;AAAyE;;AACzE,eAAK,SAAL;AACA,iBAAKvF,GAAL,CAASoF,KAAT,CAAe;AAACC,cAAAA,MAAM,EAAE,CAAC,OAAD,EAAU,CAAC,MAAX,CAAT;AAA6BC,cAAAA,IAAI,EAAC,IAAlC;AAAwCC,cAAAA,SAAS,EAAE;AAAnD,aAAf;AAA2E;;AAC3E;AACA,mBAAO,IAAP;AAZA;AAaQ;AACb,KA/WoB;;AAEjB,SAAKtF,KAAL,GAAa;AACX6D,MAAAA,GAAG,EAAE,EADM;AAEXC,MAAAA,GAAG,EAAE,EAFM;AAGXuB,MAAAA,IAAI,EAAE,CAHK;AAIXxF,MAAAA,eAAe,EAAE,IAJN;AAKX6C,MAAAA,IAAI,EAAE,EALK;AAMXxD,MAAAA,MAAM,EAAE,QANG;AAOXe,MAAAA,MAAM,EAAE,MAPG;AAQX6E,MAAAA,QAAQ,EAAE;AARC,KAAb;AAUD;;AAEHS,EAAAA,iBAAiB,GAAG;AACpB;AAEA,QAAIzF,GAAG,GAAC,EAAR;AACAtC,IAAAA,WAAW,CAACuC,GAAZ,CAAgBf,CAAC,IAAE,KAAKgB,KAAL,CAAWC,MAAX,KAAoB,MAApB,GAA4BH,GAAG,CAACI,IAAJ,CAAS;AAACC,MAAAA,KAAK,EAACnB,CAAC,CAACmB,KAAT;AAAeC,MAAAA,GAAG,EAACpB,CAAC,CAACoB,GAArB;AAAyBN,MAAAA,GAAG,EAACd,CAAC,CAACc;AAA/B,KAAT,CAA5B,GAA4EA,GAAG,CAACI,IAAJ,CAAS;AAACE,MAAAA,GAAG,EAACpB,CAAC,CAACmB,KAAP;AAAaA,MAAAA,KAAK,EAACnB,CAAC,CAACoB,GAArB;AAAyBN,MAAAA,GAAG,EAACd,CAAC,CAACc;AAA/B,KAAT,CAA/F;AAEA,QAAIO,QAAQ,GAAG,EAAf;AACA,QAAIC,OAAO,GAAE,EAAb;AACA,QAAIC,WAAW,GAAG,EAAlB;AACA,QAAIC,iBAAiB,GAAG;AAACC,MAAAA,MAAM,EAAC,EAAR;AAAWC,MAAAA,QAAQ,EAAC,EAApB;AAAuBC,MAAAA,IAAI,EAAC,EAA5B;AAA+BC,MAAAA,MAAM,EAAC,EAAtC;AAAyCC,MAAAA,OAAO,EAAC;AAAjD,KAAxB;AACA,QAAIC,qBAAqB,GAAG;AAACL,MAAAA,MAAM,EAAC,EAAR;AAAWC,MAAAA,QAAQ,EAAC,EAApB;AAAuBC,MAAAA,IAAI,EAAC,EAA5B;AAA+BC,MAAAA,MAAM,EAAC,EAAtC;AAAyCC,MAAAA,OAAO,EAAC;AAAjD,KAA5B;AACAf,IAAAA,GAAG,CAACC,GAAJ,CAAQf,CAAC,IAAIA,CAAC,CAACmB,KAAF,KAAU,KAAKH,KAAL,CAAWH,eAArB,GAAsCQ,QAAQ,CAACH,IAAT,CAAclB,CAAd,CAAtC,GAAyD,IAAtE;AACAqB,IAAAA,QAAQ,CAACN,GAAT,CAAaf,CAAC,IAAI;AAChBsB,MAAAA,OAAO,CAACJ,IAAR,CAAalB,CAAC,CAACc,GAAf;AACAS,MAAAA,WAAW,CAACL,IAAZ,CAAiBlB,CAAC,CAACc,GAAnB;AACAU,MAAAA,iBAAiB,CAAC/C,WAAW,CAACuB,CAAC,CAACoB,GAAH,CAAX,CAAmB,CAAnB,CAAD,CAAjB,CAAyCF,IAAzC,CAA8ClB,CAAC,CAACc,GAAhD;AACAgB,MAAAA,qBAAqB,CAACrD,WAAW,CAACuB,CAAC,CAACoB,GAAH,CAAX,CAAmB,CAAnB,CAAD,CAArB,CAA6CF,IAA7C,CAAkDlB,CAAC,CAACoB,GAApD;AACD,KALD;AAQAW,IAAAA,MAAM,CAACC,IAAP,CAAYR,iBAAZ,EAA+BT,GAA/B,CACEkB,CAAC,IAAI;AACH,UAAIC,MAAM,GAAGV,iBAAiB,CAACS,CAAD,CAAjB,CAAqBE,KAArB,GAA6BC,IAA7B,CAAkC,CAACC,CAAD,EAAGC,CAAH,KAASA,CAAC,GAACD,CAA7C,CAAb;AACA,UAAIE,WAAW,GAACf,iBAAiB,CAACS,CAAD,CAAjB,CAAqBlB,GAArB,CAAyByB,CAAC,IAAIN,MAAM,CAACO,OAAP,CAAeD,CAAf,IAAkB,CAAhD,CAAhB;AACAhB,MAAAA,iBAAiB,CAACS,CAAD,CAAjB,GAAqBM,WAArB;AACD,KALH;AAQK,SAAK+C,KAAL,GAAa,IAAI/G,QAAQ,CAACiI,KAAb,CAAmB;AACvBC,MAAAA,WAAW,EAAE,KADU;AAEvBC,MAAAA,YAAY,EAAE;AAFS,KAAnB,CAAb;AAKA,SAAK3F,GAAL,GAAW,IAAIxC,QAAQ,CAACoI,GAAb,CAAiB;AAC3BC,MAAAA,SAAS,EAAE,KAAKC,YADW;AAE3BpC,MAAAA,KAAK,EAAE,gDAFoB;AAE8B;AACzD2B,MAAAA,MAAM,EAAE,CAAC,KAAKpF,KAAL,CAAW6D,GAAZ,EAAiB,KAAK7D,KAAL,CAAW8D,GAA5B,CAHmB;AAI3BuB,MAAAA,IAAI,EAAE,KAAKrF,KAAL,CAAWqF,IAJU;AAK3BS,MAAAA,kBAAkB,EAAE;AALO,KAAjB,CAAX;AAOa,QAAIhE,IAAI,GAACxB,OAAO,CAACc,IAAR,CAAa,CAACC,CAAD,EAAGC,CAAH,KAASA,CAAC,GAACD,CAAxB,EAA2BF,KAA3B,CAAiC,CAAjC,EAAmC,CAAnC,CAAT;AACA,QAAIS,SAAS,GAACtB,OAAO,CAACc,IAAR,CAAa,CAACC,CAAD,EAAGC,CAAH,KAASA,CAAC,GAACD,CAAxB,CAAd;AACA,QAAIQ,YAAY,GAACtB,WAAW,CAACR,GAAZ,CAAgByB,CAAC,IAAII,SAAS,CAACH,OAAV,CAAkBD,CAAlB,IAAqB,CAA1C,CAAjB;AAEA,QAAIE,YAAY,GAAGC,QAAQ,CAACrB,OAAD,EAAU,GAAV,CAA3B;AACAD,IAAAA,QAAQ,CAACN,GAAT,CAAaf,CAAC,IAAI;AAChBA,MAAAA,CAAC,CAACE,MAAF,GAASzB,WAAW,CAACuB,CAAC,CAACoB,GAAH,CAAX,CAAmB,CAAnB,CAAT;AACApB,MAAAA,CAAC,CAACG,SAAF,GAAa4C,IAAI,CAACC,KAAL,CAAWhD,CAAC,CAACc,GAAF,GAAM4B,YAAjB,CAAb;;AACA,UAAG1C,CAAC,CAACc,GAAF,KAAQgC,IAAI,CAAC,CAAD,CAAf,EAAoB;AAACG,QAAAA,SAAS,CAAC,CAAD,CAAT,GAAajD,CAAb;AAAe,OAApC,MACK,IAAGA,CAAC,CAACc,GAAF,KAAQgC,IAAI,CAAC,CAAD,CAAf,EAAoB;AAACG,QAAAA,SAAS,CAAC,CAAD,CAAT,GAAajD,CAAb;AAAe,OAApC,MACA,IAAGA,CAAC,CAACc,GAAF,KAAQgC,IAAI,CAAC,CAAD,CAAf,EAAoB;AAACG,QAAAA,SAAS,CAAC,CAAD,CAAT,GAAajD,CAAb;AAAe,OAApC,MACA,IAAGA,CAAC,CAACc,GAAF,KAAQgC,IAAI,CAAC,CAAD,CAAf,EAAoB;AAACG,QAAAA,SAAS,CAAC,CAAD,CAAT,GAAajD,CAAb;AAAe,OAApC,MACA,IAAGA,CAAC,CAACc,GAAF,KAAQgC,IAAI,CAAC,CAAD,CAAf,EAAoB;AAACG,QAAAA,SAAS,CAAC,CAAD,CAAT,GAAajD,CAAb;AAAe;AAC1C,KARD,EA7CE,CAsDY;;AACd,UAAMkD,OAAO,GAAG7B,QAAQ,CAAC8B,MAAT,CAAgB,UAASC,CAAT,EAAYC,CAAZ,EAAc;AAC1C,UAAG,CAACD,CAAC,CAACC,CAAC,CAACnD,MAAH,CAAL,EAAgB;AACdkD,QAAAA,CAAC,CAACC,CAAC,CAACnD,MAAH,CAAD,GAAc,EAAC,GAAGmD,CAAJ;AAAOC,UAAAA,KAAK,EAAE;AAAd,SAAd;AACA,eAAOF,CAAP;AACD;;AACDA,MAAAA,CAAC,CAACC,CAAC,CAACnD,MAAH,CAAD,CAAYC,SAAZ,IAAyBkD,CAAC,CAAClD,SAA3B;AACAiD,MAAAA,CAAC,CAACC,CAAC,CAACnD,MAAH,CAAD,CAAYoD,KAAZ,IAAqB,CAArB;AACA,aAAOF,CAAP;AACF,KARc,EAQb,EARa,CAAhB,CAvDE,CAiED;;AACGG,IAAAA,MAAM,GAAGxB,MAAM,CAACC,IAAP,CAAYkB,OAAZ,EAAqBnC,GAArB,CAAyB,UAASkB,CAAT,EAAW;AAC5C,YAAMuB,IAAI,GAAIN,OAAO,CAACjB,CAAD,CAArB;AACA,aAAO;AACH/B,QAAAA,MAAM,EAAEsD,IAAI,CAACtD,MADV;AAEHC,QAAAA,SAAS,EAAE4C,IAAI,CAACC,KAAL,CAAWQ,IAAI,CAACrD,SAAL,GAAeqD,IAAI,CAACF,KAApB,GAA0B,GAArC,IAA0C;AAFlD,OAAP;AAIH,KANW,CAAT;AAQH,QAAIK,eAAe,GAAG,CAAC,OAAD,EAAU,CAAC,KAAD,EAAQ,YAAR,CAAV,CAAtB,CA1EC,CA4ED;;AACAtC,IAAAA,QAAQ,CAACuC,OAAT,CAAkB5D,CAAC,IAAI;AACvB,UAAGA,CAAC,CAACc,GAAF,GAAM4B,YAAN,GAAqB,CAAxB,EAA2B;AAACiB,QAAAA,eAAe,CAACzC,IAAhB,CAAqBlB,CAAC,CAAC,KAAD,CAAtB,EAA+B,SAA/B;AAA2C,OAAvE,MACK,IAAIA,CAAC,CAACc,GAAF,GAAM4B,YAAN,GAAqB,CAAzB,EAA4B;AAACiB,QAAAA,eAAe,CAACzC,IAAhB,CAAqBlB,CAAC,CAAC,KAAD,CAAtB,EAA+B,SAA/B;AAA2C,OAAxE,MACA,IAAIA,CAAC,CAACc,GAAF,GAAM4B,YAAN,GAAqB,CAAzB,EAA4B;AAACiB,QAAAA,eAAe,CAACzC,IAAhB,CAAqBlB,CAAC,CAAC,KAAD,CAAtB,EAA+B,SAA/B;AAA2C,OAAxE,MACA,IAAIA,CAAC,CAACc,GAAF,GAAM4B,YAAN,GAAqB,CAAzB,EAA4B;AAACiB,QAAAA,eAAe,CAACzC,IAAhB,CAAqBlB,CAAC,CAAC,KAAD,CAAtB,EAA+B,SAA/B;AAA2C,OAAxE,MACA,IAAIA,CAAC,CAACc,GAAF,GAAM4B,YAAN,GAAqB,EAAzB,EAA6B;AAACiB,QAAAA,eAAe,CAACzC,IAAhB,CAAqBlB,CAAC,CAAC,KAAD,CAAtB,EAA+B,SAA/B;AAA2C,OAAzE,MACA,IAAIA,CAAC,CAACc,GAAF,GAAM4B,YAAN,GAAqB,EAAzB,EAA6B;AAACiB,QAAAA,eAAe,CAACzC,IAAhB,CAAqBlB,CAAC,CAAC,KAAD,CAAtB,EAA+B,SAA/B;AAA2C,OAAzE,MACA,IAAIA,CAAC,CAACc,GAAF,GAAM4B,YAAN,GAAqB,GAAzB,EAA8B;AAACiB,QAAAA,eAAe,CAACzC,IAAhB,CAAqBlB,CAAC,CAAC,KAAD,CAAtB,EAA+B,SAA/B;AAA2C,OAA1E,MACA;AAAC2D,QAAAA,eAAe,CAACzC,IAAhB,CAAqBlB,CAAC,CAAC,KAAD,CAAtB,EAA+B,SAA/B;AAA2C;AAChD,KATD;AAWA2D,IAAAA,eAAe,CAACzC,IAAhB,CAAqB,KAAKF,KAAL,CAAWH,eAAhC,EAAiD,SAAjD,EAxFC,CAyFD;;AACA8C,IAAAA,eAAe,CAACzC,IAAhB,CAAqB,kBAArB,EA1FC,CA2FD;;AAEI,SAAKH,GAAL,CAASqD,EAAT,CAAY,MAAZ,EAAoB,MAAM;AAExB,WAAKrD,GAAL,CAASgG,UAAT,CAAoB,IAAIxI,QAAQ,CAACyI,kBAAb,CAAgC;AAACC,QAAAA,iBAAiB,EAAE;AAApB,OAAhC,CAApB,EAFwB,CAG9B;;AACM,WAAKlG,GAAL,CAASmG,SAAT,CAAmB,qBAAnB,EAA0C;AAAEjD,QAAAA,IAAI,EAAE,QAAR;AAAkBkD,QAAAA,GAAG,EAAE;AAAvB,OAA1C,EAJwB,CAM9B;;AACM,WAAKpG,GAAL,CAAS+C,QAAT,CAAkB;AAChBC,QAAAA,EAAE,EAAE,SADY;AAEhBC,QAAAA,MAAM,EAAC,qBAFS;AAGhBC,QAAAA,IAAI,EAAE,MAHU;AAIhB,wBAAe,oBAJC;AAKhBC,QAAAA,MAAM,EAAE,CAAE,OAAF,EAAW,CAAC,KAAD,EAAQ,YAAR,CAAX,EAAkC,CAAC,IAAD,EAAM,IAAN,EAAW,IAAX,EAAiB,IAAjB,EAAuB,IAAvB,EAA6B,IAA7B,EAAmC,IAAnC,EAAyC,IAAzC,CAAlC,EAAmF,KAAnF,EAA0F,IAA1F,CALQ;AAMhBC,QAAAA,KAAK,EAAE;AACL,wBAAcR,eADT;AAEL,0BAAgB;AAFX;AANS,OAAlB;AAYE,WAAK5C,GAAL,CAASqD,EAAT,CAAY,OAAZ,EAAqB,SAArB,EAAgCpE,CAAC,IAAK;AACnC,aAAKsF,KAAL,CAAWzB,MAAX;AACA,aAAKrD,QAAL,CAAcR,CAAC,CAACqE,QAAF,CAAW,CAAX,EAAcC,UAAd,CAAyBC,UAAvC,EAAkDvE,CAAC,CAACqE,QAAF,CAAW,CAAX,EAAcC,UAAd,CAAyBmB,OAA3E,EAAmFzF,CAAC,CAACqE,QAAF,CAAW,CAAX,EAAcC,UAAd,CAAyBpE,MAA5G;AACE,OAHL;AAKA,WAAKa,GAAL,CAASqD,EAAT,CAAY,WAAZ,EAAyB,SAAzB,EAAoCpE,CAAC,IAAK;AACvC,YAAG,KAAKgB,KAAL,CAAWH,eAAX,KAA6Bb,CAAC,CAACqE,QAAF,CAAW,CAAX,EAAcC,UAAd,CAAyBC,UAAzD,EAAqE;AACrE,eAAKxD,GAAL,CAASyD,SAAT,GAAqBC,KAArB,CAA2BC,MAA3B,GAAoC,SAApC;AACA,cAAIC,WAAW,GAAG,CAAC3E,CAAC,CAAC4E,MAAF,CAASC,GAAV,EAAe7E,CAAC,CAAC4E,MAAF,CAASE,GAAxB,CAAlB;AACA,cAAIC,QAAQ,GAAC,EAAb;AACA,cAAIC,SAAS,GAAC,EAAd;AACA,cAAIC,QAAQ,GAAC,EAAb;AACA,cAAIC,eAAe,GAAC,EAApB;AACA,cAAIC,YAAY,GAACC,WAAW,CAACpF,CAAC,CAACqE,QAAF,CAAW,CAAX,EAAcC,UAAd,CAAyBpE,MAA1B,CAA5B;AAEAmB,UAAAA,QAAQ,CAACuC,OAAT,CAAkB,CAACP,CAAD,EAAGgC,CAAH,KAAS;AAC3B,gBAAGhC,CAAC,CAACjC,GAAF,KAAQpB,CAAC,CAACqE,QAAF,CAAW,CAAX,EAAcC,UAAd,CAAyBC,UAApC,EAAgD;AAC9CQ,cAAAA,QAAQ,GAAChC,IAAI,CAACC,KAAL,CAAWK,CAAC,CAACvC,GAAF,GAAM4B,YAAjB,CAAT;AACAsC,cAAAA,SAAS,GAACnC,YAAY,CAACwC,CAAD,CAAtB;;AAEA,kBAAGhC,CAAC,CAACvC,GAAF,GAAM4B,YAAN,GAAqB,CAAxB,EAA2B;AAACuC,gBAAAA,QAAQ,CAAC/D,IAAT,CAAc,SAAd;AAA0B,eAAtD,MACK,IAAImC,CAAC,CAACvC,GAAF,GAAM4B,YAAN,GAAqB,CAAzB,EAA4B;AAACuC,gBAAAA,QAAQ,CAAC/D,IAAT,CAAc,SAAd;AAA0B,eAAvD,MACA,IAAImC,CAAC,CAACvC,GAAF,GAAM4B,YAAN,GAAqB,CAAzB,EAA4B;AAACuC,gBAAAA,QAAQ,CAAC/D,IAAT,CAAc,SAAd;AAA0B,eAAvD,MACA,IAAImC,CAAC,CAACvC,GAAF,GAAM4B,YAAN,GAAqB,CAAzB,EAA4B;AAACuC,gBAAAA,QAAQ,CAAC/D,IAAT,CAAc,SAAd;AAA0B,eAAvD,MACA,IAAImC,CAAC,CAACvC,GAAF,GAAM4B,YAAN,GAAqB,EAAzB,EAA6B;AAACuC,gBAAAA,QAAQ,CAAC/D,IAAT,CAAc,SAAd;AAA0B,eAAxD,MACA,IAAImC,CAAC,CAACvC,GAAF,GAAM4B,YAAN,GAAqB,EAAzB,EAA6B;AAACuC,gBAAAA,QAAQ,CAAC/D,IAAT,CAAc,SAAd;AAA0B,eAAxD,MACA,IAAImC,CAAC,CAACvC,GAAF,GAAM4B,YAAN,GAAqB,GAAzB,EAA8B;AAACuC,gBAAAA,QAAQ,CAAC/D,IAAT,CAAc,SAAd;AAA0B,eAAzD,MACA;AAAC+D,gBAAAA,QAAQ,CAAC/D,IAAT,CAAc,SAAd;AAA0B;AACjC;AACA,WAdD;;AAgBF,cAAGY,qBAAqB,CAAC9B,CAAC,CAACqE,QAAF,CAAW,CAAX,EAAcC,UAAd,CAAyBpE,MAA1B,CAAxB,EAA2D;AACzD4B,YAAAA,qBAAqB,CAAC9B,CAAC,CAACqE,QAAF,CAAW,CAAX,EAAcC,UAAd,CAAyBpE,MAA1B,CAArB,CAAuDa,GAAvD,CACE,CAACsC,CAAD,EAAGgC,CAAH,KAAQrF,CAAC,CAACqE,QAAF,CAAW,CAAX,EAAcC,UAAd,CAAyBC,UAAzB,KAAsClB,CAAtC,GAAyC6B,eAAe,CAAChE,IAAhB,CAAqBM,iBAAiB,CAACxB,CAAC,CAACqE,QAAF,CAAW,CAAX,EAAcC,UAAd,CAAyBpE,MAA1B,CAAjB,CAAmDmF,CAAnD,CAArB,CAAzC,GAAuH,IADjI;AAEA;;AAGF,eAAKC,KAAL,CACKC,SADL,CACeZ,WADf,EAEEa,OAFF,CAGK,WAAUxF,CAAC,CAACqE,QAAF,CAAW,CAAX,EAAcC,UAAd,CAAyBmB,OAAQ,aAAYV,QAAS;wDACzCC,SAAU;4CACtBhF,CAAC,CAACqE,QAAF,CAAW,CAAX,EAAcC,UAAd,CAAyBpE,MAAO,kBAAiBgF,eAAgB,iBAAgBC,YAAa,SAL9G,EAOEO,KAPF,CAOQ,KAAK3E,GAPb;AAQI,cAAI4E,SAAS,GAAG,KAAKL,KAAL,CAAWM,UAAX,EAAhB;AACAD,UAAAA,SAAS,CAAClB,KAAV,CAAgBoB,KAAhB,GAAwBZ,QAAQ,CAAC,CAAD,CAAhC;AACD,SAzCD,MAyCO;AAAC,eAAKK,KAAL,CAAWzB,MAAX;AAAoB;AAC7B,OA3CF;AA6CC,WAAK9C,GAAL,CAASqD,EAAT,CAAY,YAAZ,EAA0B,SAA1B,EAAqCpE,CAAC,IAAK;AACzC,aAAKe,GAAL,CAASyD,SAAT,GAAqBC,KAArB,CAA2BC,MAA3B,GAAoC,EAApC;AACA,aAAKY,KAAL,CAAWzB,MAAX;AACD,OAHD;AAKJ,KA1ED;AA4EA,SAAKjD,QAAL,CAAc;AAAC8C,MAAAA,IAAI,EAAE;AAAP,KAAd;AAEtB;;AAED0D,EAAAA,kBAAkB,CAACC,SAAD,EAAYC,SAAZ,EAAsB;AACtC,QAAGA,SAAS,CAACrG,MAAV,KAAqB,KAAKD,KAAL,CAAWC,MAAnC,EACA;AAAC,WAAKT,QAAL,CAAc,KAAKQ,KAAL,CAAWH,eAAzB,EAA0C,KAAKG,KAAL,CAAW0C,IAArD,EAA2D,KAAK1C,KAAL,CAAWd,MAAtE;AAA8E;AAChF;;AAqLD;AACAqH,EAAAA,MAAM,GAAG;AACL,wBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAE7I,OAAO,CAAC8I,OAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAAkC;AAAK,MAAA,SAAS,EAAE9I,OAAO,CAAC+I,WAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAAsC;AAAK,MAAA,SAAS,EAAE/I,OAAO,CAACgJ,aAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAtC,eAEhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAAa,KAAK1G,KAAL,CAAW0C,IAAxB,CAFgC,CAAlC,eAEiD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFjD,eAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oCAHA,eAIA;AAAO,MAAA,SAAS,EAAEhF,OAAO,CAACiJ,KAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADF,eACkB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADlB,eAC8B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAD9B,CADF,CADJ,eAMI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBANJ,CAJA,eAcA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAdA,oBAcM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAdN,eAeM;AAAK,MAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,YAAD;AAAc,MAAA,IAAI,EAAC,MAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,eAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iDAAN,eAA8D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAA9D,iKAC8I;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAD9I,eACmJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADnJ,eAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAFA,eAE4B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAF5B,0mBAGulB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHvlB,eAG4lB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAH5lB,kUAKF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MALE,eAKG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MALH,eAKQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gGALR,MAFJ,CAfN,eAwBM;AAAK,MAAA,SAAS,EAAC,IAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACA;AAAG,MAAA,IAAI,EAAC,iKAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,YAAD;AAAc,MAAA,IAAI,EAAC,UAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,eAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uFAFJ,CADA,CAxBN,CADF,eAgCE;AAAK,MAAA,GAAG,EAAEC,EAAE,IAAI,KAAKf,YAAL,GAAoBe,EAApC;AAAwC,MAAA,SAAS,EAAElJ,OAAO,CAACmI,YAA3D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAhCF,CADF;AAoCD;;AA1ZuC;;AA4Z1CvI,QAAQ,CAACiJ,MAAT,eAAgB,oBAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAAhB,EAAiCM,QAAQ,CAACC,cAAT,CAAwB,KAAxB,CAAjC","sourcesContent":["import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport mapboxgl from 'mapbox-gl';\r\nimport sciOriginal from './sci.json';\r\nimport countryData from './country.json';\r\nimport classes from './Site.module.css';\r\nimport { BarChart, Cell, Bar, Tooltip, XAxis,ResponsiveContainer} from 'recharts';\r\nimport ReactGA from 'react-ga';\r\nimport './index.css';\r\nimport logo from './OECD_white_EN.png';\r\nimport MaterialIcon from 'material-icons-react';\r\nimport ForceGraph2D from 'react-force-graph';\r\n\r\n\r\nReactGA.initialize('UA-128268752-1');\r\nReactGA.pageview(window.location.search+window.location.pathname);\r\n\r\n//iso_3166_1_alpha_3\r\n\r\n//// Access token for Africapolis mapbox account\r\nmapboxgl.accessToken = 'pk.eyJ1IjoibWttZCIsImEiOiJjajBqYjJpY2owMDE0Mndsbml0d2V1ZXczIn0.el8wQmA-TSJp2ggX8fJ1rA';\r\n\r\n\r\nconst colors = [\"#F3F2E8\",\"#D4EBE2\",\"#B6E3DB\",\"#97DCD5\",\"#79D5CF\",\"#5ACEC9\",\"#3CC6C2\",\"#1DBFBC\",\"#333333\"]\r\n\r\n\r\n\r\n//////////////////\r\n\r\n// sort array ascending\r\n\r\nconst legend = (\r\n<div>\r\n  <h4>Social Connectedness</h4>\r\n<div><span style={{backgroundColor: colors[0]}}></span>{\"< 1x\"} <small>{\"(20th percentile)\"}</small></div>\r\n<div><span style={{backgroundColor: colors[1]}}></span>1-2x</div>\r\n<div><span style={{backgroundColor: colors[2]}}></span>2-3x</div>\r\n<div><span style={{backgroundColor: colors[3]}}></span>3-5x</div>\r\n<div><span style={{backgroundColor: colors[4]}}></span>5-10x</div>\r\n<div><span style={{backgroundColor: colors[5]}}></span>10-25x</div>\r\n<div><span style={{backgroundColor: colors[6]}}></span>25-100x</div>\r\n<div><span style={{backgroundColor: colors[7]}}></span>{\">= 100x\"}</div>\r\n<div><span style={{backgroundColor: colors[8]}}></span>{\"Data not available\"}</div>\r\n</div>\r\n);\r\n\r\nconst tooltip = e => {\r\n  if (e.payload[0]) {\r\n  return ( <div className={classes.tooltip}> {e.payload[0].payload.region} <br/>SCI {e.payload[0].payload.sciScaled}x</div> ) }\r\n}\r\n\r\n\r\n//// Basic setting of the map\r\nclass Application extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      lng: 40,\r\n      lat: 30,\r\n      zoom: 2,\r\n      selectedCountry: \"NG\",\r\n      name: \"\",\r\n      region: \"Africa\",\r\n      button: \"From\",\r\n      rendered: \"\"\r\n    };\r\n  }\r\n\r\ncomponentDidMount() {\r\n//// Initial map setting\r\n\r\nlet sci=[];\r\nsciOriginal.map(e=>this.state.button===\"From\"? sci.push({start:e.start,end:e.end,sci:e.sci}) : sci.push({end:e.start,start:e.end,sci:e.sci}))\r\n\r\nlet selected = [];\r\nlet scidata= [];\r\nlet scidataRank = [];\r\nlet scidataRankRegion = {Africa:[],Americas:[],Asia:[],Europe:[],Oceania:[]}\r\nlet scidataRankRegionCode = {Africa:[],Americas:[],Asia:[],Europe:[],Oceania:[]}\r\nsci.map(e => e.start===this.state.selectedCountry? selected.push(e) : null)\r\nselected.map(e => {\r\n  scidata.push(e.sci)\r\n  scidataRank.push(e.sci)\r\n  scidataRankRegion[countryData[e.end][1]].push(e.sci)\r\n  scidataRankRegionCode[countryData[e.end][1]].push(e.end)\r\n})\r\n\r\n\r\nObject.keys(scidataRankRegion).map(\r\n  k => {\r\n    let sorted = scidataRankRegion[k].slice().sort((a,b) => b-a);\r\n    let rank_region=scidataRankRegion[k].map(v => sorted.indexOf(v)+1);\r\n    scidataRankRegion[k]=rank_region\r\n  }\r\n )\r\n\r\n     this.popUp = new mapboxgl.Popup({\r\n              closeButton: false,\r\n              closeOnClick: false\r\n          });\r\n\r\n     this.map = new mapboxgl.Map({\r\n      container: this.mapContainer,\r\n      style: 'mapbox://styles/mkmd/ckguwdhux0j7719p9rz2hpmpi', /// Select mapstyle from mapbox studio\r\n      center: [this.state.lng, this.state.lat],\r\n      zoom: this.state.zoom,\r\n      attributionControl: false\r\n    });\r\n                  let top5=scidata.sort((a,b) => b-a).slice(0,5);\r\n                  let sortedSCI=scidata.sort((a,b) => b-a);\r\n                  let rank_country=scidataRank.map(v => sortedSCI.indexOf(v)+1 );\r\n\r\n                  let percentile20 = quantile(scidata, .20)\r\n                  selected.map(e => {\r\n                    e.region=countryData[e.end][1]\r\n                    e.sciScaled= Math.round(e.sci/percentile20)\r\n                    if(e.sci===top5[0]) {top5_list[0]=e}\r\n                    else if(e.sci===top5[1]) {top5_list[1]=e}\r\n                    else if(e.sci===top5[2]) {top5_list[2]=e}\r\n                    else if(e.sci===top5[3]) {top5_list[3]=e}\r\n                    else if(e.sci===top5[4]) {top5_list[4]=e}\r\n                  })\r\n                                // Calculate the sums and group data (while tracking count)\r\n                  const reduced = selected.reduce(function(m, d){\r\n                      if(!m[d.region]){\r\n                        m[d.region] = {...d, count: 1};\r\n                        return m;\r\n                      }\r\n                      m[d.region].sciScaled += d.sciScaled;\r\n                      m[d.region].count += 1;\r\n                      return m;\r\n                   },{});\r\n\r\n                   // Create new array from grouped data and compute the average\r\n                      result = Object.keys(reduced).map(function(k){\r\n                       const item  = reduced[k];\r\n                       return {\r\n                           region: item.region,\r\n                           sciScaled: Math.round(item.sciScaled/item.count*100)/100,\r\n                       }\r\n                   })\r\n\r\n                   let matchExpression = ['match', ['get', 'iso_3166_1']];\r\n\r\n                   // Calculate color values for each country based on 'hdi' value\r\n                   selected.forEach( e => {\r\n                   if(e.sci/percentile20 < 1) {matchExpression.push(e['end'], \"#F3F2E8\");}\r\n                   else if (e.sci/percentile20 < 2) {matchExpression.push(e['end'], \"#D4EBE2\");}\r\n                   else if (e.sci/percentile20 < 3) {matchExpression.push(e['end'], \"#B6E3DB\");}\r\n                   else if (e.sci/percentile20 < 5) {matchExpression.push(e['end'], \"#97DCD5\");}\r\n                   else if (e.sci/percentile20 < 10) {matchExpression.push(e['end'], \"#79D5CF\");}\r\n                   else if (e.sci/percentile20 < 25) {matchExpression.push(e['end'], \"#5ACEC9\");}\r\n                   else if (e.sci/percentile20 < 100) {matchExpression.push(e['end'], \"#3CC6C2\");}\r\n                   else {matchExpression.push(e['end'], \"#1DBFBC\");}\r\n                   });\r\n\r\n                   matchExpression.push(this.state.selectedCountry, '#e8ae40');\r\n                   // Last value is the default, used where there is no data\r\n                   matchExpression.push('rgba(0, 0, 0, 0)');\r\n                   // //console.log(this.state.selectedOption, prevState.selectedOption);\r\n\r\n                       this.map.on('load', () => {\r\n\r\n                         this.map.addControl(new mapboxgl.AttributionControl({customAttribution: \"Africapolis\"}));\r\n                   // Add Country shape\r\n                         this.map.addSource('africapolis_country', { type: 'vector', url: 'mapbox://mapbox.country-boundaries-v1'});\r\n\r\n                   // Add Country layer\r\n                         this.map.addLayer({\r\n                           id: 'country',\r\n                           source:'africapolis_country',\r\n                           type: 'fill',\r\n                           'source-layer':'country_boundaries',\r\n                           filter: [ \"match\", [\"get\", \"iso_3166_1\"], [\"TJ\",\"IR\",\"CN\", \"GL\", \"SJ\", \"TM\", \"EH\", \"KP\" ], false, true ],\r\n                           paint: {\r\n                             'fill-color': matchExpression,\r\n                             'fill-opacity': 0.9\r\n                           }\r\n                         });\r\n\r\n                           this.map.on('click', 'country', e =>  {\r\n                              this.popUp.remove()\r\n                              this.onUpdate(e.features[0].properties.iso_3166_1,e.features[0].properties.name_en,e.features[0].properties.region)\r\n                               });\r\n\r\n                           this.map.on('mousemove', 'country', e =>  {\r\n                              if(this.state.selectedCountry!==e.features[0].properties.iso_3166_1) {\r\n                              this.map.getCanvas().style.cursor = 'pointer';\r\n                              let coordinates = [e.lngLat.lng, e.lngLat.lat];\r\n                              let sciPopup=[];\r\n                              let rankPopup=[];\r\n                              let sciColor=[];\r\n                              let rankPopupRegion=[];\r\n                              let regionNumber=regionTotal[e.features[0].properties.region];\r\n\r\n                              selected.forEach( (d,i) => {\r\n                              if(d.end===e.features[0].properties.iso_3166_1) {\r\n                                sciPopup=Math.round(d.sci/percentile20)\r\n                                rankPopup=rank_country[i]\r\n\r\n                                if(d.sci/percentile20 < 1) {sciColor.push(\"#F3F2E8\");}\r\n                                else if (d.sci/percentile20 < 2) {sciColor.push(\"#D4EBE2\");}\r\n                                else if (d.sci/percentile20 < 3) {sciColor.push(\"#B6E3DB\");}\r\n                                else if (d.sci/percentile20 < 5) {sciColor.push(\"#97DCD5\");}\r\n                                else if (d.sci/percentile20 < 10) {sciColor.push(\"#79D5CF\");}\r\n                                else if (d.sci/percentile20 < 25) {sciColor.push(\"#5ACEC9\");}\r\n                                else if (d.sci/percentile20 < 100) {sciColor.push(\"#3CC6C2\");}\r\n                                else {sciColor.push(\"#1DBFBC\");}\r\n                              }\r\n                              });\r\n\r\n                            if(scidataRankRegionCode[e.features[0].properties.region]) {\r\n                              scidataRankRegionCode[e.features[0].properties.region].map(\r\n                                (d,i)=> e.features[0].properties.iso_3166_1===d? rankPopupRegion.push(scidataRankRegion[e.features[0].properties.region][i]) : null\r\n                            )}\r\n\r\n\r\n                          \t\tthis.popUp\r\n                                .setLngLat(coordinates)\r\n                          \t\t\t.setHTML(\r\n                                `<strong>${e.features[0].properties.name_en}</strong> ${sciPopup}<little>x</little><br/>\r\n                              <span>Rank:</span><bold>${rankPopup}</bold><span>/194</span><br/>\r\n                                <small>In ${e.features[0].properties.region}:</small><bold>${rankPopupRegion}</bold><span>/${regionNumber}</span>`\r\n                                )\r\n                          \t\t\t.addTo(this.map);\r\n                                var popupElem = this.popUp.getElement();\r\n                                popupElem.style.color = sciColor[0];\r\n                              } else {this.popUp.remove()}\r\n                            });\r\n\r\n                            this.map.on('mouseleave', 'country', e =>  {\r\n                              this.map.getCanvas().style.cursor = ''\r\n                              this.popUp.remove()\r\n                            });\r\n\r\n                       });\r\n\r\n                       this.setState({name: \"Nigeria\"})\r\n\r\n}\r\n\r\ncomponentDidUpdate(prevProps, prevState){\r\n  if(prevState.button !== this.state.button)\r\n  {this.onUpdate(this.state.selectedCountry, this.state.name, this.state.region)}\r\n}\r\n\r\nonUpdate = (ISO2, Name, Region) => {\r\n\r\n              this.setState({selectedCountry:ISO2})\r\n\r\n              let sci=[];\r\n              sciOriginal.map(e=>this.state.button===\"From\"? sci.push({start:e.start,end:e.end,sci:e.sci}) : sci.push({end:e.start,start:e.end,sci:e.sci}))\r\n\r\n\r\n              let selected = [];\r\n              let scidata= [];\r\n              let scidataRank = [];\r\n              let scidataRankRegion = {Africa:[],Americas:[],Asia:[],Europe:[],Oceania:[]}\r\n              let scidataRankRegionCode = {Africa:[],Americas:[],Asia:[],Europe:[],Oceania:[]}\r\n              sci.map(e => e.start===this.state.selectedCountry? selected.push(e) : null)\r\n              selected.map(e => {\r\n                scidata.push(e.sci)\r\n                scidataRank.push(e.sci)\r\n                scidataRankRegion[countryData[e.end][1]].push(e.sci)\r\n                scidataRankRegionCode[countryData[e.end][1]].push(e.end)\r\n\r\n              })\r\n\r\n\r\n              Object.keys(scidataRankRegion).map(\r\n                k => {\r\n                  let sorted = scidataRankRegion[k].slice().sort((a,b) => b-a);\r\n                  let rank_region=scidataRankRegion[k].map(v => sorted.indexOf(v)+1);\r\n                  scidataRankRegion[k]=rank_region\r\n                }\r\n               )\r\n\r\n\r\n              let percentile20 = quantile(scidata, .20)\r\n              //selected.map(e => e.sci = e.sci/ percentile20)\r\n\r\n              let sortedSCI=scidata.sort((a,b) => b-a);\r\n              let rank_country=scidataRank.map(v => sortedSCI.indexOf(v)+1 );\r\n              let top5=scidata.sort((a,b) => b-a).slice(0,5);\r\n              selected.map(e => {\r\n                e.region=countryData[e.end][1]\r\n                e.sciScaled= Math.round(e.sci/percentile20)\r\n                if(e.sci===top5[0]) {top5_list[0]=e}\r\n                else if(e.sci===top5[1]) {top5_list[1]=e}\r\n                else if(e.sci===top5[2]) {top5_list[2]=e}\r\n                else if(e.sci===top5[3]) {top5_list[3]=e}\r\n                else if(e.sci===top5[4]) {top5_list[4]=e}\r\n              })\r\n\r\n              //top5_list.map(e => e.sciScaled= Math.round(e.sci/percentile20))\r\n\r\n                            // Calculate the sums and group data (while tracking count)\r\n              const reduced = selected.reduce(function(m, d){\r\n                  if(!m[d.region]){\r\n                    m[d.region] = {...d, count: 1};\r\n                    return m;\r\n                  }\r\n                  m[d.region].sciScaled += d.sciScaled;\r\n                  m[d.region].count += 1;\r\n                  return m;\r\n               },{});\r\n\r\n               // Create new array from grouped data and compute the average\r\n                  result = Object.keys(reduced).map(function(k){\r\n                   const item  = reduced[k];\r\n                   return {\r\n                       region: item.region,\r\n                       sciScaled: Math.round(item.sciScaled/item.count*100)/100,\r\n                       numbers:item.count\r\n                   }\r\n               })\r\n\r\n            // console.log(JSON.stringify(result,null,4));\r\n\r\n              this.setState({name:Name,region:Region})\r\n\r\n              let matchExpression = ['match', ['get', 'iso_3166_1']];\r\n\r\n              // Calculate color values for each country based on 'hdi' value\r\n              selected.forEach( e => {\r\n              if(e.sci/percentile20 < 1) {matchExpression.push(e['end'], \"#F3F2E8\");}\r\n              else if (e.sci/percentile20 < 2) {matchExpression.push(e['end'], \"#D4EBE2\");}\r\n              else if (e.sci/percentile20 < 3) {matchExpression.push(e['end'], \"#B6E3DB\");}\r\n              else if (e.sci/percentile20 < 5) {matchExpression.push(e['end'], \"#97DCD5\");}\r\n              else if (e.sci/percentile20 < 10) {matchExpression.push(e['end'], \"#79D5CF\");}\r\n              else if (e.sci/percentile20 < 25) {matchExpression.push(e['end'], \"#5ACEC9\");}\r\n              else if (e.sci/percentile20 < 100) {matchExpression.push(e['end'], \"#3CC6C2\");}\r\n              else {matchExpression.push(e['end'], \"#1DBFBC\");}\r\n              });\r\n\r\n              matchExpression.push(this.state.selectedCountry, '#e8ae40');\r\n              // Last value is the default, used where there is no data\r\n              matchExpression.push('rgba(0, 0, 0, 0)');\r\n\r\n              // //console.log(this.state.selectedOption, prevState.selectedOption);\r\n\r\n              this.remove('country');\r\n\r\n              this.map.addLayer({\r\n                id: 'country',\r\n                source:'africapolis_country',\r\n                type: 'fill',\r\n                filter: [ \"match\", [\"get\", \"iso_3166_1\"], [\"IR\",\"CN\", \"GL\", \"SJ\", \"TM\", \"EH\", \"KP\",\"TJ\" ], false, true ],\r\n                'source-layer':'country_boundaries',\r\n                paint: {\r\n                  'fill-color': matchExpression,\r\n                  'fill-opacity': 0.9\r\n                }\r\n              });\r\n              this.map.on('mousemove', 'country', e =>  {\r\n                if(this.state.selectedCountry!==e.features[0].properties.iso_3166_1) {\r\n                this.map.getCanvas().style.cursor = 'pointer';\r\n                let coordinates = [e.lngLat.lng, e.lngLat.lat];\r\n                let sciPopup=[];\r\n                let rankPopup=[];\r\n                let sciColor=[];\r\n                let rankPopupRegion=[];\r\n                let regionNumber=regionTotal[e.features[0].properties.region];\r\n\r\n                selected.forEach( (d,i) => {\r\n                if(d.end===e.features[0].properties.iso_3166_1) {\r\n                  sciPopup=Math.round(d.sci/percentile20)\r\n                  rankPopup=rank_country[i]\r\n\r\n                  if(d.sci/percentile20 < 1) {sciColor.push(\"#F3F2E8\");}\r\n                  else if (d.sci/percentile20 < 2) {sciColor.push(\"#D4EBE2\");}\r\n                  else if (d.sci/percentile20 < 3) {sciColor.push(\"#B6E3DB\");}\r\n                  else if (d.sci/percentile20 < 5) {sciColor.push(\"#97DCD5\");}\r\n                  else if (d.sci/percentile20 < 10) {sciColor.push(\"#79D5CF\");}\r\n                  else if (d.sci/percentile20 < 25) {sciColor.push(\"#5ACEC9\");}\r\n                  else if (d.sci/percentile20 < 100) {sciColor.push(\"#3CC6C2\");}\r\n                  else {sciColor.push(\"#1DBFBC\");}\r\n                }\r\n                });\r\n\r\n              if(scidataRankRegionCode[e.features[0].properties.region]) {\r\n                scidataRankRegionCode[e.features[0].properties.region].map(\r\n                  (d,i)=> e.features[0].properties.iso_3166_1===d? rankPopupRegion.push(scidataRankRegion[e.features[0].properties.region][i]) : null\r\n              )}\r\n\r\n\r\n                this.popUp\r\n                  .setLngLat(coordinates)\r\n                  .setHTML(\r\n                  `<strong>${e.features[0].properties.name_en}</strong> ${sciPopup}<little>x</little><br/>\r\n                <span>Rank:</span><bold>${rankPopup}</bold><span>/194</span><br/>\r\n                  <small>In ${e.features[0].properties.region}:</small><bold>${rankPopupRegion}</bold><span>/${regionNumber}</span>`\r\n                  )\r\n                  .addTo(this.map);\r\n                  var popupElem = this.popUp.getElement();\r\n                  popupElem.style.color = sciColor[0];\r\n                } else {this.popUp.remove()}\r\n               });\r\n               this.setState({rendered:\"Yes\"})\r\n}\r\n\r\nremove = obj => {\r\n    this.map.removeLayer(obj)\r\n}\r\n\r\nmoveRegion = e => {\r\n      if(e) {\r\n      switch(e.activeLabel){\r\n      case 'Africa':\r\n      this.map.flyTo({center: [32.259 ,2.036], zoom:3.14, essential: true }); break;\r\n      case 'Americas':\r\n      this.map.flyTo({center: [-69.390 ,22.259], zoom:1.82, essential: true }); break;\r\n      case 'Asia':\r\n      this.map.flyTo({center: [104.687 ,32.592], zoom:3.14, essential: true }); break;\r\n      case 'Europe':\r\n      this.map.flyTo({center: [27.920 ,56.907], zoom:3.19, essential: true }); break;\r\n      case 'Oceania':\r\n      this.map.flyTo({center: [155.731 ,-16.435], zoom:3.11, essential: true }); break;\r\n      default:\r\n      return null;\r\n            }}\r\n}\r\n\r\n\r\n\r\n//5 Countries with the highest SCI\r\nrender() {\r\n    return (\r\n      <div>\r\n        <div className={classes.topleft}> <div className={classes.headwrapper}> <div className={classes.buttonwrapper}>\r\n          </div>\r\n          <headtitle> {this.state.name}</headtitle></div><br/>\r\n        <span>5 Most Connected Countries</span>\r\n        <table className={classes.table}>\r\n            <thead>\r\n              <tr>\r\n                <th>Country</th><th>SCI</th><th>Region</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              network\r\n            </tbody>\r\n          </table>\r\n        <br/> <span>Regional average</span>\r\n              <div className=\"VariableInfoWrapper\">\r\n                  <MaterialIcon icon=\"info\"/>\r\n                  <span><strong>What is the Social Connectedness Index?</strong><br/>\r\n                  The Social Connectedness Index measures the strength of connectedness between two geographic areas as represented by Facebook friendship ties.<br/><br/>\r\n                  <strong>Methodology</strong><br/>\r\n                  We use aggregated friendship connections on Facebook to measure social connectedness between geographies. Locations are assigned to users based on information they provide, connection information, and location services they have opted into. We use these friendships to estimate the probability a pair of users in these countries are Facebook friends and map this to an index score called the Social Connectedness Index (SCI). If the SCI is twice as large between two pairs of regions, it means the users in the first region-pair are about twice as likely to be connected than the second region-pair.<br/><br/>\r\n                The figure shows a heat map of the social connectedness. For each country in our data, the colors highlight connections of the focal country, given in orange. The lightest color corresponds to the 20th percentile of the connectedness to the focal country; darker colors correspond to closer connections.\r\n                <br/><br/><color>Click the right button to check more detail and download the data on the Facebook page</color> </span>\r\n              </div>\r\n              <div className=\"FB\">\r\n              <a href=\"https://dataforgood.fb.com/tools/social-connectedness-index/#:~:text=The%20Social%20Connectedness%20Index%20measures,social%20mobility%2C%20trade%20and%20more.\">\r\n                  <MaterialIcon icon=\"facebook\"/>\r\n                  <span>Move to the Facebook Data for Good page to check detail and download the data</span>\r\n              </a>\r\n              </div>\r\n           </div>\r\n        <div ref={el => this.mapContainer = el} className={classes.mapContainer} /> \r\n      </div>\r\n    )\r\n  }\r\n}\r\nReactDOM.render(<Application />, document.getElementById('app'));\r\n"]},"metadata":{},"sourceType":"module"}