{"ast":null,"code":"var _jsxFileName = \"C:\\\\mapboxAndReact\\\\src\\\\index.js\";\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport mapboxgl from 'mapbox-gl';\nimport axios from 'axios';\nimport Select from 'react-select';\nimport sci from './sci.json';\nimport classes from './Site.module.css'; //iso_3166_1_alpha_3\n///6808: 520  baseline\n//// divide 20% percentile per country//////\n//// Access token for Africapolis mapbox account\n\nmapboxgl.accessToken = 'pk.eyJ1IjoibWttZCIsImEiOiJjajBqYjJpY2owMDE0Mndsbml0d2V1ZXczIn0.el8wQmA-TSJp2ggX8fJ1rA'; //////////////////\n\nconst agglomeration_fill_color = [\"step\", [\"get\", \"Population_2015\"], \"hsla(0, 0%, 8%, 0.5)\", 10000, \"hsla(55, 30%, 93%, 0.5)\", 30000, \"hsla(60, 100%, 90%, 0.5)\", 100000, \"hsla(98, 55%, 81%, 0.5)\", 300000, \"hsla(166, 44%, 65%, 0.5)\", 1000000, \"hsla(186, 53%, 51%, 0.5)\", 3000000, \"hsla(197, 74%, 43%, 0.5)\", 11847635, \"hsla(197, 74%, 43%, 0.5)\"];\nconst agglomeration_stroke_color = [\"step\", [\"get\", \"Population_2015\"], \"hsla(0, 0%, 8%, 1)\", 10000, \"hsla(55, 30%, 93%, 1)\", 30000, \"hsla(60, 100%, 90%, 1)\", 100000, \"hsla(98, 55%, 81%, 1)\", 300000, \"hsla(166, 44%, 65%, 1)\", 1000000, \"hsla(186, 53%, 51%, 1)\", 3000000, \"hsla(197, 74%, 43%, 1)\", 11847635, \"hsla(197, 74%, 43%, 1)\"]; // const options = [];\n// country_label.map(v=>{return options.push({label:v, value:v})});\n// Values.map(v=>{return options.push({label:agglo_label[v[1]-1]+\", \"+country_label[v[0]-1], value:v})});\n// console.log(Values.map(v=>{return {label:agglo_label[v[1]]+\", \"+country_label[v[0]], value:v}}))\n\nconst options = [{\n  label: \"Angola\",\n  value: 1\n}, {\n  label: \"Burundi\",\n  value: 2\n}, {\n  label: \"Benin\",\n  value: 3\n}, {\n  label: \"Burkina Faso\",\n  value: 4\n}, {\n  label: \"Botswana\",\n  value: 5\n}, {\n  label: \"Central African Republic\",\n  value: 6\n}, {\n  label: \"Cote d`Ivoire\",\n  value: 7\n}, {\n  label: \"Cameroon\",\n  value: 8\n}, {\n  label: \"Democratic Republic of the Congo\",\n  value: 9\n}, {\n  label: \"Republic of the Congo\",\n  value: 10\n}, {\n  label: \"Cabo Verde\",\n  value: 11\n}, {\n  label: \"Djibouti\",\n  value: 12\n}, {\n  label: \"Algeria\",\n  value: 13\n}, {\n  label: \"Egypt\",\n  value: 14\n}, {\n  label: \"Eritrea\",\n  value: 15\n}, {\n  label: \"Ethiopia\",\n  value: 16\n}, {\n  label: \"Gabon\",\n  value: 17\n}, {\n  label: \"Ghana\",\n  value: 18\n}, {\n  label: \"Guinea\",\n  value: 19\n}, {\n  label: \"The Gambia\",\n  value: 20\n}, {\n  label: \"Guinea-Bissau\",\n  value: 21\n}, {\n  label: \"Equatorial Guinea\",\n  value: 22\n}, {\n  label: \"Kenya\",\n  value: 23\n}, {\n  label: \"Liberia\",\n  value: 24\n}, {\n  label: \"Libya\",\n  value: 25\n}, {\n  label: \"Lesotho\",\n  value: 26\n}, {\n  label: \"Morocco\",\n  value: 27\n}, {\n  label: \"Mali\",\n  value: 28\n}, {\n  label: \"Mozambique\",\n  value: 29\n}, {\n  label: \"Mauritania\",\n  value: 30\n}, {\n  label: \"Malawi\",\n  value: 31\n}, {\n  label: \"Namibia\",\n  value: 32\n}, {\n  label: \"Niger\",\n  value: 33\n}, {\n  label: \"Nigeria\",\n  value: 34\n}, {\n  label: \"Rwanda\",\n  value: 35\n}, {\n  label: \"Sudan\",\n  value: 36\n}, {\n  label: \"Senegal\",\n  value: 37\n}, {\n  label: \"Sierra Leone\",\n  value: 38\n}, {\n  label: \"Somalia\",\n  value: 39\n}, {\n  label: \"South Sudan\",\n  value: 40\n}, {\n  label: \"Sao Tome and Principe\",\n  value: 41\n}, {\n  label: \"Kingdom of Eswatini\",\n  value: 42\n}, {\n  label: \"Chad\",\n  value: 43\n}, {\n  label: \"Togo\",\n  value: 44\n}, {\n  label: \"Tunisia\",\n  value: 45\n}, {\n  label: \"Tanzania\",\n  value: 46\n}, {\n  label: \"Uganda\",\n  value: 47\n}, {\n  label: \"South Africa\",\n  value: 48\n}, {\n  label: \"Zambia\",\n  value: 49\n}, {\n  label: \"Zimbabwe\",\n  value: 50\n}]; //// Basic setting of the map\n\nclass Application extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.onUpdate = update => {\n      this.setState({\n        update\n      });\n    };\n\n    this.onChange = values => {\n      this.setState({\n        values\n      });\n    };\n\n    this.onFilter = filters => {\n      this.setState({\n        [filters.target.id]: !this.state[filters.target.id]\n      });\n    };\n\n    this.remove = obj => {\n      this.map.removeLayer(obj);\n    };\n\n    this.add_shape = (obj, filter1) => {\n      this.map.addLayer({\n        id: obj,\n        source: 'africapolis_country',\n        type: 'fill',\n        'source-layer': 'africacontinent_complete-ays128',\n        filter: filter1,\n        paint: {\n          'fill-color': '#fdfdf5',\n          'fill-opacity': [\"interpolate\", [\"linear\"], [\"zoom\"], 0, 1, 5, 0] //8.5\n\n        }\n      } // layer order\n      ); //console.log(this.map.getSource(\"africapolis_country\"))\n    };\n\n    this.state = {\n      lng: 5,\n      lat: 0,\n      zoom: 2,\n      selectedOption: {\n        label: 'Africa',\n        value: ''\n      },\n      selectedCountry: \"AE\",\n      name: \"Not selected\"\n    };\n  }\n\n  componentDidMount() {\n    //// Initial map setting\n    let selected = [];\n    let scidata = [];\n    sci.map(e => e.start === this.state.selectedCountry ? selected.push(e) : null);\n    console.log(selected);\n    selected.map(e => scidata.push(e.sci));\n    console.log(scidata); //Object.keys(selected).map(e => console.log(e))\n\n    this.map = new mapboxgl.Map({\n      container: this.mapContainer,\n      style: 'mapbox://styles/mkmd/ckguwdhux0j7719p9rz2hpmpi',\n      /// Select mapstyle from mapbox studio\n      center: [this.state.lng, this.state.lat],\n      zoom: this.state.zoom\n    }); // this.map.on('move', () => {\n    //   this.setState({\n    //   lng: this.map.getCenter().lng.toFixed(4),\n    //   lat: this.map.getCenter().lat.toFixed(4),\n    //   zoom: this.map.getZoom().toFixed(2)\n    //   });\n    // });\n    //// Import Africapolis agglomerations from mapbox\n\n    this.map.on('load', () => {\n      // Add Country shape\n      this.map.addSource('africapolis_country', {\n        type: 'vector',\n        url: 'mapbox://mapbox.country-boundaries-v1'\n      }); // Add Agglomerations\n      //    this.map.addSource('africapolis_agglos', { type: 'vector', url: 'mapbox://mkmd.3e0rk98j'});\n      // Add Country label\n      //    this.map.addSource('africapolis_country_label', { type: 'vector', url: 'mapbox://mkmd.6v0ckax4'});\n      // Add Region labelled\n      //    this.map.addSource('africapolis_region_label', { type: 'vector', url: 'mapbox://mkmd.3yut44ue'});\n      // Add Country layer\n\n      this.map.addLayer({\n        id: 'country',\n        source: 'africapolis_country',\n        type: 'fill',\n        'source-layer': 'country_boundaries',\n        //filter:[\"==\",\"Region_ID\",1],\n        paint: {\n          'fill-color': '#fdfdf5',\n          'fill-opacity': ['case', ['boolean', ['feature-state', 'hover'], false], 0.2, 0]\n        }\n      }); // Add Agglomerations layer\n\n      this.map.addLayer({\n        id: 'agglomerations',\n        source: 'africapolis_agglos',\n        type: 'circle',\n        'source-layer': 'africapolis2020-3mv6ux',\n        filter: [\">\", \"Population_2015\", 0],\n        paint: {\n          'circle-stroke-color': agglomeration_stroke_color,\n          'circle-stroke-width': 3,\n          'circle-color': agglomeration_fill_color\n        }\n      }); //mkmd.ck19bzbfg07z42tmz06bk8soe-6dzi4\n      //AfricaContinent\n      //ISO3_CODE\n\n      this.map.addLayer({\n        id: 'country_labels',\n        source: 'africapolis_country_label',\n        type: 'symbol',\n        'source-layer': 'OECD_countryname-0ogi2f',\n        filter: [\"all\", [\"match\", [\"get\", \"ISO3_CODE\"], [\"AGO\", \"BDI\", \"BEN\", \"BFA\", \"BWA\", \"CAF\", \"CIV\", \"CMR\", \"COD\", \"COG\", \"CPV\", \"DJI\", \"DZA\", \"EGY\", \"ERI\", \"ETH\", \"GAB\", \"GHA\", \"GIN\", \"GMB\", \"GNB\", \"GNQ\", \"KEN\", \"LBR\", \"LBY\", \"LSO\", \"MAR\", \"MLI\", \"MOZ\", \"MRT\", \"MWI\", \"NAM\", \"NER\", \"NGA\", \"RWA\", \"SDN\", \"SEN\", \"SLE\", \"SOM\", \"SSD\", \"STP\", \"SWZ\", \"TCD\", \"TGO\", \"TUN\", \"TZA\", \"UGA\", \"ZAF\", \"ZMB\", \"ZWE\", \"MDG\", \"SYC\", \"COM\"], true, false]],\n        layout: {\n          'text-field': [\"get\", \"NAME_EN\"],\n          'text-font': [\"Helvetica Neue LT Std 75 Bold\", \"Arial Unicode MS Regular\"] //'text-size': [\"interpolate\", [\"linear\"], [\"zoom\"], 2, [\"step\", [\"get\", \"scalerank\"], 10, 3, 8, 5, 5 ], 9, [\"step\", [\"get\", \"scalerank\"], 35, 3, 27, 5, 22 ] ],\n\n        },\n        paint: {\n          'text-opacity': [\"step\", [\"zoom\"], 0, 3, 1, 22, 1],\n          'text-color': ['case', ['boolean', ['feature-state', 'hover'], false], \"hsl(0,0%,0%)\", \"#6d6d6f\"],\n          'text-halo-color': \"hsl(0, 0%, 100%)\",\n          'text-halo-width': 1.25\n        }\n      });\n      this.map.addLayer({\n        id: 'region_labels',\n        source: 'africapolis_region_label',\n        type: 'symbol',\n        'source-layer': 'region-78kdxj',\n        layout: {\n          'text-field': [\"to-string\", [\"get\", \"Name\"]],\n          'text-font': [\"Helvetica Neue LT Std 75 Bold\", \"Arial Unicode MS Regular\"],\n          'text-size': 26 //'circle-stroke-color': agglomeration_stroke_color,\n          //'circle-stroke-width': 3,\n          //'circle-color': agglomeration_fill_color\n\n        },\n        paint: {\n          'text-color': ['case', ['boolean', ['feature-state', 'hover'], false], \"hsl(60,100%,50%)\", \"hsl(0, 0%, 100%)\"],\n          'text-halo-color': \"hsl(0, 0%, 0%)\",\n          'text-halo-width': 3,\n          'text-opacity': [\"step\", [\"zoom\"], 1, 3, 0, 22, 0]\n        }\n      });\n      this.map.on('click', 'country', e => {\n        //console.log(e.features[0].properties.iso_3166_1)\n        this.setState({\n          selectedCountry: e.features[0].properties.iso_3166_1\n        });\n        this.setState({\n          name: e.features[0].properties.name_en\n        });\n      });\n      var hoveredID = null;\n      this.map.on('mouseenter', 'country', e => {\n        if (e.features.length > 0) {\n          if (hoveredID) {\n            this.map.setFeatureState({\n              source: 'africapolis_country',\n              id: hoveredID,\n              sourceLayer: 'country_boundaries'\n            }, {\n              hover: false\n            });\n          }\n\n          hoveredID = e.features[0].id;\n          this.map.setFeatureState({\n            source: 'africapolis_country',\n            id: hoveredID,\n            sourceLayer: 'country_boundaries'\n          }, {\n            hover: true\n          });\n        }\n      });\n      this.map.on('mouseleave', 'country', e => {\n        if (hoveredID) {\n          this.map.setFeatureState({\n            source: 'africapolis_country',\n            id: hoveredID,\n            sourceLayer: 'country_boundaries'\n          }, {\n            hover: false\n          });\n        }\n\n        hoveredID = null;\n      });\n    });\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    //if( prevState.selectedOption !== this.state.selectedOption || prevState.update[0] !== this.state.update[0]) {\n    if (prevState !== this.state) {\n      let selected = [];\n      sci.map(e => e.start === this.state.selectedCountry ? selected.push(e) : null);\n      console.log(selected);\n      let matchExpression = ['match', ['get', 'iso_3166_1']]; // Calculate color values for each country based on 'hdi' value\n\n      selected.forEach(function (row) {\n        // Convert the range of data values to a suitable color\n        var green = row['sci'] / 1000000 * 255;\n        var color = 'rgb(0, ' + green + ', 0)';\n        matchExpression.push(row['end'], color);\n      });\n      matchExpression.push(this.state.selectedCountry, 'yellow');\n      console.log(matchExpression); // Last value is the default, used where there is no data\n\n      matchExpression.push('rgba(0, 0, 0, 0)'); // //console.log(this.state.selectedOption, prevState.selectedOption);\n\n      this.remove('country');\n      this.map.addLayer({\n        id: 'country',\n        source: 'africapolis_country',\n        type: 'fill',\n        'source-layer': 'country_boundaries',\n        //filter:[\"==\",\"Region_ID\",1],\n        paint: {\n          'fill-color': matchExpression,\n          'fill-opacity': 0.7\n        }\n      });\n    }\n  }\n\n  render() {\n    const {\n      selectedOption\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 313,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: classes.topleft,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 314,\n        columnNumber: 9\n      }\n    }, \" \", this.state.name), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 315,\n        columnNumber: 9\n      }\n    }, \"Longitude: \", this.state.lng, \" | Latitude: \", this.state.lat, \" | Zoom: \", this.state.zoom), /*#__PURE__*/React.createElement(\"div\", {\n      ref: el => this.mapContainer = el,\n      className: classes.mapContainer,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 316,\n        columnNumber: 9\n      }\n    }));\n  }\n\n}\n\nReactDOM.render( /*#__PURE__*/React.createElement(Application, {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 321,\n    columnNumber: 17\n  }\n}), document.getElementById('app'));","map":{"version":3,"sources":["C:/mapboxAndReact/src/index.js"],"names":["React","ReactDOM","mapboxgl","axios","Select","sci","classes","accessToken","agglomeration_fill_color","agglomeration_stroke_color","options","label","value","Application","Component","constructor","props","onUpdate","update","setState","onChange","values","onFilter","filters","target","id","state","remove","obj","map","removeLayer","add_shape","filter1","addLayer","source","type","filter","paint","lng","lat","zoom","selectedOption","selectedCountry","name","componentDidMount","selected","scidata","e","start","push","console","log","Map","container","mapContainer","style","center","on","addSource","url","layout","features","properties","iso_3166_1","name_en","hoveredID","length","setFeatureState","sourceLayer","hover","componentDidUpdate","prevProps","prevState","matchExpression","forEach","row","green","color","render","topleft","el","document","getElementById"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,QAAP,MAAqB,WAArB;AACA,OAAOC,QAAP,MAAqB,WAArB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,cAAnB;AACA,OAAOC,GAAP,MAAgB,YAAhB;AACA,OAAOC,OAAP,MAAoB,mBAApB,C,CACA;AACA;AACA;AAEA;;AACAJ,QAAQ,CAACK,WAAT,GAAuB,uFAAvB,C,CAKA;;AAEA,MAAMC,wBAAwB,GAAE,CAC9B,MAD8B,EAE9B,CAAC,KAAD,EAAQ,iBAAR,CAF8B,EAG9B,sBAH8B,EAI9B,KAJ8B,EAK9B,yBAL8B,EAM9B,KAN8B,EAO9B,0BAP8B,EAQ9B,MAR8B,EAS9B,yBAT8B,EAU9B,MAV8B,EAW9B,0BAX8B,EAY9B,OAZ8B,EAa9B,0BAb8B,EAc9B,OAd8B,EAe9B,0BAf8B,EAgB9B,QAhB8B,EAiB9B,0BAjB8B,CAAhC;AAmBC,MAAMC,0BAA0B,GAAE,CACjC,MADiC,EAEjC,CAAC,KAAD,EAAQ,iBAAR,CAFiC,EAGjC,oBAHiC,EAIjC,KAJiC,EAKjC,uBALiC,EAMjC,KANiC,EAOjC,wBAPiC,EAQjC,MARiC,EASjC,uBATiC,EAUjC,MAViC,EAWjC,wBAXiC,EAYjC,OAZiC,EAajC,wBAbiC,EAcjC,OAdiC,EAejC,wBAfiC,EAgBjC,QAhBiC,EAiBjC,wBAjBiC,CAAlC,C,CAoBD;AACA;AACA;AACA;;AAGE,MAAMC,OAAO,GAAG,CAAC;AAAEC,EAAAA,KAAK,EAAC,QAAR;AAAiBC,EAAAA,KAAK,EAAC;AAAvB,CAAD,EAA6B;AAAED,EAAAA,KAAK,EAAC,SAAR;AAAkBC,EAAAA,KAAK,EAAC;AAAxB,CAA7B,EAA0D;AAAED,EAAAA,KAAK,EAAC,OAAR;AAAgBC,EAAAA,KAAK,EAAC;AAAtB,CAA1D,EAAqF;AAAED,EAAAA,KAAK,EAAC,cAAR;AAAuBC,EAAAA,KAAK,EAAC;AAA7B,CAArF,EAAuH;AAAED,EAAAA,KAAK,EAAC,UAAR;AAAmBC,EAAAA,KAAK,EAAC;AAAzB,CAAvH,EAAqJ;AAAED,EAAAA,KAAK,EAAC,0BAAR;AAAmCC,EAAAA,KAAK,EAAC;AAAzC,CAArJ,EAAmM;AAAED,EAAAA,KAAK,EAAC,eAAR;AAAwBC,EAAAA,KAAK,EAAC;AAA9B,CAAnM,EAAsO;AAAED,EAAAA,KAAK,EAAC,UAAR;AAAmBC,EAAAA,KAAK,EAAC;AAAzB,CAAtO,EAAoQ;AAAED,EAAAA,KAAK,EAAC,kCAAR;AAA2CC,EAAAA,KAAK,EAAC;AAAjD,CAApQ,EAA0T;AAAED,EAAAA,KAAK,EAAC,uBAAR;AAAgCC,EAAAA,KAAK,EAAC;AAAtC,CAA1T,EAAsW;AAAED,EAAAA,KAAK,EAAC,YAAR;AAAqBC,EAAAA,KAAK,EAAC;AAA3B,CAAtW,EAAuY;AAAED,EAAAA,KAAK,EAAC,UAAR;AAAmBC,EAAAA,KAAK,EAAC;AAAzB,CAAvY,EAAsa;AAAED,EAAAA,KAAK,EAAC,SAAR;AAAkBC,EAAAA,KAAK,EAAC;AAAxB,CAAta,EAAoc;AAAED,EAAAA,KAAK,EAAC,OAAR;AAAgBC,EAAAA,KAAK,EAAC;AAAtB,CAApc,EAAge;AAAED,EAAAA,KAAK,EAAC,SAAR;AAAkBC,EAAAA,KAAK,EAAC;AAAxB,CAAhe,EAA8f;AAAED,EAAAA,KAAK,EAAC,UAAR;AAAmBC,EAAAA,KAAK,EAAC;AAAzB,CAA9f,EAA6hB;AAAED,EAAAA,KAAK,EAAC,OAAR;AAAgBC,EAAAA,KAAK,EAAC;AAAtB,CAA7hB,EAAyjB;AAAED,EAAAA,KAAK,EAAC,OAAR;AAAgBC,EAAAA,KAAK,EAAC;AAAtB,CAAzjB,EAAqlB;AAAED,EAAAA,KAAK,EAAC,QAAR;AAAiBC,EAAAA,KAAK,EAAC;AAAvB,CAArlB,EAAknB;AAAED,EAAAA,KAAK,EAAC,YAAR;AAAqBC,EAAAA,KAAK,EAAC;AAA3B,CAAlnB,EAAmpB;AAAED,EAAAA,KAAK,EAAC,eAAR;AAAwBC,EAAAA,KAAK,EAAC;AAA9B,CAAnpB,EAAurB;AAAED,EAAAA,KAAK,EAAC,mBAAR;AAA4BC,EAAAA,KAAK,EAAC;AAAlC,CAAvrB,EAA+tB;AAAED,EAAAA,KAAK,EAAC,OAAR;AAAgBC,EAAAA,KAAK,EAAC;AAAtB,CAA/tB,EAA2vB;AAAED,EAAAA,KAAK,EAAC,SAAR;AAAkBC,EAAAA,KAAK,EAAC;AAAxB,CAA3vB,EAAyxB;AAAED,EAAAA,KAAK,EAAC,OAAR;AAAgBC,EAAAA,KAAK,EAAC;AAAtB,CAAzxB,EAAqzB;AAAED,EAAAA,KAAK,EAAC,SAAR;AAAkBC,EAAAA,KAAK,EAAC;AAAxB,CAArzB,EAAm1B;AAAED,EAAAA,KAAK,EAAC,SAAR;AAAkBC,EAAAA,KAAK,EAAC;AAAxB,CAAn1B,EAAi3B;AAAED,EAAAA,KAAK,EAAC,MAAR;AAAeC,EAAAA,KAAK,EAAC;AAArB,CAAj3B,EAA44B;AAAED,EAAAA,KAAK,EAAC,YAAR;AAAqBC,EAAAA,KAAK,EAAC;AAA3B,CAA54B,EAA66B;AAAED,EAAAA,KAAK,EAAC,YAAR;AAAqBC,EAAAA,KAAK,EAAC;AAA3B,CAA76B,EAA88B;AAAED,EAAAA,KAAK,EAAC,QAAR;AAAiBC,EAAAA,KAAK,EAAC;AAAvB,CAA98B,EAA2+B;AAAED,EAAAA,KAAK,EAAC,SAAR;AAAkBC,EAAAA,KAAK,EAAC;AAAxB,CAA3+B,EAAygC;AAAED,EAAAA,KAAK,EAAC,OAAR;AAAgBC,EAAAA,KAAK,EAAC;AAAtB,CAAzgC,EAAqiC;AAAED,EAAAA,KAAK,EAAC,SAAR;AAAkBC,EAAAA,KAAK,EAAC;AAAxB,CAAriC,EAAmkC;AAAED,EAAAA,KAAK,EAAC,QAAR;AAAiBC,EAAAA,KAAK,EAAC;AAAvB,CAAnkC,EAAgmC;AAAED,EAAAA,KAAK,EAAC,OAAR;AAAgBC,EAAAA,KAAK,EAAC;AAAtB,CAAhmC,EAA4nC;AAAED,EAAAA,KAAK,EAAC,SAAR;AAAkBC,EAAAA,KAAK,EAAC;AAAxB,CAA5nC,EAA0pC;AAAED,EAAAA,KAAK,EAAC,cAAR;AAAuBC,EAAAA,KAAK,EAAC;AAA7B,CAA1pC,EAA6rC;AAAED,EAAAA,KAAK,EAAC,SAAR;AAAkBC,EAAAA,KAAK,EAAC;AAAxB,CAA7rC,EAA2tC;AAAED,EAAAA,KAAK,EAAC,aAAR;AAAsBC,EAAAA,KAAK,EAAC;AAA5B,CAA3tC,EAA6vC;AAAED,EAAAA,KAAK,EAAC,uBAAR;AAAgCC,EAAAA,KAAK,EAAC;AAAtC,CAA7vC,EAAyyC;AAAED,EAAAA,KAAK,EAAC,qBAAR;AAA8BC,EAAAA,KAAK,EAAC;AAApC,CAAzyC,EAAm1C;AAAED,EAAAA,KAAK,EAAC,MAAR;AAAeC,EAAAA,KAAK,EAAC;AAArB,CAAn1C,EAA82C;AAAED,EAAAA,KAAK,EAAC,MAAR;AAAeC,EAAAA,KAAK,EAAC;AAArB,CAA92C,EAAw4C;AAAED,EAAAA,KAAK,EAAC,SAAR;AAAkBC,EAAAA,KAAK,EAAC;AAAxB,CAAx4C,EAAs6C;AAAED,EAAAA,KAAK,EAAC,UAAR;AAAmBC,EAAAA,KAAK,EAAC;AAAzB,CAAt6C,EAAq8C;AAAED,EAAAA,KAAK,EAAC,QAAR;AAAiBC,EAAAA,KAAK,EAAC;AAAvB,CAAr8C,EAAk+C;AAAED,EAAAA,KAAK,EAAC,cAAR;AAAuBC,EAAAA,KAAK,EAAC;AAA7B,CAAl+C,EAAqgD;AAAED,EAAAA,KAAK,EAAC,QAAR;AAAiBC,EAAAA,KAAK,EAAC;AAAvB,CAArgD,EAAkiD;AAAED,EAAAA,KAAK,EAAC,UAAR;AAAmBC,EAAAA,KAAK,EAAC;AAAzB,CAAliD,CAAhB,C,CAEF;;AACA,MAAMC,WAAN,SAA0Bb,KAAK,CAACc,SAAhC,CAA0C;AACxCC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;;AADiB,SA+MrBC,QA/MqB,GA+MVC,MAAM,IAAI;AACnB,WAAKC,QAAL,CAAc;AAAED,QAAAA;AAAF,OAAd;AACD,KAjNoB;;AAAA,SAmNrBE,QAnNqB,GAmNVC,MAAM,IAAI;AACnB,WAAKF,QAAL,CAAc;AAAEE,QAAAA;AAAF,OAAd;AACD,KArNoB;;AAAA,SAuNrBC,QAvNqB,GAuNVC,OAAO,IAAI;AACpB,WAAKJ,QAAL,CAAc;AAAC,SAACI,OAAO,CAACC,MAAR,CAAeC,EAAhB,GAAqB,CAAC,KAAKC,KAAL,CAAWH,OAAO,CAACC,MAAR,CAAeC,EAA1B;AAAvB,OAAd;AACD,KAzNoB;;AAAA,SA2NrBE,MA3NqB,GA2NZC,GAAG,IAAI;AACZ,WAAKC,GAAL,CAASC,WAAT,CAAqBF,GAArB;AACH,KA7NoB;;AAAA,SA+NrBG,SA/NqB,GA+NT,CAACH,GAAD,EAAKI,OAAL,KAAiB;AACzB,WAAKH,GAAL,CAASI,QAAT,CAAkB;AACdR,QAAAA,EAAE,EAAEG,GADU;AAEdM,QAAAA,MAAM,EAAC,qBAFO;AAGdC,QAAAA,IAAI,EAAE,MAHQ;AAId,wBAAe,iCAJD;AAKdC,QAAAA,MAAM,EAACJ,OALO;AAMdK,QAAAA,KAAK,EAAE;AACL,wBAAc,SADT;AAEL,0BAAgB,CAAC,aAAD,EAAe,CAAC,QAAD,CAAf,EAA0B,CAAC,MAAD,CAA1B,EAAoC,CAApC,EAAsC,CAAtC,EAAwC,CAAxC,EAA0C,CAA1C,CAFX,CAEwD;;AAFxD;AANO,OAAlB,CAWD;AAXC,QADyB,CAczB;AAEH,KA/OoB;;AAEjB,SAAKX,KAAL,GAAa;AACXY,MAAAA,GAAG,EAAE,CADM;AAEXC,MAAAA,GAAG,EAAE,CAFM;AAGXC,MAAAA,IAAI,EAAE,CAHK;AAIXC,MAAAA,cAAc,EAAE;AAAC9B,QAAAA,KAAK,EAAE,QAAR;AAAkBC,QAAAA,KAAK,EAAE;AAAzB,OAJL;AAKX8B,MAAAA,eAAe,EAAE,IALN;AAMXC,MAAAA,IAAI,EAAE;AANK,KAAb;AAQD;;AACHC,EAAAA,iBAAiB,GAAG;AACpB;AAEA,QAAIC,QAAQ,GAAG,EAAf;AACA,QAAIC,OAAO,GAAE,EAAb;AACAzC,IAAAA,GAAG,CAACwB,GAAJ,CAAQkB,CAAC,IAAIA,CAAC,CAACC,KAAF,KAAU,KAAKtB,KAAL,CAAWgB,eAArB,GAAsCG,QAAQ,CAACI,IAAT,CAAcF,CAAd,CAAtC,GAAyD,IAAtE;AACAG,IAAAA,OAAO,CAACC,GAAR,CAAYN,QAAZ;AACAA,IAAAA,QAAQ,CAAChB,GAAT,CAAakB,CAAC,IAAID,OAAO,CAACG,IAAR,CAAaF,CAAC,CAAC1C,GAAf,CAAlB;AACA6C,IAAAA,OAAO,CAACC,GAAR,CAAYL,OAAZ,EARoB,CASpB;;AAIK,SAAKjB,GAAL,GAAW,IAAI3B,QAAQ,CAACkD,GAAb,CAAiB;AAC3BC,MAAAA,SAAS,EAAE,KAAKC,YADW;AAE3BC,MAAAA,KAAK,EAAE,gDAFoB;AAE8B;AACzDC,MAAAA,MAAM,EAAE,CAAC,KAAK9B,KAAL,CAAWY,GAAZ,EAAiB,KAAKZ,KAAL,CAAWa,GAA5B,CAHmB;AAI3BC,MAAAA,IAAI,EAAE,KAAKd,KAAL,CAAWc;AAJU,KAAjB,CAAX,CAbe,CAmBhB;AACA;AACA;AACA;AACA;AACA;AACA;AACJ;;AACI,SAAKX,GAAL,CAAS4B,EAAT,CAAY,MAAZ,EAAoB,MAAM;AAC9B;AACM,WAAK5B,GAAL,CAAS6B,SAAT,CAAmB,qBAAnB,EAA0C;AAAEvB,QAAAA,IAAI,EAAE,QAAR;AAAkBwB,QAAAA,GAAG,EAAE;AAAvB,OAA1C,EAFwB,CAG9B;AACE;AACF;AACE;AACF;AACE;AAEF;;AACM,WAAK9B,GAAL,CAASI,QAAT,CAAkB;AACZR,QAAAA,EAAE,EAAE,SADQ;AAEZS,QAAAA,MAAM,EAAC,qBAFK;AAGZC,QAAAA,IAAI,EAAE,MAHM;AAIZ,wBAAe,oBAJH;AAKZ;AACAE,QAAAA,KAAK,EAAE;AAEL,wBAAc,SAFT;AAGL,0BAAgB,CAAC,MAAD,EAAQ,CAAC,SAAD,EAAY,CAAC,eAAD,EAAkB,OAAlB,CAAZ,EAAwC,KAAxC,CAAR,EAAuD,GAAvD,EAA2D,CAA3D;AAHX;AANK,OAAlB,EAXwB,CA0B9B;;AACM,WAAKR,GAAL,CAASI,QAAT,CAAkB;AACZR,QAAAA,EAAE,EAAE,gBADQ;AAEZS,QAAAA,MAAM,EAAC,oBAFK;AAGZC,QAAAA,IAAI,EAAE,QAHM;AAIZ,wBAAe,wBAJH;AAKZC,QAAAA,MAAM,EAAC,CAAC,GAAD,EAAK,iBAAL,EAAuB,CAAvB,CALK;AAMZC,QAAAA,KAAK,EAAE;AACH,iCAAuB5B,0BADpB;AAEH,iCAAuB,CAFpB;AAGH,0BAAgBD;AAHb;AANK,OAAlB,EA3BwB,CAwC9B;AACA;AACA;;AACM,WAAKqB,GAAL,CAASI,QAAT,CAAkB;AACZR,QAAAA,EAAE,EAAE,gBADQ;AAEZS,QAAAA,MAAM,EAAC,2BAFK;AAGZC,QAAAA,IAAI,EAAE,QAHM;AAIZ,wBAAe,yBAJH;AAKZC,QAAAA,MAAM,EAAC,CAAE,KAAF,EAAS,CAAE,OAAF,EAAW,CAAC,KAAD,EAAQ,WAAR,CAAX,EAAiC,CAAE,KAAF,EAAS,KAAT,EAAgB,KAAhB,EAAuB,KAAvB,EAA8B,KAA9B,EAAqC,KAArC,EAA4C,KAA5C,EAAmD,KAAnD,EAA0D,KAA1D,EAAiE,KAAjE,EAAwE,KAAxE,EAA+E,KAA/E,EAAsF,KAAtF,EAA6F,KAA7F,EAAoG,KAApG,EAA2G,KAA3G,EAAkH,KAAlH,EAAyH,KAAzH,EAAgI,KAAhI,EAAuI,KAAvI,EAA8I,KAA9I,EAAqJ,KAArJ,EAA4J,KAA5J,EAAmK,KAAnK,EAA0K,KAA1K,EAAiL,KAAjL,EAAwL,KAAxL,EAA+L,KAA/L,EAAsM,KAAtM,EAA6M,KAA7M,EAAoN,KAApN,EAA2N,KAA3N,EAAkO,KAAlO,EAAyO,KAAzO,EAAgP,KAAhP,EAAuP,KAAvP,EAA8P,KAA9P,EAAqQ,KAArQ,EAA4Q,KAA5Q,EAAmR,KAAnR,EAA0R,KAA1R,EAAiS,KAAjS,EAAwS,KAAxS,EAA+S,KAA/S,EAAsT,KAAtT,EAA6T,KAA7T,EAAoU,KAApU,EAA2U,KAA3U,EAAkV,KAAlV,EAAyV,KAAzV,EAA+V,KAA/V,EAAsW,KAAtW,EAA6W,KAA7W,CAAjC,EAAuZ,IAAvZ,EAA6Z,KAA7Z,CAAT,CALK;AAMZwB,QAAAA,MAAM,EAAE;AACN,wBAAa,CAAC,KAAD,EAAO,SAAP,CADP;AAEN,uBAAa,CAAE,+BAAF,EAAmC,0BAAnC,CAFP,CAGN;;AAHM,SANI;AAWZvB,QAAAA,KAAK,EAAC;AAAC,0BAAe,CAAE,MAAF,EAAS,CAAC,MAAD,CAAT,EAAoB,CAApB,EAAwB,CAAxB,EAA4B,CAA5B,EAAgC,EAAhC,EAAqC,CAArC,CAAhB;AACC,wBAAa,CAAC,MAAD,EAAQ,CAAC,SAAD,EAAY,CAAC,eAAD,EAAkB,OAAlB,CAAZ,EAAwC,KAAxC,CAAR,EAAuD,cAAvD,EAAsE,SAAtE,CADd;AAEC,6BAAmB,kBAFpB;AAGC,6BAAmB;AAHpB;AAXM,OAAlB;AAkBE,WAAKR,GAAL,CAASI,QAAT,CAAkB;AACZR,QAAAA,EAAE,EAAE,eADQ;AAEZS,QAAAA,MAAM,EAAC,0BAFK;AAGZC,QAAAA,IAAI,EAAE,QAHM;AAIZ,wBAAe,eAJH;AAKZyB,QAAAA,MAAM,EAAE;AACN,wBAAa,CAAC,WAAD,EAAc,CAAC,KAAD,EAAQ,MAAR,CAAd,CADP;AAEN,uBAAa,CAAE,+BAAF,EAAmC,0BAAnC,CAFP;AAGN,uBAAa,EAHP,CAIJ;AACA;AACA;;AANI,SALI;AAaZvB,QAAAA,KAAK,EAAC;AAAC,wBAAa,CAAC,MAAD,EAAQ,CAAC,SAAD,EAAY,CAAC,eAAD,EAAkB,OAAlB,CAAZ,EAAwC,KAAxC,CAAR,EAAwD,kBAAxD,EAA2E,kBAA3E,CAAd;AACC,6BAAmB,gBADpB;AAEC,6BAAmB,CAFpB;AAGA,0BAAe,CAAE,MAAF,EAAS,CAAC,MAAD,CAAT,EAAoB,CAApB,EAAwB,CAAxB,EAA4B,CAA5B,EAAgC,EAAhC,EAAqC,CAArC;AAHf;AAbM,OAAlB;AAoBE,WAAKR,GAAL,CAAS4B,EAAT,CAAY,OAAZ,EAAqB,SAArB,EAAgCV,CAAC,IAAK;AAChC;AACA,aAAK5B,QAAL,CAAc;AAACuB,UAAAA,eAAe,EAACK,CAAC,CAACc,QAAF,CAAW,CAAX,EAAcC,UAAd,CAAyBC;AAA1C,SAAd;AACA,aAAK5C,QAAL,CAAc;AAACwB,UAAAA,IAAI,EAACI,CAAC,CAACc,QAAF,CAAW,CAAX,EAAcC,UAAd,CAAyBE;AAA/B,SAAd;AACD,OAJL;AASV,UAAIC,SAAS,GAAC,IAAd;AACQ,WAAKpC,GAAL,CAAS4B,EAAT,CAAY,YAAZ,EAA0B,SAA1B,EAAqCV,CAAC,IAAK;AACzC,YAAIA,CAAC,CAACc,QAAF,CAAWK,MAAX,GAAoB,CAAxB,EAA2B;AACrB,cAAID,SAAJ,EAAe;AACX,iBAAKpC,GAAL,CAASsC,eAAT,CACA;AAAEjC,cAAAA,MAAM,EAAE,qBAAV;AAAiCT,cAAAA,EAAE,EAACwC,SAApC;AAA+CG,cAAAA,WAAW,EAAC;AAA3D,aADA,EAEA;AAAEC,cAAAA,KAAK,EAAE;AAAT,aAFA;AAIC;;AACLJ,UAAAA,SAAS,GAAGlB,CAAC,CAACc,QAAF,CAAW,CAAX,EAAcpC,EAA1B;AACA,eAAKI,GAAL,CAASsC,eAAT,CACA;AAAEjC,YAAAA,MAAM,EAAE,qBAAV;AAAiCT,YAAAA,EAAE,EAACwC,SAApC;AAA+CG,YAAAA,WAAW,EAAC;AAA3D,WADA,EAEA;AAAEC,YAAAA,KAAK,EAAE;AAAT,WAFA;AAIC;AACJ,OAdL;AAgBA,WAAKxC,GAAL,CAAS4B,EAAT,CAAY,YAAZ,EAA0B,SAA1B,EAAqCV,CAAC,IAAK;AACzC,YAAIkB,SAAJ,EAAe;AACH,eAAKpC,GAAL,CAASsC,eAAT,CACA;AAAEjC,YAAAA,MAAM,EAAE,qBAAV;AAAiCT,YAAAA,EAAE,EAACwC,SAApC;AAA+CG,YAAAA,WAAW,EAAC;AAA3D,WADA,EAEA;AAAEC,YAAAA,KAAK,EAAE;AAAT,WAFA;AAID;;AACDJ,QAAAA,SAAS,GAAG,IAAZ;AACH,OART;AAaH,KAxHD;AA2HH;;AACDK,EAAAA,kBAAkB,CAACC,SAAD,EAAYC,SAAZ,EAAuB;AACrC;AAEA,QAAIA,SAAS,KAAK,KAAK9C,KAAvB,EAA8B;AAC5B,UAAImB,QAAQ,GAAG,EAAf;AACAxC,MAAAA,GAAG,CAACwB,GAAJ,CAAQkB,CAAC,IAAIA,CAAC,CAACC,KAAF,KAAU,KAAKtB,KAAL,CAAWgB,eAArB,GAAsCG,QAAQ,CAACI,IAAT,CAAcF,CAAd,CAAtC,GAAyD,IAAtE;AACAG,MAAAA,OAAO,CAACC,GAAR,CAAYN,QAAZ;AAEA,UAAI4B,eAAe,GAAG,CAAC,OAAD,EAAU,CAAC,KAAD,EAAQ,YAAR,CAAV,CAAtB,CAL4B,CAO5B;;AACA5B,MAAAA,QAAQ,CAAC6B,OAAT,CAAiB,UAAUC,GAAV,EAAe;AAEhC;AACA,YAAIC,KAAK,GAAGD,GAAG,CAAC,KAAD,CAAH,GAAW,OAAX,GAAqB,GAAjC;AACA,YAAIE,KAAK,GAAG,YAAWD,KAAX,GAAmB,MAA/B;AAEAH,QAAAA,eAAe,CAACxB,IAAhB,CAAqB0B,GAAG,CAAC,KAAD,CAAxB,EAAiCE,KAAjC;AAEC,OARD;AAUAJ,MAAAA,eAAe,CAACxB,IAAhB,CAAqB,KAAKvB,KAAL,CAAWgB,eAAhC,EAAiD,QAAjD;AAEAQ,MAAAA,OAAO,CAACC,GAAR,CAAYsB,eAAZ,EApB4B,CAsB5B;;AACAA,MAAAA,eAAe,CAACxB,IAAhB,CAAqB,kBAArB,EAvB4B,CAyB5B;;AACA,WAAKtB,MAAL,CAAY,SAAZ;AACA,WAAKE,GAAL,CAASI,QAAT,CAAkB;AAChBR,QAAAA,EAAE,EAAE,SADY;AAEhBS,QAAAA,MAAM,EAAC,qBAFS;AAGhBC,QAAAA,IAAI,EAAE,MAHU;AAIhB,wBAAe,oBAJC;AAKhB;AACAE,QAAAA,KAAK,EAAE;AACL,wBAAcoC,eADT;AAEL,0BAAgB;AAFX;AANS,OAAlB;AAYH;AACF;;AAoCDK,EAAAA,MAAM,GAAG;AACL,UAAM;AAAErC,MAAAA;AAAF,QAAqB,KAAKf,KAAhC;AACA,wBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAEpB,OAAO,CAACyE,OAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAAmC,KAAKrD,KAAL,CAAWiB,IAA9C,CADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAiB,KAAKjB,KAAL,CAAWY,GAA5B,mBAA8C,KAAKZ,KAAL,CAAWa,GAAzD,eAAuE,KAAKb,KAAL,CAAWc,IAAlF,CAFF,eAGE;AAAK,MAAA,GAAG,EAAEwC,EAAE,IAAI,KAAK1B,YAAL,GAAoB0B,EAApC;AAAwC,MAAA,SAAS,EAAE1E,OAAO,CAACgD,YAA3D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHF,CADF;AAOD;;AA3PuC;;AA6P1CrD,QAAQ,CAAC6E,MAAT,eAAgB,oBAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAAhB,EAAiCG,QAAQ,CAACC,cAAT,CAAwB,KAAxB,CAAjC","sourcesContent":["import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport mapboxgl from 'mapbox-gl';\r\nimport axios from 'axios';\r\nimport Select from 'react-select';\r\nimport sci from './sci.json';\r\nimport classes from './Site.module.css';\r\n//iso_3166_1_alpha_3\r\n///6808: 520  baseline\r\n//// divide 20% percentile per country//////\r\n\r\n//// Access token for Africapolis mapbox account\r\nmapboxgl.accessToken = 'pk.eyJ1IjoibWttZCIsImEiOiJjajBqYjJpY2owMDE0Mndsbml0d2V1ZXczIn0.el8wQmA-TSJp2ggX8fJ1rA';\r\n\r\n\r\n\r\n\r\n//////////////////\r\n\r\nconst agglomeration_fill_color =[\r\n  \"step\",\r\n  [\"get\", \"Population_2015\"],\r\n  \"hsla(0, 0%, 8%, 0.5)\",\r\n  10000,\r\n  \"hsla(55, 30%, 93%, 0.5)\",\r\n  30000,\r\n  \"hsla(60, 100%, 90%, 0.5)\",\r\n  100000,\r\n  \"hsla(98, 55%, 81%, 0.5)\",\r\n  300000,\r\n  \"hsla(166, 44%, 65%, 0.5)\",\r\n  1000000,\r\n  \"hsla(186, 53%, 51%, 0.5)\",\r\n  3000000,\r\n  \"hsla(197, 74%, 43%, 0.5)\",\r\n  11847635,\r\n  \"hsla(197, 74%, 43%, 0.5)\"\r\n ]\r\n const agglomeration_stroke_color =[\r\n  \"step\",\r\n  [\"get\", \"Population_2015\"],\r\n  \"hsla(0, 0%, 8%, 1)\",\r\n  10000,\r\n  \"hsla(55, 30%, 93%, 1)\",\r\n  30000,\r\n  \"hsla(60, 100%, 90%, 1)\",\r\n  100000,\r\n  \"hsla(98, 55%, 81%, 1)\",\r\n  300000,\r\n  \"hsla(166, 44%, 65%, 1)\",\r\n  1000000,\r\n  \"hsla(186, 53%, 51%, 1)\",\r\n  3000000,\r\n  \"hsla(197, 74%, 43%, 1)\",\r\n  11847635,\r\n  \"hsla(197, 74%, 43%, 1)\"\r\n ]\r\n\r\n// const options = [];\r\n// country_label.map(v=>{return options.push({label:v, value:v})});\r\n// Values.map(v=>{return options.push({label:agglo_label[v[1]-1]+\", \"+country_label[v[0]-1], value:v})});\r\n// console.log(Values.map(v=>{return {label:agglo_label[v[1]]+\", \"+country_label[v[0]], value:v}}))\r\n\r\n\r\n  const options = [{ label:\"Angola\",value:1 }, { label:\"Burundi\",value:2 }, { label:\"Benin\",value:3 }, { label:\"Burkina Faso\",value:4 }, { label:\"Botswana\",value:5 }, { label:\"Central African Republic\",value:6 }, { label:\"Cote d`Ivoire\",value:7 }, { label:\"Cameroon\",value:8 }, { label:\"Democratic Republic of the Congo\",value:9 }, { label:\"Republic of the Congo\",value:10 }, { label:\"Cabo Verde\",value:11 }, { label:\"Djibouti\",value:12 }, { label:\"Algeria\",value:13 }, { label:\"Egypt\",value:14 }, { label:\"Eritrea\",value:15 }, { label:\"Ethiopia\",value:16 }, { label:\"Gabon\",value:17 }, { label:\"Ghana\",value:18 }, { label:\"Guinea\",value:19 }, { label:\"The Gambia\",value:20 }, { label:\"Guinea-Bissau\",value:21 }, { label:\"Equatorial Guinea\",value:22 }, { label:\"Kenya\",value:23 }, { label:\"Liberia\",value:24 }, { label:\"Libya\",value:25 }, { label:\"Lesotho\",value:26 }, { label:\"Morocco\",value:27 }, { label:\"Mali\",value:28 }, { label:\"Mozambique\",value:29 }, { label:\"Mauritania\",value:30 }, { label:\"Malawi\",value:31 }, { label:\"Namibia\",value:32 }, { label:\"Niger\",value:33 }, { label:\"Nigeria\",value:34 }, { label:\"Rwanda\",value:35 }, { label:\"Sudan\",value:36 }, { label:\"Senegal\",value:37 }, { label:\"Sierra Leone\",value:38 }, { label:\"Somalia\",value:39 }, { label:\"South Sudan\",value:40 }, { label:\"Sao Tome and Principe\",value:41 }, { label:\"Kingdom of Eswatini\",value:42 }, { label:\"Chad\",value:43 }, { label:\"Togo\",value:44}, { label:\"Tunisia\",value:45 }, { label:\"Tanzania\",value:46 }, { label:\"Uganda\",value:47 }, { label:\"South Africa\",value:48 }, { label:\"Zambia\",value:49 }, { label:\"Zimbabwe\",value:50 }];\r\n\r\n//// Basic setting of the map\r\nclass Application extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      lng: 5,\r\n      lat: 0,\r\n      zoom: 2,\r\n      selectedOption: {label: 'Africa', value: ''},\r\n      selectedCountry: \"AE\",\r\n      name: \"Not selected\"\r\n    };\r\n  }\r\ncomponentDidMount() {\r\n//// Initial map setting\r\n\r\nlet selected = [];\r\nlet scidata= [];\r\nsci.map(e => e.start===this.state.selectedCountry? selected.push(e) : null)\r\nconsole.log(selected)\r\nselected.map(e => scidata.push(e.sci))\r\nconsole.log(scidata)\r\n//Object.keys(selected).map(e => console.log(e))\r\n\r\n\r\n\r\n     this.map = new mapboxgl.Map({\r\n      container: this.mapContainer,\r\n      style: 'mapbox://styles/mkmd/ckguwdhux0j7719p9rz2hpmpi', /// Select mapstyle from mapbox studio\r\n      center: [this.state.lng, this.state.lat],\r\n      zoom: this.state.zoom\r\n    });\r\n    // this.map.on('move', () => {\r\n    //   this.setState({\r\n    //   lng: this.map.getCenter().lng.toFixed(4),\r\n    //   lat: this.map.getCenter().lat.toFixed(4),\r\n    //   zoom: this.map.getZoom().toFixed(2)\r\n    //   });\r\n    // });\r\n//// Import Africapolis agglomerations from mapbox\r\n    this.map.on('load', () => {\r\n// Add Country shape\r\n      this.map.addSource('africapolis_country', { type: 'vector', url: 'mapbox://mapbox.country-boundaries-v1'});\r\n// Add Agglomerations\r\n  //    this.map.addSource('africapolis_agglos', { type: 'vector', url: 'mapbox://mkmd.3e0rk98j'});\r\n// Add Country label\r\n  //    this.map.addSource('africapolis_country_label', { type: 'vector', url: 'mapbox://mkmd.6v0ckax4'});\r\n// Add Region labelled\r\n  //    this.map.addSource('africapolis_region_label', { type: 'vector', url: 'mapbox://mkmd.3yut44ue'});\r\n\r\n// Add Country layer\r\n      this.map.addLayer({\r\n            id: 'country',\r\n            source:'africapolis_country',\r\n            type: 'fill',\r\n            'source-layer':'country_boundaries',\r\n            //filter:[\"==\",\"Region_ID\",1],\r\n            paint: {\r\n\r\n              'fill-color': '#fdfdf5',\r\n              'fill-opacity': ['case',['boolean', ['feature-state', 'hover'], false],0.2,0]\r\n            }\r\n        });\r\n\r\n\r\n\r\n// Add Agglomerations layer\r\n      this.map.addLayer({\r\n            id: 'agglomerations',\r\n            source:'africapolis_agglos',\r\n            type: 'circle',\r\n            'source-layer':'africapolis2020-3mv6ux',\r\n            filter:[\">\",\"Population_2015\",0],\r\n            paint: {\r\n                'circle-stroke-color': agglomeration_stroke_color,\r\n                'circle-stroke-width': 3,\r\n                'circle-color': agglomeration_fill_color\r\n            }\r\n        });\r\n\r\n//mkmd.ck19bzbfg07z42tmz06bk8soe-6dzi4\r\n//AfricaContinent\r\n//ISO3_CODE\r\n      this.map.addLayer({\r\n            id: 'country_labels',\r\n            source:'africapolis_country_label',\r\n            type: 'symbol',\r\n            'source-layer':'OECD_countryname-0ogi2f',\r\n            filter:[ \"all\", [ \"match\", [\"get\", \"ISO3_CODE\"], [ \"AGO\", \"BDI\", \"BEN\", \"BFA\", \"BWA\", \"CAF\", \"CIV\", \"CMR\", \"COD\", \"COG\", \"CPV\", \"DJI\", \"DZA\", \"EGY\", \"ERI\", \"ETH\", \"GAB\", \"GHA\", \"GIN\", \"GMB\", \"GNB\", \"GNQ\", \"KEN\", \"LBR\", \"LBY\", \"LSO\", \"MAR\", \"MLI\", \"MOZ\", \"MRT\", \"MWI\", \"NAM\", \"NER\", \"NGA\", \"RWA\", \"SDN\", \"SEN\", \"SLE\", \"SOM\", \"SSD\", \"STP\", \"SWZ\", \"TCD\", \"TGO\", \"TUN\", \"TZA\", \"UGA\", \"ZAF\", \"ZMB\", \"ZWE\",\"MDG\", \"SYC\", \"COM\" ], true, false ]],\r\n            layout: {\r\n              'text-field':[\"get\",\"NAME_EN\"],\r\n              'text-font': [ \"Helvetica Neue LT Std 75 Bold\", \"Arial Unicode MS Regular\"],\r\n              //'text-size': [\"interpolate\", [\"linear\"], [\"zoom\"], 2, [\"step\", [\"get\", \"scalerank\"], 10, 3, 8, 5, 5 ], 9, [\"step\", [\"get\", \"scalerank\"], 35, 3, 27, 5, 22 ] ],\r\n            },\r\n            paint:{'text-opacity':[ \"step\",[\"zoom\"],  0,  3,  1,  22,  1],\r\n                   'text-color':['case',['boolean', ['feature-state', 'hover'], false],\"hsl(0,0%,0%)\",\"#6d6d6f\"],\r\n                   'text-halo-color': \"hsl(0, 0%, 100%)\",\r\n                   'text-halo-width': 1.25\r\n                 }\r\n        });\r\n\r\n        this.map.addLayer({\r\n              id: 'region_labels',\r\n              source:'africapolis_region_label',\r\n              type: 'symbol',\r\n              'source-layer':'region-78kdxj',\r\n              layout: {\r\n                'text-field':[\"to-string\", [\"get\", \"Name\"]],\r\n                'text-font': [ \"Helvetica Neue LT Std 75 Bold\", \"Arial Unicode MS Regular\"],\r\n                'text-size': 26\r\n                  //'circle-stroke-color': agglomeration_stroke_color,\r\n                  //'circle-stroke-width': 3,\r\n                  //'circle-color': agglomeration_fill_color\r\n              },\r\n              paint:{'text-color':['case',['boolean', ['feature-state', 'hover'], false], \"hsl(60,100%,50%)\",\"hsl(0, 0%, 100%)\"],\r\n                     'text-halo-color': \"hsl(0, 0%, 0%)\",\r\n                     'text-halo-width': 3,\r\n                    'text-opacity':[ \"step\",[\"zoom\"],  1,  3,  0,  22,  0]\r\n              }\r\n          });\r\n\r\n          this.map.on('click', 'country', e =>  {\r\n                //console.log(e.features[0].properties.iso_3166_1)\r\n                this.setState({selectedCountry:e.features[0].properties.iso_3166_1})\r\n                this.setState({name:e.features[0].properties.name_en})\r\n              });\r\n\r\n\r\n\r\n\r\nvar hoveredID=null;\r\n        this.map.on('mouseenter', 'country', e =>  {\r\n          if (e.features.length > 0) {\r\n                if (hoveredID) {\r\n                    this.map.setFeatureState(\r\n                    { source: 'africapolis_country', id:hoveredID, sourceLayer:'country_boundaries' },\r\n                    { hover: false }\r\n                    );\r\n                    }\r\n                hoveredID = e.features[0].id;\r\n                this.map.setFeatureState(\r\n                { source: 'africapolis_country', id:hoveredID, sourceLayer:'country_boundaries' },\r\n                { hover: true }\r\n                );\r\n                }\r\n            });\r\n\r\n        this.map.on('mouseleave', 'country', e =>  {\r\n          if (hoveredID) {\r\n                      this.map.setFeatureState(\r\n                      { source: 'africapolis_country', id:hoveredID, sourceLayer:'country_boundaries' },\r\n                      { hover: false }\r\n                      );\r\n                    }\r\n                    hoveredID = null;\r\n                });\r\n\r\n\r\n\r\n\r\n    });\r\n\r\n\r\n}\r\ncomponentDidUpdate(prevProps, prevState) {\r\n    //if( prevState.selectedOption !== this.state.selectedOption || prevState.update[0] !== this.state.update[0]) {\r\n\r\n    if( prevState !== this.state) {\r\n      let selected = [];\r\n      sci.map(e => e.start===this.state.selectedCountry? selected.push(e) : null)\r\n      console.log(selected)\r\n\r\n      let matchExpression = ['match', ['get', 'iso_3166_1']];\r\n\r\n      // Calculate color values for each country based on 'hdi' value\r\n      selected.forEach(function (row) {\r\n\r\n      // Convert the range of data values to a suitable color\r\n      var green = row['sci']/1000000 * 255;\r\n      var color = 'rgb(0, '+ green + ', 0)';\r\n\r\n      matchExpression.push(row['end'], color);\r\n\r\n      });\r\n\r\n      matchExpression.push(this.state.selectedCountry, 'yellow');\r\n\r\n      console.log(matchExpression)\r\n\r\n      // Last value is the default, used where there is no data\r\n      matchExpression.push('rgba(0, 0, 0, 0)');\r\n\r\n      // //console.log(this.state.selectedOption, prevState.selectedOption);\r\n      this.remove('country');\r\n      this.map.addLayer({\r\n        id: 'country',\r\n        source:'africapolis_country',\r\n        type: 'fill',\r\n        'source-layer':'country_boundaries',\r\n        //filter:[\"==\",\"Region_ID\",1],\r\n        paint: {\r\n          'fill-color': matchExpression,\r\n          'fill-opacity': 0.7\r\n        }\r\n      });\r\n\r\n  }\r\n}\r\n\r\nonUpdate = update => {\r\n  this.setState({ update })\r\n}\r\n\r\nonChange = values => {\r\n  this.setState({ values })\r\n}\r\n\r\nonFilter = filters => {\r\n  this.setState({[filters.target.id]: !this.state[filters.target.id]});\r\n}\r\n\r\nremove = obj => {\r\n    this.map.removeLayer(obj)\r\n}\r\n\r\nadd_shape = (obj,filter1) => {\r\n    this.map.addLayer({\r\n        id: obj,\r\n        source:'africapolis_country',\r\n        type: 'fill',\r\n        'source-layer':'africacontinent_complete-ays128',\r\n        filter:filter1,\r\n        paint: {\r\n          'fill-color': '#fdfdf5',\r\n          'fill-opacity': [\"interpolate\",[\"linear\"],[\"zoom\"], 0,1,5,0] //8.5\r\n        }\r\n    }\r\n   // layer order\r\n  );\r\n    //console.log(this.map.getSource(\"africapolis_country\"))\r\n\r\n}\r\n\r\nrender() {\r\n    const { selectedOption } = this.state;\r\n    return (\r\n      <div>\r\n        <div className={classes.topleft}> {this.state.name}</div>\r\n        <div>Longitude: {this.state.lng} | Latitude: {this.state.lat} | Zoom: {this.state.zoom}</div>\r\n        <div ref={el => this.mapContainer = el} className={classes.mapContainer} />\r\n      </div>\r\n    )\r\n  }\r\n}\r\nReactDOM.render(<Application />, document.getElementById('app'));\r\n"]},"metadata":{},"sourceType":"module"}