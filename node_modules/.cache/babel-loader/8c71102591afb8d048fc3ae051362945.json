{"ast":null,"code":"var _jsxFileName = \"C:\\\\mapboxAndReact\\\\src\\\\index.js\";\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport mapboxgl from 'mapbox-gl';\nimport axios from 'axios';\nimport Select from 'react-select';\nimport { Slider, Handles, Tracks } from 'react-compound-slider'; //// Access token for Africapolis mapbox account\n\nmapboxgl.accessToken = 'pk.eyJ1IjoibWttZCIsImEiOiJjajBqYjJpY2owMDE0Mndsbml0d2V1ZXczIn0.el8wQmA-TSJp2ggX8fJ1rA'; /////////////// Slider\n\nexport function Handle({\n  handle: {\n    id,\n    value,\n    percent\n  },\n  getHandleProps\n}) {\n  return /*#__PURE__*/React.createElement(\"div\", Object.assign({\n    style: {\n      left: `${percent}%`,\n      position: 'absolute',\n      marginLeft: -15,\n      marginTop: 25,\n      zIndex: 2,\n      width: 30,\n      height: 30,\n      border: 0,\n      textAlign: 'center',\n      cursor: 'pointer',\n      borderRadius: '50%',\n      backgroundColor: '#2C4870',\n      color: '#333'\n    }\n  }, getHandleProps(id), {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 17,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      fontFamily: 'Roboto',\n      fontSize: 11,\n      marginTop: -15\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 7\n    }\n  }, value));\n}\nconst sliderStyle = {\n  // Give the slider some width\n  position: 'relative',\n  width: '30%',\n  height: 50\n};\nconst railStyle = {\n  position: 'absolute',\n  width: '100%',\n  height: 10,\n  marginTop: 35,\n  borderRadius: 5,\n  backgroundColor: '#8B9CB6'\n}; //////////////////\n\nconst ISO2toID = {\n  AO: 1,\n  BI: 2,\n  BJ: 3,\n  BF: 4,\n  BW: 5,\n  CF: 6,\n  CI: 7,\n  CM: 8,\n  CD: 9,\n  CG: 10,\n  CV: 11,\n  DJ: 12,\n  DZ: 13,\n  EG: 14,\n  ER: 15,\n  ET: 16,\n  GA: 17,\n  GH: 18,\n  GN: 19,\n  GM: 20,\n  GW: 21,\n  GQ: 22,\n  KE: 23,\n  LR: 24,\n  LY: 25,\n  LS: 26,\n  MA: 27,\n  ML: 28,\n  MZ: 29,\n  MR: 30,\n  MW: 31,\n  NA: 32,\n  NE: 33,\n  NG: 34,\n  RW: 35,\n  SD: 36,\n  SN: 37,\n  SL: 38,\n  SO: 39,\n  SS: 40,\n  ST: 41,\n  SZ: 42,\n  TD: 43,\n  TG: 44,\n  TN: 45,\n  TZ: 46,\n  UG: 47,\n  ZA: 48,\n  ZM: 49,\n  ZW: 50\n};\nconst ID2toISO3 = {\n  1: \"AGO\",\n  2: \"BDI\",\n  3: \"BEN\",\n  4: \"BFA\",\n  5: \"BWA\",\n  6: \"CAF\",\n  7: \"CIV\",\n  8: \"CMR\",\n  9: \"COD\",\n  10: \"COG\",\n  11: \"CPV\",\n  12: \"DJI\",\n  13: \"DZA\",\n  14: \"EGY\",\n  15: \"ERI\",\n  16: \"ETH\",\n  17: \"GAB\",\n  18: \"GHA\",\n  19: \"GIN\",\n  20: \"GMB\",\n  21: \"GNB\",\n  22: \"GNQ\",\n  23: \"KEN\",\n  24: \"LBR\",\n  25: \"LBY\",\n  26: \"LSO\",\n  27: \"MAR\",\n  28: \"MLI\",\n  29: \"MOZ\",\n  30: \"MRT\",\n  31: \"MWI\",\n  32: \"NAM\",\n  33: \"NER\",\n  34: \"NGA\",\n  35: \"RWA\",\n  36: \"SDN\",\n  37: \"SEN\",\n  38: \"SLE\",\n  39: \"SOM\",\n  40: \"SSD\",\n  41: \"STP\",\n  42: \"SWZ\",\n  43: \"TCD\",\n  44: \"TGO\",\n  45: \"TUN\",\n  46: \"TZA\",\n  47: \"UGA\",\n  48: \"ZAF\",\n  49: \"ZMB\",\n  50: \"ZWE\"\n};\nconst countryBound = {\n  1: [[11.67880883351409, -18.0395441112506], [24.0827635146694, -4.377635366107427]],\n  2: [[28.993800497072044, -4.46551358137126], [30.8450390589687, -2.312156363797868]],\n  3: [[0.774558544224476, 6.22447495853009], [3.85082880284835, 12.393508622871479]],\n  4: [[-5.520794727315028, 9.39964017278909], [2.40608025898589, 15.085258417277188]],\n  5: [[20.001242333380191, -26.8837918049531], [29.3618491231722, -17.781364563205884]],\n  6: [[14.419995451249584, 2.21983656110873], [27.4611737379457, 11.009192333734617]],\n  7: [[-8.569597716425136, 4.35678586749077], [-2.49396129202089, 10.734519638596169]],\n  8: [[8.492690805810334, 1.65404064168932], [16.1943512292781, 13.080169051742061]],\n  9: [[12.206163360999454, -13.4581143630142], [31.3065062339817, 5.373053530527471]],\n  10: [[11.206388845056409, -5.02585440304395], [18.6498697204794, 3.703069114856376]],\n  11: [[-25.357213543522146, 14.8050880064408], [-22.6764804894878, 17.194676527218675]],\n  12: [[41.771301520025517, 10.910318687075], [43.4137973572072, 12.706622709944]],\n  13: [[-8.673969078782633, 18.9635345895493], [11.9809701071419, 37.09150628917579]],\n  14: [[24.697996257418708, 22.0013421472637], [35.7615737570691, 31.664110210683646]],\n  15: [[36.437281372495079, 12.3605223286841], [43.1336269463708, 18.002201465540395]],\n  16: [[32.998438894493276, 3.4009078412285], [47.9842742919989, 14.892966221704711]],\n  17: [[8.695935814827443, -3.97664306377109], [14.5024185687666, 2.324250541417371]],\n  18: [[-3.257547122710676, 4.73578730703557], [1.19206530262996, 11.173995950817698]],\n  19: [[-15.079191428377445, 7.20230122963262], [-7.64122957762785, 12.673679033707842]],\n  20: [[-16.826079936892199, 13.0527230912037], [-13.7937487859001, 13.827261735338197]],\n  21: [[-16.716210858836821, 10.9267692162175], [-13.6344428845149, 12.684674465103612]],\n  22: [[5.603193718085414, -1.46069231784424], [11.3327510702054, 3.785449614422333]],\n  23: [[33.910335195172479, -4.67975402178414], [41.8976211272234, 4.620420513282312]],\n  24: [[-11.492059789361775, 4.35124553384174], [-7.36655688248939, 8.553673842533343]],\n  25: [[9.388093959395881, 19.5073822641284], [25.148468001036, 33.169291009271674]],\n  26: [[27.027195141422098, -30.6577392328189], [29.4662204855297, -28.570269367717884]],\n  27: [[-13.167520611755194, 27.6594718132624], [-0.994299518106317, 35.910435009056016]],\n  28: [[-12.233633448284422, 10.1632260034789], [4.24084698276459, 25.000708313044015]],\n  29: [[30.218810884823739, -26.8673412758106], [40.8374143565547, -10.475241344327628]],\n  30: [[-17.067787646818925, 14.7171671732258], [-4.82863658274659, 27.296920902860109]],\n  31: [[32.679827091722899, -17.1221500948736], [35.9153819427564, -9.371052848075948]],\n  32: [[11.717292843399271, -28.9713042880053], [25.2583370790913, -16.957389095741675]],\n  33: [[0.164802208197493, 11.6958527626051], [15.9966039359589, 23.523016092945412]],\n  34: [[2.669757522728581, 4.27986046567154], [14.6781749992943, 13.893191705761652]],\n  35: [[28.856485458478389, -2.83951089128324], [30.8944758822985, -1.054159681858877]],\n  36: [[21.841485463881099, 8.68549116542911], [38.5796857766238, 22.226578019072377]],\n  37: [[-17.518238081460641, 12.3056304076076], [-11.3437280103967, 16.694767960271577]],\n  38: [[-13.310333366046727, 6.92762853449416], [-10.2835212397281, 9.998422386395802]],\n  39: [[40.991222542242099, -1.66389470891022], [51.4120787206538, 11.97602317344149]],\n  40: [[24.154191200790834, 3.48882867444349], [35.9483682369437, 12.199554327204311]],\n  41: [[6.471150911132696, 0.027995333650139], [7.46542771137786, 1.70347746501912]],\n  42: [[30.79560223563891, -27.3178130194279], [32.1359794171438, -25.719213671927008]],\n  43: [[13.475155474334223, 7.43853253283703], [24.0003830151035, 23.451588406824072]],\n  44: [[-0.148311878875006, 6.10365306702988], [1.79632392295911, 11.141009656630501]],\n  45: [[7.52585996610344, 30.2413525296127], [11.5964283339481, 37.349728455171743]],\n  46: [[29.328905446936076, -11.7441908397112], [40.4419197699163, -0.988272329386561]],\n  47: [[29.5760895635851, -1.48264056268463], [35.0364719362645, 4.213930495248093]],\n  48: [[16.458028493020869, -46.9784114781806], [38.0028518078575, -22.126605626189018]],\n  49: [[22.000791365266281, -18.0779855031847], [33.6850993233638, -8.222967862143477]],\n  50: [[25.23634621629985, -22.4177288504699], [33.0588711492188, -15.611514198538828]]\n};\n\nfunction ISO2toID_f(countryCode) {\n  return ISO2toID[countryCode];\n}\n\nfunction IDtoISO3_f(countryCode) {\n  return ID2toISO3[countryCode];\n}\n\nfunction getCountryBound(countryCode) {\n  return countryBound[countryCode];\n}\n\nfunction getKeyByValue(object, value) {\n  return Object.keys(object).find(key => object[key] === value);\n}\n\nconst agglomeration_fill_color = [\"step\", [\"get\", \"Population_2015\"], \"hsla(0, 0%, 8%, 0.5)\", 10000, \"hsla(55, 30%, 93%, 0.5)\", 30000, \"hsla(60, 100%, 90%, 0.5)\", 100000, \"hsla(98, 55%, 81%, 0.5)\", 300000, \"hsla(166, 44%, 65%, 0.5)\", 1000000, \"hsla(186, 53%, 51%, 0.5)\", 2000000, \"hsla(197, 74%, 43%, 0.5)\", 11847635, \"hsla(197, 74%, 43%, 0.5)\"];\nconst agglomeration_stroke_color = [\"step\", [\"get\", \"Population_2015\"], \"hsla(0, 0%, 8%, 1)\", 10000, \"hsla(55, 30%, 93%, 1)\", 30000, \"hsla(60, 100%, 90%, 1)\", 100000, \"hsla(98, 55%, 81%, 1)\", 300000, \"hsla(166, 44%, 65%, 1)\", 1000000, \"hsla(186, 53%, 51%, 1)\", 2000000, \"hsla(197, 74%, 43%, 1)\", 11847635, \"hsla(197, 74%, 43%, 1)\"];\nconst options = [{\n  label: \"Angola\",\n  value: 1\n}, {\n  label: \"Burundi\",\n  value: 2\n}, {\n  label: \"Benin\",\n  value: 3\n}, {\n  label: \"Burkina Faso\",\n  value: 4\n}, {\n  label: \"Botswana\",\n  value: 5\n}, {\n  label: \"Central African Republic\",\n  value: 6\n}, {\n  label: \"Cote d`Ivoire\",\n  value: 7\n}, {\n  label: \"Cameroon\",\n  value: 8\n}, {\n  label: \"Democratic Republic of the Congo\",\n  value: 9\n}, {\n  label: \"Republic of the Congo\",\n  value: 10\n}, {\n  label: \"Cabo Verde\",\n  value: 11\n}, {\n  label: \"Djibouti\",\n  value: 12\n}, {\n  label: \"Algeria\",\n  value: 13\n}, {\n  label: \"Egypt\",\n  value: 14\n}, {\n  label: \"Eritrea\",\n  value: 15\n}, {\n  label: \"Ethiopia\",\n  value: 16\n}, {\n  label: \"Gabon\",\n  value: 17\n}, {\n  label: \"Ghana\",\n  value: 18\n}, {\n  label: \"Guinea\",\n  value: 19\n}, {\n  label: \"The Gambia\",\n  value: 20\n}, {\n  label: \"Guinea-Bissau\",\n  value: 21\n}, {\n  label: \"Equatorial Guinea\",\n  value: 22\n}, {\n  label: \"Kenya\",\n  value: 23\n}, {\n  label: \"Liberia\",\n  value: 24\n}, {\n  label: \"Libya\",\n  value: 25\n}, {\n  label: \"Lesotho\",\n  value: 26\n}, {\n  label: \"Morocco\",\n  value: 27\n}, {\n  label: \"Mali\",\n  value: 28\n}, {\n  label: \"Mozambique\",\n  value: 29\n}, {\n  label: \"Mauritania\",\n  value: 30\n}, {\n  label: \"Malawi\",\n  value: 31\n}, {\n  label: \"Namibia\",\n  value: 32\n}, {\n  label: \"Niger\",\n  value: 33\n}, {\n  label: \"Nigeria\",\n  value: 34\n}, {\n  label: \"Rwanda\",\n  value: 35\n}, {\n  label: \"Sudan\",\n  value: 36\n}, {\n  label: \"Senegal\",\n  value: 37\n}, {\n  label: \"Sierra Leone\",\n  value: 38\n}, {\n  label: \"Somalia\",\n  value: 39\n}, {\n  label: \"South Sudan\",\n  value: 40\n}, {\n  label: \"Sao Tome and Principe\",\n  value: 41\n}, {\n  label: \"Kingdom of Eswatini\",\n  value: 42\n}, {\n  label: \"Chad\",\n  value: 43\n}, {\n  label: \"Togo\",\n  value: 44\n}, {\n  label: \"Tunisia\",\n  value: 45\n}, {\n  label: \"Tanzania\",\n  value: 46\n}, {\n  label: \"Uganda\",\n  value: 47\n}, {\n  label: \"South Africa\",\n  value: 48\n}, {\n  label: \"Zambia\",\n  value: 49\n}, {\n  label: \"Zimbabwe\",\n  value: 50\n}]; //// Basic setting of the map\n\nclass Application extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.onUpdate = update => {\n      this.setState({\n        update\n      });\n    };\n\n    this.onChange = values => {\n      this.setState({\n        values\n      });\n    };\n\n    this.remove = obj => {\n      this.map.removeLayer(obj);\n    };\n\n    this.add_point = (obj, filter1, filter2) => {\n      this.map.addLayer({\n        id: obj,\n        source: 'africapolis_agglos',\n        type: 'circle',\n        'source-layer': 'africapolis2020-3mv6ux',\n        filter: [\"all\", filter1, filter2],\n        paint: {\n          'circle-stroke-color': agglomeration_stroke_color,\n          'circle-stroke-width': 3,\n          'circle-color': agglomeration_fill_color\n        }\n      });\n    };\n\n    this.add_shape = (obj, filter1) => {\n      this.map.addLayer({\n        id: obj,\n        source: 'africapolis_country',\n        type: 'fill',\n        'source-layer': 'africacontinent_complete-ays128',\n        filter: filter1,\n        paint: {\n          'fill-color': '#fdfdf5',\n          'fill-opacity': [\"interpolate\", [\"linear\"], [\"zoom\"], 0, 1, 5, 0] //8.5\n\n        }\n      }); //console.log(this.map.getSource(\"africapolis_country\"))\n    };\n\n    this.state = {\n      lng: 5,\n      lat: 0,\n      zoom: 3,\n      selectedOption: {\n        label: 'Africa',\n        value: ''\n      },\n      values: 2015,\n      update: [2015]\n    };\n  }\n\n  componentDidMount() {\n    //// Initial map setting\n    this.map = new mapboxgl.Map({\n      container: this.mapContainer,\n      style: 'mapbox://styles/mkmd/ck9eg99c72gwg1imtdbugc9yn',\n      /// Select mapstyle from mapbox studio\n      center: [this.state.lng, this.state.lat],\n      zoom: this.state.zoom\n    });\n    this.map.on('move', () => {\n      this.setState({\n        lng: this.map.getCenter().lng.toFixed(4),\n        lat: this.map.getCenter().lat.toFixed(4),\n        zoom: this.map.getZoom().toFixed(2)\n      });\n    }); //// Import Africapolis agglomerations from mapbox\n\n    this.map.on('load', () => {\n      // Add Country shape\n      this.map.addSource('africapolis_country', {\n        type: 'vector',\n        url: 'mapbox://mkmd.5xeh701b'\n      }); // Add Agglomerations\n\n      this.map.addSource('africapolis_agglos', {\n        type: 'vector',\n        url: 'mapbox://mkmd.3e0rk98j'\n      }); // Add Country label\n\n      this.map.addSource('africapolis_country_label', {\n        type: 'vector',\n        url: 'mapbox://mkmd.6v0ckax4'\n      }); // Add Region labelled\n\n      this.map.addSource('africapolis_region_label', {\n        type: 'vector',\n        url: 'mapbox://mkmd.3yut44ue'\n      }); // Add Country layer\n\n      this.map.addLayer({\n        id: 'country',\n        source: 'africapolis_country',\n        type: 'fill',\n        'source-layer': 'africacontinent_complete-ays128',\n        //filter:[\"==\",\"Region_ID\",1],\n        paint: {\n          'fill-color': '#fdfdf5',\n          'fill-opacity': 0.2\n        }\n      }); // Add Agglomerations layer\n\n      this.map.addLayer({\n        id: 'agglomerations',\n        source: 'africapolis_agglos',\n        type: 'circle',\n        'source-layer': 'africapolis2020-3mv6ux',\n        filter: [\">\", \"Population_2015\", 0],\n        paint: {\n          'circle-stroke-color': agglomeration_stroke_color,\n          'circle-stroke-width': 3,\n          'circle-color': agglomeration_fill_color\n        }\n      }); //mkmd.ck19bzbfg07z42tmz06bk8soe-6dzi4\n      //AfricaContinent\n      //ISO3_CODE\n\n      this.map.addLayer({\n        id: 'country_labels',\n        source: 'africapolis_country_label',\n        type: 'symbol',\n        'source-layer': 'OECD_countryname-0ogi2f',\n        filter: [\"all\", [\"match\", [\"get\", \"ISO3_CODE\"], [\"AGO\", \"BDI\", \"BEN\", \"BFA\", \"BWA\", \"CAF\", \"CIV\", \"CMR\", \"COD\", \"COG\", \"CPV\", \"DJI\", \"DZA\", \"EGY\", \"ERI\", \"ETH\", \"GAB\", \"GHA\", \"GIN\", \"GMB\", \"GNB\", \"GNQ\", \"KEN\", \"LBR\", \"LBY\", \"LSO\", \"MAR\", \"MLI\", \"MOZ\", \"MRT\", \"MWI\", \"NAM\", \"NER\", \"NGA\", \"RWA\", \"SDN\", \"SEN\", \"SLE\", \"SOM\", \"SSD\", \"STP\", \"SWZ\", \"TCD\", \"TGO\", \"TUN\", \"TZA\", \"UGA\", \"ZAF\", \"ZMB\", \"ZWE\", \"MDG\", \"SYC\", \"COM\"], true, false]],\n        layout: {\n          'text-field': [\"get\", \"NAME_EN\"],\n          'text-font': [\"Helvetica Neue LT Std 75 Bold\", \"Arial Unicode MS Regular\"],\n          'text-size': [\"interpolate\", [\"linear\"], [\"zoom\"], 2, [\"step\", [\"get\", \"scalerank\"], 10, 3, 8, 5, 5], 9, [\"step\", [\"get\", \"scalerank\"], 35, 3, 27, 5, 22]] //\n          //'circle-stroke-color': agglomeration_stroke_color,\n          //'circle-stroke-width': 3,\n          //'circle-color': agglomeration_fill_color\n\n        },\n        paint: {\n          'text-opacity': [\"step\", [\"zoom\"], 0, 3, 1, 22, 1],\n          'text-color': ['case', ['boolean', ['feature-state', 'hover'], false], \"hsl(0,0%,0%)\", \"#6d6d6f\"],\n          'text-halo-color': \"hsl(0, 0%, 100%)\",\n          'text-halo-width': 1.25\n        }\n      });\n      this.map.addLayer({\n        id: 'region_labels',\n        source: 'africapolis_region_label',\n        type: 'symbol',\n        'source-layer': 'region-78kdxj',\n        layout: {\n          'text-field': [\"to-string\", [\"get\", \"Name\"]],\n          'text-font': [\"Helvetica Neue LT Std 75 Bold\", \"Arial Unicode MS Regular\"],\n          'text-size': 26 //'circle-stroke-color': agglomeration_stroke_color,\n          //'circle-stroke-width': 3,\n          //'circle-color': agglomeration_fill_color\n\n        },\n        paint: {\n          'text-color': ['case', ['boolean', ['feature-state', 'hover'], false], \"hsl(60,100%,50%)\", \"hsl(0, 0%, 100%)\"],\n          'text-halo-color': \"hsl(0, 0%, 0%)\",\n          'text-halo-width': 3,\n          'text-opacity': [\"step\", [\"zoom\"], 1, 3, 0, 22, 0]\n        }\n      });\n      this.map.on('click', 'country_labels', e => {\n        if (e.features[0].layer.paint[\"text-opacity\"] === 1) {\n          this.setState({\n            selectedOption: {\n              value: getKeyByValue(ID2toISO3, e.features[0].properties.ISO3_CODE),\n              label: e.features[0].properties.NAME_EN\n            }\n          });\n          this.map.fitBounds(getCountryBound(this.state.selectedOption.value));\n        }\n      });\n      this.map.on('click', 'region_labels', e => {\n        if (e.features[0].layer.paint[\"text-opacity\"] === 1) {\n          this.setState({\n            selectedOption: {\n              value: e.features[0].properties.Region_ID,\n              label: e.features[0].properties.Name,\n              region: \"Yes\"\n            }\n          });\n        }\n      });\n      var hoveredID = null;\n      this.map.on('mouseenter', 'country_labels', e => {\n        if (e.features.length > 0) {\n          if (hoveredID) {\n            this.map.setFeatureState({\n              source: 'africapolis_country_label',\n              id: hoveredID,\n              sourceLayer: 'OECD_countryname-0ogi2f'\n            }, {\n              hover: false\n            });\n          }\n\n          hoveredID = e.features[0].id;\n          this.map.setFeatureState({\n            source: 'africapolis_country_label',\n            id: hoveredID,\n            sourceLayer: 'OECD_countryname-0ogi2f'\n          }, {\n            hover: true\n          });\n        }\n      });\n      this.map.on('mouseleave', 'country_labels', e => {\n        if (hoveredID) {\n          this.map.setFeatureState({\n            source: 'africapolis_country_label',\n            id: hoveredID,\n            sourceLayer: 'OECD_countryname-0ogi2f'\n          }, {\n            hover: false\n          });\n        }\n\n        hoveredID = null;\n      });\n      this.map.on('mouseenter', 'region_labels', e => {\n        console.log(e.features.length);\n\n        if (e.features.length > 0) {\n          if (hoveredID) {\n            this.map.setFeatureState({\n              source: 'africapolis_region_label',\n              id: hoveredID,\n              sourceLayer: 'region-78kdxj'\n            }, {\n              hover: false\n            });\n          }\n\n          hoveredID = e.features[0].id;\n          this.map.setFeatureState({\n            source: 'africapolis_region_label',\n            id: hoveredID,\n            sourceLayer: 'region-78kdxj'\n          }, {\n            hover: true\n          });\n        }\n      });\n      this.map.on('mouseleave', 'region_labels', e => {\n        if (hoveredID) {\n          this.map.setFeatureState({\n            source: 'africapolis_region_label',\n            id: hoveredID,\n            sourceLayer: 'region-78kdxj'\n          }, {\n            hover: false\n          });\n        }\n\n        hoveredID = null;\n      });\n    });\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState.selectedOption !== this.state.selectedOption || prevState.update !== this.state.update) {\n      console.log(this.state.selectedOption, prevState.selectedOption);\n      this.remove('country');\n      this.remove('agglomerations');\n\n      if (this.state.selectedOption.region) {\n        this.add_shape('country', [\"==\", \"Region_ID\", this.state.selectedOption.value]);\n        this.add_point('agglomerations', [\"==\", \"Region_ID\", this.state.selectedOption.value], [\">\", \"Population_\" + this.state.update[0], 0]);\n      } else {\n        this.add_shape('country', [\"==\", \"ISO3\", IDtoISO3_f(this.state.selectedOption.value)]);\n        this.add_point('agglomerations', [\"==\", \"ISO3\", IDtoISO3_f(this.state.selectedOption.value)], [\">\", \"Population_\" + this.state.update[0], 0]);\n      }\n    }\n\n    if (prevState.update !== this.state.update) {\n      console.log(this.state.update[0]);\n    }\n  }\n\n  render() {\n    const {\n      selectedOption\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 372,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 373,\n        columnNumber: 9\n      }\n    }, \"Longitude: \", this.state.lng, \" | Latitude: \", this.state.lat, \" | Zoom: \", this.state.zoom), /*#__PURE__*/React.createElement(\"div\", {\n      ref: el => this.mapContainer = el,\n      className: \"mapContainer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 374,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Slider, {\n      mode: 1,\n      rootStyle: sliderStyle,\n      domain: [1950, 2015] // [min, max]\n      ,\n      values: [2015] // slider values\n      ,\n      step: 10,\n      onUpdate: this.onUpdate,\n      onChange: this.onChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 375,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: railStyle\n      /* Add a rail as a child.  Later we'll make it interactive. */\n      ,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 384,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Handles, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 385,\n        columnNumber: 17\n      }\n    }, ({\n      handles,\n      getHandleProps\n    }) => /*#__PURE__*/React.createElement(\"div\", {\n      className: \"slider-handles\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 387,\n        columnNumber: 19\n      }\n    }, handles.map(handle => /*#__PURE__*/React.createElement(Handle, {\n      key: handle.id,\n      handle: handle,\n      getHandleProps: getHandleProps,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 389,\n        columnNumber: 23\n      }\n    }))))), /*#__PURE__*/React.createElement(Select, {\n      value: selectedOption,\n      onChange: value => this.setState({\n        selectedOption: value\n      }),\n      options: options,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 399,\n        columnNumber: 9\n      }\n    })));\n  }\n\n}\n\nReactDOM.render( /*#__PURE__*/React.createElement(Application, {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 410,\n    columnNumber: 17\n  }\n}), document.getElementById('app'));","map":{"version":3,"sources":["C:/mapboxAndReact/src/index.js"],"names":["React","ReactDOM","mapboxgl","axios","Select","Slider","Handles","Tracks","accessToken","Handle","handle","id","value","percent","getHandleProps","left","position","marginLeft","marginTop","zIndex","width","height","border","textAlign","cursor","borderRadius","backgroundColor","color","fontFamily","fontSize","sliderStyle","railStyle","ISO2toID","AO","BI","BJ","BF","BW","CF","CI","CM","CD","CG","CV","DJ","DZ","EG","ER","ET","GA","GH","GN","GM","GW","GQ","KE","LR","LY","LS","MA","ML","MZ","MR","MW","NA","NE","NG","RW","SD","SN","SL","SO","SS","ST","SZ","TD","TG","TN","TZ","UG","ZA","ZM","ZW","ID2toISO3","countryBound","ISO2toID_f","countryCode","IDtoISO3_f","getCountryBound","getKeyByValue","object","Object","keys","find","key","agglomeration_fill_color","agglomeration_stroke_color","options","label","Application","Component","constructor","props","onUpdate","update","setState","onChange","values","remove","obj","map","removeLayer","add_point","filter1","filter2","addLayer","source","type","filter","paint","add_shape","state","lng","lat","zoom","selectedOption","componentDidMount","Map","container","mapContainer","style","center","on","getCenter","toFixed","getZoom","addSource","url","layout","e","features","layer","properties","ISO3_CODE","NAME_EN","fitBounds","Region_ID","Name","region","hoveredID","length","setFeatureState","sourceLayer","hover","console","log","componentDidUpdate","prevProps","prevState","render","el","handles","document","getElementById"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport mapboxgl from 'mapbox-gl';\r\nimport axios from 'axios';\r\nimport Select from 'react-select';\r\nimport { Slider, Handles, Tracks } from 'react-compound-slider';\r\n//// Access token for Africapolis mapbox account\r\nmapboxgl.accessToken = 'pk.eyJ1IjoibWttZCIsImEiOiJjajBqYjJpY2owMDE0Mndsbml0d2V1ZXczIn0.el8wQmA-TSJp2ggX8fJ1rA';\r\n\r\n\r\n/////////////// Slider\r\nexport function Handle({\r\n  handle: { id, value, percent },\r\n  getHandleProps\r\n}) {\r\n  return (\r\n    <div\r\n      style={{\r\n        left: `${percent}%`,\r\n        position: 'absolute',\r\n        marginLeft: -15,\r\n        marginTop: 25,\r\n        zIndex: 2,\r\n        width: 30,\r\n        height: 30,\r\n        border: 0,\r\n        textAlign: 'center',\r\n        cursor: 'pointer',\r\n        borderRadius: '50%',\r\n        backgroundColor: '#2C4870',\r\n        color: '#333',\r\n      }}\r\n      {...getHandleProps(id)}\r\n    >\r\n      <div style={{ fontFamily: 'Roboto', fontSize: 11, marginTop: -15 }}>\r\n        {value}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst sliderStyle = {  // Give the slider some width\r\n  position: 'relative',\r\n  width: '30%',\r\n  height: 50\r\n}\r\n\r\nconst railStyle = {\r\n  position: 'absolute',\r\n  width: '100%',\r\n  height: 10,\r\n  marginTop: 35,\r\n  borderRadius: 5,\r\n  backgroundColor: '#8B9CB6',\r\n}\r\n\r\n\r\n//////////////////\r\nconst ISO2toID = {AO:1, BI:2, BJ:3, BF:4, BW:5, CF:6, CI:7, CM:8, CD:9, CG:10, CV:11, DJ:12, DZ:13, EG:14, ER:15, ET:16, GA:17, GH:18, GN:19, GM:20, GW:21, GQ:22, KE:23, LR:24, LY:25, LS:26, MA:27, ML:28, MZ:29, MR:30, MW:31, NA:32, NE:33, NG:34, RW:35, SD:36, SN:37, SL:38, SO:39, SS:40, ST:41, SZ:42, TD:43, TG:44, TN:45, TZ:46, UG:47, ZA:48, ZM:49, ZW:50}\r\n\r\nconst ID2toISO3 ={1:\"AGO\",2:\"BDI\",3:\"BEN\",4:\"BFA\",5:\"BWA\",6:\"CAF\",7:\"CIV\",8:\"CMR\",9:\"COD\",10:\"COG\",11:\"CPV\",12:\"DJI\",13:\"DZA\",14:\"EGY\",15:\"ERI\",16:\"ETH\",17:\"GAB\",18:\"GHA\",19:\"GIN\",20:\"GMB\",21:\"GNB\",22:\"GNQ\",23:\"KEN\",24:\"LBR\",25:\"LBY\",26:\"LSO\",27:\"MAR\",28:\"MLI\",29:\"MOZ\",30:\"MRT\",31:\"MWI\",32:\"NAM\",33:\"NER\",34:\"NGA\",35:\"RWA\",36:\"SDN\",37:\"SEN\",38:\"SLE\",39:\"SOM\",40:\"SSD\",41:\"STP\",42:\"SWZ\",43:\"TCD\",44:\"TGO\",45:\"TUN\",46:\"TZA\",47:\"UGA\",48:\"ZAF\",49:\"ZMB\",50:\"ZWE\"}\r\n\r\n\r\n\r\nconst countryBound = {1:[[ 11.67880883351409,-18.0395441112506],[24.0827635146694, -4.377635366107427 ]], 2:[[ 28.993800497072044,-4.46551358137126],[30.8450390589687, -2.312156363797868 ]], 3:[[ 0.774558544224476,6.22447495853009],[3.85082880284835, 12.393508622871479 ]], 4:[[ -5.520794727315028,9.39964017278909],[2.40608025898589, 15.085258417277188 ]], 5:[[ 20.001242333380191,-26.8837918049531],[29.3618491231722, -17.781364563205884 ]], 6:[[ 14.419995451249584,2.21983656110873],[27.4611737379457, 11.009192333734617 ]], 7:[[ -8.569597716425136,4.35678586749077],[-2.49396129202089, 10.734519638596169 ]], 8:[[ 8.492690805810334,1.65404064168932],[16.1943512292781, 13.080169051742061 ]], 9:[[ 12.206163360999454,-13.4581143630142],[31.3065062339817, 5.373053530527471 ]], 10:[[ 11.206388845056409,-5.02585440304395],[18.6498697204794, 3.703069114856376 ]], 11:[[ -25.357213543522146,14.8050880064408],[-22.6764804894878, 17.194676527218675 ]], 12:[[ 41.771301520025517,10.910318687075],[43.4137973572072, 12.706622709944 ]], 13:[[ -8.673969078782633,18.9635345895493],[11.9809701071419, 37.09150628917579 ]], 14:[[ 24.697996257418708,22.0013421472637],[35.7615737570691, 31.664110210683646 ]], 15:[[ 36.437281372495079,12.3605223286841],[43.1336269463708, 18.002201465540395 ]], 16:[[ 32.998438894493276,3.4009078412285],[47.9842742919989, 14.892966221704711 ]], 17:[[ 8.695935814827443,-3.97664306377109],[14.5024185687666, 2.324250541417371 ]], 18:[[ -3.257547122710676,4.73578730703557],[1.19206530262996, 11.173995950817698 ]], 19:[[ -15.079191428377445,7.20230122963262],[-7.64122957762785, 12.673679033707842 ]], 20:[[ -16.826079936892199,13.0527230912037],[-13.7937487859001, 13.827261735338197 ]], 21:[[ -16.716210858836821,10.9267692162175],[-13.6344428845149, 12.684674465103612 ]], 22:[[ 5.603193718085414,-1.46069231784424],[11.3327510702054, 3.785449614422333 ]], 23:[[ 33.910335195172479,-4.67975402178414],[41.8976211272234, 4.620420513282312 ]], 24:[[ -11.492059789361775,4.35124553384174],[-7.36655688248939, 8.553673842533343 ]], 25:[[ 9.388093959395881,19.5073822641284],[25.148468001036, 33.169291009271674 ]], 26:[[ 27.027195141422098,-30.6577392328189],[29.4662204855297, -28.570269367717884 ]], 27:[[ -13.167520611755194,27.6594718132624],[-0.994299518106317, 35.910435009056016 ]], 28:[[ -12.233633448284422,10.1632260034789],[4.24084698276459, 25.000708313044015 ]], 29:[[ 30.218810884823739,-26.8673412758106],[40.8374143565547, -10.475241344327628 ]], 30:[[ -17.067787646818925,14.7171671732258],[-4.82863658274659, 27.296920902860109 ]], 31:[[ 32.679827091722899,-17.1221500948736],[35.9153819427564, -9.371052848075948 ]], 32:[[ 11.717292843399271,-28.9713042880053],[25.2583370790913, -16.957389095741675 ]], 33:[[ 0.164802208197493,11.6958527626051],[15.9966039359589, 23.523016092945412 ]], 34:[[ 2.669757522728581,4.27986046567154],[14.6781749992943, 13.893191705761652 ]], 35:[[ 28.856485458478389,-2.83951089128324],[30.8944758822985, -1.054159681858877 ]], 36:[[ 21.841485463881099,8.68549116542911],[38.5796857766238, 22.226578019072377 ]], 37:[[ -17.518238081460641,12.3056304076076],[-11.3437280103967, 16.694767960271577 ]], 38:[[ -13.310333366046727,6.92762853449416],[-10.2835212397281, 9.998422386395802 ]], 39:[[ 40.991222542242099,-1.66389470891022],[51.4120787206538, 11.97602317344149 ]], 40:[[ 24.154191200790834,3.48882867444349],[35.9483682369437, 12.199554327204311 ]], 41:[[ 6.471150911132696,0.027995333650139],[7.46542771137786, 1.70347746501912 ]], 42:[[ 30.79560223563891,-27.3178130194279],[32.1359794171438, -25.719213671927008 ]], 43:[[ 13.475155474334223,7.43853253283703],[24.0003830151035, 23.451588406824072 ]], 44:[[ -0.148311878875006,6.10365306702988],[1.79632392295911, 11.141009656630501 ]], 45:[[ 7.52585996610344,30.2413525296127],[11.5964283339481, 37.349728455171743 ]], 46:[[ 29.328905446936076,-11.7441908397112],[40.4419197699163, -0.988272329386561 ]], 47:[[ 29.5760895635851,-1.48264056268463],[35.0364719362645, 4.213930495248093 ]], 48:[[ 16.458028493020869,-46.9784114781806],[38.0028518078575, -22.126605626189018 ]], 49:[[ 22.000791365266281,-18.0779855031847],[33.6850993233638, -8.222967862143477 ]], 50:[[ 25.23634621629985,-22.4177288504699],[33.0588711492188, -15.611514198538828 ]]}\r\n\r\nfunction ISO2toID_f(countryCode) { return ISO2toID[countryCode] }\r\nfunction IDtoISO3_f(countryCode) { return ID2toISO3[countryCode] }\r\nfunction getCountryBound(countryCode) { return countryBound[countryCode] }\r\nfunction getKeyByValue(object, value) { return Object.keys(object).find(key => object[key] === value);}\r\n\r\n\r\nconst agglomeration_fill_color =[\r\n  \"step\",\r\n  [\"get\", \"Population_2015\"],\r\n  \"hsla(0, 0%, 8%, 0.5)\",\r\n  10000,\r\n  \"hsla(55, 30%, 93%, 0.5)\",\r\n  30000,\r\n  \"hsla(60, 100%, 90%, 0.5)\",\r\n  100000,\r\n  \"hsla(98, 55%, 81%, 0.5)\",\r\n  300000,\r\n  \"hsla(166, 44%, 65%, 0.5)\",\r\n  1000000,\r\n  \"hsla(186, 53%, 51%, 0.5)\",\r\n  2000000,\r\n  \"hsla(197, 74%, 43%, 0.5)\",\r\n  11847635,\r\n  \"hsla(197, 74%, 43%, 0.5)\"\r\n ]\r\n const agglomeration_stroke_color =[\r\n  \"step\",\r\n  [\"get\", \"Population_2015\"],\r\n  \"hsla(0, 0%, 8%, 1)\",\r\n  10000,\r\n  \"hsla(55, 30%, 93%, 1)\",\r\n  30000,\r\n  \"hsla(60, 100%, 90%, 1)\",\r\n  100000,\r\n  \"hsla(98, 55%, 81%, 1)\",\r\n  300000,\r\n  \"hsla(166, 44%, 65%, 1)\",\r\n  1000000,\r\n  \"hsla(186, 53%, 51%, 1)\",\r\n  2000000,\r\n  \"hsla(197, 74%, 43%, 1)\",\r\n  11847635,\r\n  \"hsla(197, 74%, 43%, 1)\"\r\n ]\r\n const options = [{ label:\"Angola\",value:1 }, { label:\"Burundi\",value:2 }, { label:\"Benin\",value:3 }, { label:\"Burkina Faso\",value:4 }, { label:\"Botswana\",value:5 }, { label:\"Central African Republic\",value:6 }, { label:\"Cote d`Ivoire\",value:7 }, { label:\"Cameroon\",value:8 }, { label:\"Democratic Republic of the Congo\",value:9 }, { label:\"Republic of the Congo\",value:10 }, { label:\"Cabo Verde\",value:11 }, { label:\"Djibouti\",value:12 }, { label:\"Algeria\",value:13 }, { label:\"Egypt\",value:14 }, { label:\"Eritrea\",value:15 }, { label:\"Ethiopia\",value:16 }, { label:\"Gabon\",value:17 }, { label:\"Ghana\",value:18 }, { label:\"Guinea\",value:19 }, { label:\"The Gambia\",value:20 }, { label:\"Guinea-Bissau\",value:21 }, { label:\"Equatorial Guinea\",value:22 }, { label:\"Kenya\",value:23 }, { label:\"Liberia\",value:24 }, { label:\"Libya\",value:25 }, { label:\"Lesotho\",value:26 }, { label:\"Morocco\",value:27 }, { label:\"Mali\",value:28 }, { label:\"Mozambique\",value:29 }, { label:\"Mauritania\",value:30 }, { label:\"Malawi\",value:31 }, { label:\"Namibia\",value:32 }, { label:\"Niger\",value:33 }, { label:\"Nigeria\",value:34 }, { label:\"Rwanda\",value:35 }, { label:\"Sudan\",value:36 }, { label:\"Senegal\",value:37 }, { label:\"Sierra Leone\",value:38 }, { label:\"Somalia\",value:39 }, { label:\"South Sudan\",value:40 }, { label:\"Sao Tome and Principe\",value:41 }, { label:\"Kingdom of Eswatini\",value:42 }, { label:\"Chad\",value:43 }, { label:\"Togo\",value:44}, { label:\"Tunisia\",value:45 }, { label:\"Tanzania\",value:46 }, { label:\"Uganda\",value:47 }, { label:\"South Africa\",value:48 }, { label:\"Zambia\",value:49 }, { label:\"Zimbabwe\",value:50 }];\r\n\r\n//// Basic setting of the map\r\nclass Application extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      lng: 5,\r\n      lat: 0,\r\n      zoom: 3,\r\n      selectedOption: {label: 'Africa', value: ''},\r\n      values:2015,\r\n      update:[2015]\r\n    };\r\n  }\r\ncomponentDidMount() {\r\n//// Initial map setting\r\n\r\n     this.map = new mapboxgl.Map({\r\n      container: this.mapContainer,\r\n      style: 'mapbox://styles/mkmd/ck9eg99c72gwg1imtdbugc9yn', /// Select mapstyle from mapbox studio\r\n      center: [this.state.lng, this.state.lat],\r\n      zoom: this.state.zoom\r\n    });\r\n    this.map.on('move', () => {\r\n      this.setState({\r\n      lng: this.map.getCenter().lng.toFixed(4),\r\n      lat: this.map.getCenter().lat.toFixed(4),\r\n      zoom: this.map.getZoom().toFixed(2)\r\n      });\r\n    });\r\n//// Import Africapolis agglomerations from mapbox\r\n    this.map.on('load', () => {\r\n// Add Country shape\r\n      this.map.addSource('africapolis_country', { type: 'vector', url: 'mapbox://mkmd.5xeh701b'});\r\n// Add Agglomerations\r\n      this.map.addSource('africapolis_agglos', { type: 'vector', url: 'mapbox://mkmd.3e0rk98j'});\r\n// Add Country label\r\n      this.map.addSource('africapolis_country_label', { type: 'vector', url: 'mapbox://mkmd.6v0ckax4'});\r\n// Add Region labelled\r\n      this.map.addSource('africapolis_region_label', { type: 'vector', url: 'mapbox://mkmd.3yut44ue'});\r\n\r\n// Add Country layer\r\n      this.map.addLayer({\r\n            id: 'country',\r\n            source:'africapolis_country',\r\n            type: 'fill',\r\n            'source-layer':'africacontinent_complete-ays128',\r\n            //filter:[\"==\",\"Region_ID\",1],\r\n            paint: {\r\n              'fill-color': '#fdfdf5',\r\n              'fill-opacity': 0.2\r\n            }\r\n        });\r\n\r\n\r\n\r\n// Add Agglomerations layer\r\n      this.map.addLayer({\r\n            id: 'agglomerations',\r\n            source:'africapolis_agglos',\r\n            type: 'circle',\r\n            'source-layer':'africapolis2020-3mv6ux',\r\n            filter:[\">\",\"Population_2015\",0],\r\n            paint: {\r\n                'circle-stroke-color': agglomeration_stroke_color,\r\n                'circle-stroke-width': 3,\r\n                'circle-color': agglomeration_fill_color\r\n            }\r\n        });\r\n\r\n//mkmd.ck19bzbfg07z42tmz06bk8soe-6dzi4\r\n//AfricaContinent\r\n//ISO3_CODE\r\n      this.map.addLayer({\r\n            id: 'country_labels',\r\n            source:'africapolis_country_label',\r\n            type: 'symbol',\r\n            'source-layer':'OECD_countryname-0ogi2f',\r\n            filter:[ \"all\", [ \"match\", [\"get\", \"ISO3_CODE\"], [ \"AGO\", \"BDI\", \"BEN\", \"BFA\", \"BWA\", \"CAF\", \"CIV\", \"CMR\", \"COD\", \"COG\", \"CPV\", \"DJI\", \"DZA\", \"EGY\", \"ERI\", \"ETH\", \"GAB\", \"GHA\", \"GIN\", \"GMB\", \"GNB\", \"GNQ\", \"KEN\", \"LBR\", \"LBY\", \"LSO\", \"MAR\", \"MLI\", \"MOZ\", \"MRT\", \"MWI\", \"NAM\", \"NER\", \"NGA\", \"RWA\", \"SDN\", \"SEN\", \"SLE\", \"SOM\", \"SSD\", \"STP\", \"SWZ\", \"TCD\", \"TGO\", \"TUN\", \"TZA\", \"UGA\", \"ZAF\", \"ZMB\", \"ZWE\",\"MDG\", \"SYC\", \"COM\" ], true, false ]],\r\n            layout: {\r\n              'text-field':[\"get\",\"NAME_EN\"],\r\n              'text-font': [ \"Helvetica Neue LT Std 75 Bold\", \"Arial Unicode MS Regular\"],\r\n              'text-size': [\"interpolate\", [\"linear\"], [\"zoom\"], 2, [\"step\", [\"get\", \"scalerank\"], 10, 3, 8, 5, 5 ], 9, [\"step\", [\"get\", \"scalerank\"], 35, 3, 27, 5, 22 ] ],\r\n\r\n              //\r\n                //'circle-stroke-color': agglomeration_stroke_color,\r\n                //'circle-stroke-width': 3,\r\n                //'circle-color': agglomeration_fill_color\r\n            },\r\n            paint:{'text-opacity':[ \"step\",[\"zoom\"],  0,  3,  1,  22,  1],\r\n                   'text-color':['case',['boolean', ['feature-state', 'hover'], false],\"hsl(0,0%,0%)\",\"#6d6d6f\"],\r\n                   'text-halo-color': \"hsl(0, 0%, 100%)\",\r\n                   'text-halo-width': 1.25}\r\n        });\r\n\r\n        this.map.addLayer({\r\n              id: 'region_labels',\r\n              source:'africapolis_region_label',\r\n              type: 'symbol',\r\n              'source-layer':'region-78kdxj',\r\n              layout: {\r\n                'text-field':[\"to-string\", [\"get\", \"Name\"]],\r\n                'text-font': [ \"Helvetica Neue LT Std 75 Bold\", \"Arial Unicode MS Regular\"],\r\n                'text-size': 26\r\n                  //'circle-stroke-color': agglomeration_stroke_color,\r\n                  //'circle-stroke-width': 3,\r\n                  //'circle-color': agglomeration_fill_color\r\n              },\r\n              paint:{'text-color':['case',['boolean', ['feature-state', 'hover'], false], \"hsl(60,100%,50%)\",\"hsl(0, 0%, 100%)\"],\r\n                     'text-halo-color': \"hsl(0, 0%, 0%)\",\r\n                     'text-halo-width': 3,\r\n                    'text-opacity':[ \"step\",[\"zoom\"],  1,  3,  0,  22,  0]\r\n              }\r\n          });\r\n\r\n\r\n        this.map.on('click', 'country_labels', e =>  {\r\n              if(e.features[0].layer.paint[\"text-opacity\"] === 1)\r\n            {\r\n              this.setState({ selectedOption: {value: getKeyByValue(ID2toISO3,e.features[0].properties.ISO3_CODE), label: e.features[0].properties.NAME_EN  } })\r\n              this.map.fitBounds(getCountryBound(this.state.selectedOption.value))\r\n            }\r\n\r\n            });\r\n\r\n        this.map.on('click', 'region_labels', e =>  {\r\n              if(e.features[0].layer.paint[\"text-opacity\"] === 1)\r\n              {\r\n                    this.setState({ selectedOption: {value: e.features[0].properties.Region_ID, label:e.features[0].properties.Name , region: \"Yes\"  } })\r\n              }\r\n                  });\r\n\r\n\r\nvar hoveredID=null;\r\n        this.map.on('mouseenter', 'country_labels', e =>  {\r\n          if (e.features.length > 0) {\r\n                if (hoveredID) {\r\n                    this.map.setFeatureState(\r\n                    { source: 'africapolis_country_label', id:hoveredID, sourceLayer:'OECD_countryname-0ogi2f' },\r\n                    { hover: false }\r\n                    );\r\n                    }\r\n                hoveredID = e.features[0].id;\r\n                this.map.setFeatureState(\r\n                { source: 'africapolis_country_label', id:hoveredID, sourceLayer:'OECD_countryname-0ogi2f' },\r\n                { hover: true }\r\n                );\r\n                }\r\n            });\r\n\r\n        this.map.on('mouseleave', 'country_labels', e =>  {\r\n          if (hoveredID) {\r\n                      this.map.setFeatureState(\r\n                      { source: 'africapolis_country_label', id:hoveredID, sourceLayer:'OECD_countryname-0ogi2f' },\r\n                      { hover: false }\r\n                      );\r\n                    }\r\n                    hoveredID = null;\r\n                });\r\n\r\n\r\n        this.map.on('mouseenter', 'region_labels', e =>  {\r\n          console.log(e.features.length)\r\n          if (e.features.length > 0) {\r\n                if (hoveredID) {\r\n                    this.map.setFeatureState(\r\n                    { source: 'africapolis_region_label', id:hoveredID, sourceLayer:'region-78kdxj' },\r\n                    { hover: false }\r\n                    );\r\n                    }\r\n                hoveredID = e.features[0].id;\r\n                this.map.setFeatureState(\r\n                { source: 'africapolis_region_label', id:hoveredID, sourceLayer:'region-78kdxj' },\r\n                { hover: true }\r\n                );\r\n                }\r\n            });\r\n\r\n        this.map.on('mouseleave', 'region_labels', e =>  {\r\n          if (hoveredID) {\r\n                      this.map.setFeatureState(\r\n                      { source: 'africapolis_region_label', id:hoveredID, sourceLayer:'region-78kdxj' },\r\n                      { hover: false }\r\n                      );\r\n                    }\r\n                    hoveredID = null;\r\n                });\r\n\r\n\r\n\r\n    });\r\n\r\n\r\n}\r\ncomponentDidUpdate(prevProps, prevState) {\r\n    if( prevState.selectedOption !== this.state.selectedOption || prevState.update !== this.state.update ) {\r\n      console.log(this.state.selectedOption, prevState.selectedOption);\r\n      this.remove('country');\r\n      this.remove('agglomerations');\r\n\r\n      if (this.state.selectedOption.region)\r\n      {\r\n        this.add_shape('country',[\"==\",\"Region_ID\",this.state.selectedOption.value]);\r\n        this.add_point('agglomerations',[\"==\",\"Region_ID\",this.state.selectedOption.value],[\">\",\"Population_\"+this.state.update[0],0]);\r\n      }\r\n      else\r\n      {\r\n        this.add_shape('country',[\"==\",\"ISO3\",IDtoISO3_f(this.state.selectedOption.value)]);\r\n        this.add_point('agglomerations',[\"==\",\"ISO3\",IDtoISO3_f(this.state.selectedOption.value)],[\">\",\"Population_\"+this.state.update[0],0]);\r\n      }\r\n  }\r\n\r\n    if(prevState.update !== this.state.update)\r\n    {console.log(this.state.update[0])}\r\n}\r\n\r\nonUpdate = update => {\r\n  this.setState({ update })\r\n}\r\n\r\nonChange = values => {\r\n  this.setState({ values })\r\n}\r\n\r\nremove = obj => {\r\n    this.map.removeLayer(obj)\r\n}\r\nadd_point = (obj,filter1,filter2) => {\r\n    this.map.addLayer({\r\n        id: obj,\r\n        source:'africapolis_agglos',\r\n        type: 'circle',\r\n        'source-layer':'africapolis2020-3mv6ux',\r\n        filter:[\"all\",filter1,filter2],\r\n        paint: {\r\n        'circle-stroke-color': agglomeration_stroke_color,\r\n        'circle-stroke-width': 3,\r\n        'circle-color': agglomeration_fill_color\r\n        }\r\n    });\r\n}\r\nadd_shape = (obj,filter1) => {\r\n    this.map.addLayer({\r\n        id: obj,\r\n        source:'africapolis_country',\r\n        type: 'fill',\r\n        'source-layer':'africacontinent_complete-ays128',\r\n        filter:filter1,\r\n        paint: {\r\n          'fill-color': '#fdfdf5',\r\n          'fill-opacity': [\"interpolate\",[\"linear\"],[\"zoom\"], 0,1,5,0] //8.5\r\n        }\r\n    });\r\n    //console.log(this.map.getSource(\"africapolis_country\"))\r\n\r\n}\r\n\r\nrender() {\r\n    const { selectedOption } = this.state;\r\n    return (\r\n      <div>\r\n        <div>Longitude: {this.state.lng} | Latitude: {this.state.lat} | Zoom: {this.state.zoom}</div>\r\n        <div ref={el => this.mapContainer = el} className=\"mapContainer\" >\r\n        <Slider\r\n                mode={1}\r\n                rootStyle={sliderStyle}\r\n                domain={[1950, 2015]} // [min, max]\r\n                values={[2015]} // slider values\r\n                step={10}\r\n                onUpdate={this.onUpdate}\r\n                onChange={this.onChange}\r\n              >\r\n                <div style={railStyle /* Add a rail as a child.  Later we'll make it interactive. */} />\r\n                <Handles>\r\n                {({ handles, getHandleProps }) => (\r\n                  <div className=\"slider-handles\">\r\n                    {handles.map(handle => (\r\n                      <Handle\r\n                        key={handle.id}\r\n                        handle={handle}\r\n                        getHandleProps={getHandleProps}\r\n                      />\r\n                    ))}\r\n                  </div>\r\n                )}\r\n                </Handles>\r\n        </Slider>\r\n        <Select\r\n                value={selectedOption}\r\n                onChange={(value) => this.setState({ selectedOption: value}) }\r\n                options={options}\r\n              />\r\n\r\n                </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\nReactDOM.render(<Application />, document.getElementById('app'));\r\n"]},"metadata":{},"sourceType":"module"}